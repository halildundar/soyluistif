/*! For license information please see server.js.LICENSE.txt */
(()=>{var b={d:(t,r)=>{for(var e in r)b.o(r,e)&&!b.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:r[e]})},o:(t,r)=>Object.prototype.hasOwnProperty.call(t,r)},t=(b.d({},{T:()=>C}),require("dotenv")),r=require("express"),v=require("express-handlebars");let M=require("node:fs");var D=require("multer");let H=require("fs");var Q=r.Router({mergeParams:!0}),W=D.diskStorage({destination:function(t,r,e){t=t.body.dest_path,t=process.cwd()+"/public"+t;(0,H.existsSync)(t)||(0,H.mkdirSync)(t,{recursive:!0}),e(null,t)},filename:function(t,r,e){e(null,t.body.filename+"."+r.originalname.split(".").pop())}}),D=D({storage:W});let J=require("mysql");function z(t){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y(r,t){var e,n=Object.keys(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(r),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,e)),n}function q(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(e),!0).forEach(function(t){B(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Y(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))})}return r}function B(t,r,e){return(r=(t=>(t=((t,r)=>{if("object"!=z(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);if("object"!=z(e=e.call(t,r||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==z(t)?t:t+""))(r))in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}(0,t.config)({path:["const.env"]});var U=B(B(B({connectionLimit:5,host:process.env.MYSQL_DB_HOST,user:process.env.MYSQL_DB_USERNAME1,password:process.env.MYSQL_DB_PASSWORD1,database:process.env.MYSQL_DB_NAME},"connectionLimit",20),"idleTimeoutMillis",3e4),"connectionTimeoutMillis",2e3),d=new function(t,r,e){var t=q(q({},U),{},{database:t,user:r,password:e}),u=J.createPool(t);return{Connection:function(){return new Promise(function(t,r){u.getConnection(function(e,o){e&&r(e);t({query:function(t,r){return new Promise(function(e,n){o.query(t,r,function(t,r){t&&n(t),e(r)})})},release:function(){return new Promise(function(t,r){e&&r(e),t(o.release())})}})})})},Query:function(t,r){return new Promise(function(n,o){u.query(t,r,function(t,r,e){t&&o(t),n(r)})})}}}(U.database,U.user,U.password);function K(t){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var $=["id"];function V(t,r){return(t=>{if(Array.isArray(t))return t})(t)||((t,r)=>{var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,u,i,a=[],c=!0,s=!1;try{if(u=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;c=!1}else for(;!(c=(n=u.call(e)).done)&&(a.push(n.value),a.length!==r);c=!0);}catch(t){s=!0,o=t}finally{try{if(!c&&null!=e.return&&(i=e.return(),Object(i)!==i))return}finally{if(s)throw o}}return a}})(t,r)||tt(t,r)||(()=>{throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function X(t,r){if(null==t)return{};var e,n=((t,r)=>{if(null==t)return{};var e,n={};for(e in t)if({}.hasOwnProperty.call(t,e)){if(-1!==r.indexOf(e))continue;n[e]=t[e]}return n})(t,r);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),u=0;u<o.length;u++)e=o[u],-1===r.indexOf(e)&&{}.propertyIsEnumerable.call(t,e)&&(n[e]=t[e]);return n}function Z(t){return(t=>{if(Array.isArray(t))return rt(t)})(t)||(t=>{if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)})(t)||tt(t)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function tt(t,r){var e;if(t)return"string"==typeof t?rt(t,r):"Map"===(e="Object"===(e={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?rt(t,r):void 0}function rt(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function et(r,t){var e,n=Object.keys(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(r),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,e)),n}function nt(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?et(Object(o),!0).forEach(function(t){var r,e;r=n,e=o[t=t],(t=(t=>(t=((t,r)=>{if("object"!=K(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);if("object"!=K(e=e.call(t,r||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==K(t)?t:t+""))(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):et(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function m(){var o=st(),t=o.m(m),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,ot(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(m=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new ft(t,r)},AsyncIterator:ct,async:function(t,r,e,n,o){return(u(r)?at:it)(i(t),r,e,n,o)},keys:ut,values:ot}})()}function ot(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(K(t)+" is not iterable")}function ut(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function it(t,r,e,n,o){var u=at(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function at(t,r,e,n,o){return new ct(st().w(t,r,e,n),o||Promise)}function ct(a,c){var o;this.next||(h(ct.prototype),h(ct.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),h(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof ft?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function st(){var m,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof v?r:v,r=Object.create(r.prototype);return h(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:m,a:y,f:y.bind(m,4),d:function(t,r){return i=t,a=0,c=m,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(d=a<2?m:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(d=i[t=a?t:"next"]){if(!(d=d.call(i,c)))throw TypeError("iterator result is not an object");if(!d.done)return d;c=d.value,a<2&&(a=0)}else 1===a&&(d=i.return)&&d.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=m}else if((d=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=m,a=1,c=t}finally{s=1}}return{value:d,done:l}}),!0),r;function y(t,r){for(a=t,c=r,d=0;!l&&s&&!e&&d<f.length;d++){var e,n=f[d],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=m):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function v(){}function o(){}function u(){}var d=Object.getPrototypeOf,t=[][r]?d(d([][r]())):(h(d={},r,function(){return this}),d),i=u.prototype=v.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,h(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return h(i,"constructor",o.prototype=u),h(u,"constructor",o),h(u,e,o.displayName="GeneratorFunction"),h(i),h(i,e,"Generator"),h(i,r,function(){return this}),h(i,"toString",function(){return"[object Generator]"}),(st=function(){return{w:n,m:a}})()}function h(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(h=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){h(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function ft(t,r){this.v=t,this.k=r}function lt(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function n(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){lt(n,r,e,o,u,"next",t)}function u(t){lt(n,r,e,o,u,"throw",t)}o(void 0)})}}function pt(t){return"USD"==t.currency?"$":"EUR"==t.currency?"€":"₺"}var yt=(()=>{var r=n(m().mark(function t(r){var e;return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.Query("SELECT * FROM `slayt` WHERE tur = ? ORDER BY sira ASC ",[r]);case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}},t)}));return function(t){return r.apply(this,arguments)}})(),g=(()=>{var t=n(m().mark(function t(){var r;return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.Query("SELECT * FROM `kategori` WHERE parents  IS NULL ORDER BY name ASC");case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}})(),mt=(()=>{var t=n(m().mark(function t(){var r;return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.Query("SELECT * FROM `urun`  ORDER BY begenilme DESC LIMIT 20");case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}})(),bt=(()=>{var t=n(m().mark(function t(){var r;return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.Query("SELECT * FROM `urun`  ORDER BY `alinan` DESC LIMIT 20");case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}})(),vt=(()=>{var t=n(m().mark(function t(){var r;return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.Query("SELECT * FROM `urun`  ORDER BY kayit_tarih DESC LIMIT 20");case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}})(),dt=(()=>{var r=n(m().mark(function t(r){var e;return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.Query("SELECT name,url FROM `kategori` WHERE id IN ?",[[r]]);case 2:return e=t.sent,t.abrupt("return",e.map(function(t,r){t=nt({},t);return r==e.length-1?t.last=1:t.last=0,t}));case 4:case"end":return t.stop()}},t)}));return function(t){return r.apply(this,arguments)}})();function ht(){return(ht=n(m().mark(function t(r){var e,n,o,u,i,a;return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=function(t,r){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:5;if(null===t||null===r)return[];if(t===r)return[{id:1,min:Number(t),max:Number(r)}];for(var n=(Number(r)-Number(t))/e,o=[],u=0;u<e;u++){var i=Number(t)+n*u,a=u===e-1?Number(r):Number(t)+n*(u+1),i=Math.round(i),a=Math.round(a);o.push({id:u+1,min:i,max:a})}for(var c=1;c<o.length;c++)o[c].min=o[c-1].max+1,o[c].min>o[c].max&&(o[c].min=o[c-1].max);return o[o.length-1].max=Math.round(r),o},n="SELECT MIN(fiyat) AS minPrice, MAX(fiyat) AS maxPrice FROM urun WHERE currency = '"+r+"'",t.next=4,d.Query(n);case 4:if(n=t.sent,o=V(n,1),(o=o[0])&&0!==o.length){t.next=9;break}return t.abrupt("return",[]);case 9:if(u=o.minPrice,i=o.maxPrice,null===u||null===i)return t.abrupt("return",[]);t.next=12;break;case 12:return(a=e(Number(u),Number(i),5)).push({id:6,min:0,max:a[a.length-1].max}),a=a.map(function(t){return 6===t.id?nt(nt({},t),{},{selected:!0}):nt(nt({},t),{},{minStr:t.min.toFixed(2),maxStr:t.max.toFixed(2),selected:!1})}),t.abrupt("return",a.reverse());case 16:case"end":return t.stop()}},t)}))).apply(this,arguments)}var gt=(()=>{var r=n(m().mark(function t(r){var e;return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.Query("SELECT * FROM urun WHERE name LIKE '%"+r+"%' OR kod LIKE '%"+r+"%'");case 2:return e=t.sent,t.abrupt("return",{urunler:e});case 4:case"end":return t.stop()}},t)}));return function(t){return r.apply(this,arguments)}})(),wt=(()=>{var r=n(m().mark(function t(r){var e,n,o,u,i,a,c;return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e="SELECT id,parents FROM kategori WHERE url = '/kategori/".concat(r,"'"),t.next=3,d.Query(e);case 3:if(n=t.sent,u=[],i=[],a=[],n&&1==n.length)return o=n[0].id,c=n[0].parents,u=c?[].concat(Z(JSON.parse(c)),[o]):[o],c=u.length,t.next=14,d.Query("SELECT * FROM `kategori` WHERE JSON_CONTAINS(JSON_EXTRACT(parents,'$[?]'),?,'$') AND JSON_LENGTH(parents, '$') = ?",[c-1,o,c]);t.next=24;break;case 14:if(0==(i=t.sent).length)return t.next=18,d.Query("SELECT * FROM `kategori` WHERE JSON_CONTAINS(JSON_EXTRACT(parents,'$[?]'),?,'$') AND JSON_LENGTH(parents, '$') = ?",[c-2,u[u.length-2],c-1]);t.next=19;break;case 18:i=t.sent;case 19:return t.next=21,dt(u);case 21:a=t.sent,t.next=29;break;case 24:return e="SELECT * FROM kategori WHERE parents IS NULL",t.next=27,d.Query(e);case 27:n=t.sent,i=n;case 29:return t.abrupt("return",{altKategoriler:i,breadcrumbs:a});case 30:case"end":return t.stop()}},t)}));return function(t){return r.apply(this,arguments)}})(),Ot=(()=>{var e=n(m().mark(function t(r,e){var n,o,u,i,a,c,s,f,l,p,y=arguments;return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=2<y.length&&void 0!==y[2]?y[2]:0,o=3<y.length&&void 0!==y[3]?y[3]:0,u=4<y.length&&void 0!==y[4]?y[4]:"USD",i=5<y.length&&void 0!==y[5]?y[5]:1,a=6<y.length&&void 0!==y[6]?y[6]:"urun_a_z",r)return t.next=8,wt(r);t.next=23;break;case 8:return s=t.sent,t.next=11,d.Query("SELECT id FROM `kategori` WHERE url LIKE '%kategori/"+r+"%' OR name LIKE '%kategori/"+r+"%'");case 11:return f=t.sent,l="",l=f&&0<f.length?"SELECT * FROM `urun` WHERE parents LIKE '%"+f[0].id+"%' AND currency = '"+u+"'":"SELECT * FROM `urun` WHERE currency = '"+u+"'",e&&(l+=" AND (name LIKE '%"+e+"%' OR kod LIKE '%"+e+"%')"),0<o&&(l+=" AND fiyat  <= "+o),0<=n&&(l+=" AND fiyat >= "+n),1==i&&(l+=" AND stok > alinan"),"urun_a_z"==a?l+=" ORDER BY name ASC":"urun_z_a"==a?l+=" ORDER BY name DESC":"dusuk_fiyat"==a?l+=" ORDER BY fiyat ASC":"yuksek_fiyat"==a?l+=" ORDER BY fiyat DESC":"yeni"==a?l+=" ORDER BY kayit_tarih DESC":"cok_satan"==a?l+=" ORDER BY alinan DESC":"cok_oylanan"==a&&(l+=" ORDER BY begenilme DESC"),t.next=20,d.Query(l);case 20:c=t.sent,t.next=26;break;case 23:return t.next=25,d.Query("SELECT * FROM `urun`");case 25:c=t.sent;case 26:return p=[],t.next=29,function(){return ht.apply(this,arguments)}(u);case 29:return p=(p=t.sent).map(function(t){return t.min===parseInt(n)&&t.max===parseInt(o)&&(t.selected=!0),t}),t.abrupt("return",{urunler:c,breadcrumbs:s?s.breadcrumbs:[],filtreElemanlar:p,altKategoriler:s?s.altKategoriler:[]});case 32:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),xt=(()=>{var r=n(m().mark(function t(r){var e;return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.Query("SELECT * FROM `urun`  WHERE url = ?",[r]);case 2:return e=t.sent,t.abrupt("return",e[0]);case 4:case"end":return t.stop()}},t)}));return function(t){return r.apply(this,arguments)}})(),St=(()=>{var r=n(m().mark(function t(r){return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.Query("DELETE FROM `siparis` WHERE id = ?",[r]);case 2:return t.sent,t.abrupt("return",{msg:"OK!"});case 4:case"end":return t.stop()}},t)}));return function(t){return r.apply(this,arguments)}})(),kt=(()=>{var r=n(m().mark(function t(r){var e;return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=nt(nt({},r),{},{paymentCard:JSON.stringify(r.paymentCard),buyer:JSON.stringify(r.buyer),shippingAddress:JSON.stringify(r.shippingAddress),billingAddress:JSON.stringify(r.billingAddress),basketItems:JSON.stringify(r.basketItems)}),t.next=3,d.Query("INSERT INTO `siparis` SET ?",[e]);case 3:return e=t.sent,t.abrupt("return",e);case 5:case"end":return t.stop()}},t)}));return function(t){return r.apply(this,arguments)}})(),jt=(()=>{var r=n(m().mark(function t(r){var e,n;return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.id,e=X(r,$),t.next=3,d.Query("UPDATE `siparis` SET ? WHERE id = "+n,[e]);case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}},t)}));return function(t){return r.apply(this,arguments)}})(),Et=(()=>{var r=n(m().mark(function t(r){var e;return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.Query("SELECT * FROM `siparis` WHERE id = ?",[[r]]);case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}},t)}));return function(t){return r.apply(this,arguments)}})(),Pt=(()=>{var r=n(m().mark(function t(r){var e;return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.Query("SELECT * FROM `siparis` WHERE paymentId IN ?",[[r]]);case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}},t)}));return function(t){return r.apply(this,arguments)}})(),Tt=(()=>{var t=n(m().mark(function t(){var r;return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.Query("SELECT * FROM `eticsites`");case 2:return t.next=4,t.sent;case 4:if((r=t.sent)&&0<r.length)return t.abrupt("return",r.sort(function(t,r){return t.sira<r.sira?-1:1}));t.next=7;break;case 7:return t.abrupt("return",[]);case 8:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}})(),w=(()=>{var t=n(m().mark(function t(){var r;return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.Query("SELECT * FROM `settings` WHERE id = 1");case 2:return r=t.sent,t.abrupt("return",r[0]);case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}})();function _t(t){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nt(t){return(t=>{if(Array.isArray(t))return It(t)})(t)||(t=>{if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)})(t)||((t,r)=>{var e;if(t)return"string"==typeof t?It(t,r):"Map"===(e="Object"===(e={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?It(t,r):void 0})(t)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function It(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function At(){var o=Mt(),t=o.m(At),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,Rt(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(At=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new Dt(t,r)},AsyncIterator:Ct,async:function(t,r,e,n,o){return(u(r)?Gt:Lt)(i(t),r,e,n,o)},keys:Ft,values:Rt}})()}function Rt(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(_t(t)+" is not iterable")}function Ft(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Lt(t,r,e,n,o){var u=Gt(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function Gt(t,r,e,n,o){return new Ct(Mt().w(t,r,e,n),o||Promise)}function Ct(a,c){var o;this.next||(O(Ct.prototype),O(Ct.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),O(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof Dt?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function Mt(){var m,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof v?r:v,r=Object.create(r.prototype);return O(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:m,a:y,f:y.bind(m,4),d:function(t,r){return i=t,a=0,c=m,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(d=a<2?m:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(d=i[t=a?t:"next"]){if(!(d=d.call(i,c)))throw TypeError("iterator result is not an object");if(!d.done)return d;c=d.value,a<2&&(a=0)}else 1===a&&(d=i.return)&&d.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=m}else if((d=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=m,a=1,c=t}finally{s=1}}return{value:d,done:l}}),!0),r;function y(t,r){for(a=t,c=r,d=0;!l&&s&&!e&&d<f.length;d++){var e,n=f[d],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=m):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function v(){}function o(){}function u(){}var d=Object.getPrototypeOf,t=[][r]?d(d([][r]())):(O(d={},r,function(){return this}),d),i=u.prototype=v.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,O(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return O(i,"constructor",o.prototype=u),O(u,"constructor",o),O(u,e,o.displayName="GeneratorFunction"),O(i),O(i,e,"Generator"),O(i,r,function(){return this}),O(i,"toString",function(){return"[object Generator]"}),(Mt=function(){return{w:n,m:a}})()}function O(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(O=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){O(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function Dt(t,r){this.v=t,this.k=r}function Ht(r,t){var e,n=Object.keys(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(r),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,e)),n}function Qt(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(o),!0).forEach(function(t){var r,e;r=n,e=o[t=t],(t=(t=>(t=((t,r)=>{if("object"!=_t(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);if("object"!=_t(e=e.call(t,r||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==_t(t)?t:t+""))(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Ht(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function Wt(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function Jt(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){Wt(n,r,e,o,u,"next",t)}function u(t){Wt(n,r,e,o,u,"throw",t)}o(void 0)})}}var zt=(()=>{var t=Jt(At().mark(function t(){var r,e,n,o,u,i,a;return At().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,yt("homeleft");case 2:return r=t.sent,t.next=5,yt("homeright");case 5:return n=t.sent,e=r.map(function(t){return t.img_url}),n=n.map(function(t){return t.img_url}),t.next=10,g();case 10:return o=t.sent,t.next=13,mt();case 13:return u=(u=t.sent).map(function(t){var r=t.resimler?JSON.parse(t.resimler):[],t=Qt(Qt({},t),{},{kalan_stok:t.stok-t.alinan,resimler:r});return t.img_on=0<t.resimler.length?t.resimler[0]:"/assets/urun/resim_yok.webp",t.img_arka=1<t.resimler.length?t.resimler[1]:"/assets/urun/resim_yok.webp",Qt(Qt({},t),{},{symbcurr:pt(t)})}),t.next=17,bt();case 17:return i=(i=t.sent).map(function(t){var r=t.resimler?JSON.parse(t.resimler):[],t=Qt(Qt({},t),{},{kalan_stok:t.stok-t.alinan,resimler:r});return t.img_on=0<t.resimler.length?t.resimler[0]:"/assets/urun/resim_yok.webp",t.img_arka=1<t.resimler.length?t.resimler[1]:"/assets/urun/resim_yok.webp",Qt(Qt({},t),{},{symbcurr:pt(t)})}),t.next=21,vt();case 21:return a=(a=t.sent).map(function(t){var r=t.resimler?JSON.parse(t.resimler):[],t=Qt(Qt({},t),{},{kalan_stok:t.stok-t.alinan,resimler:r});return t.img_on=0<t.resimler.length?t.resimler[0]:"/assets/urun/resim_yok.webp",t.img_arka=1<t.resimler.length?t.resimler[1]:"/assets/urun/resim_yok.webp",Qt(Qt({},t),{},{symbcurr:pt(t)})}),t.abrupt("return",{enyeniler:a,coksatanlar:i,onecikanlar:u,imagesBg:e,imagesSm:n,mainMenus:o});case 24:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}})(),W=(()=>{var e=Jt(At().mark(function t(r,e){var n,o,u,i,a,c,s,f;return At().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,zt();case 2:return c=t.sent,n=c.enyeniler,o=c.coksatanlar,u=c.onecikanlar,i=c.imagesBg,a=c.imagesSm,c=c.mainMenus,t.next=11,Tt();case 11:return s=t.sent,t.next=14,w();case 14:f=t.sent,e.render("pages/website/home/main.hbs",{title:"Anasayfa | Soylu İstif Makinaları",scriptname:process.env.WEBSCRIPTNAME,scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',imagesBg:Nt(i),imagesSm:Nt(a),dizi:[0,1,2,3,4,5,6,7,8,9],menus:Nt(c),onecikanlar:u,coksatanlar:o,enyeniler:n,eticSiteler:s,wpno:f.whatsappno,musteri:r.user});case 16:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})();let Yt=require("node:path");function qt(t){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bt(){var o=Zt(),t=o.m(Bt),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,Ut(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(Bt=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new tr(t,r)},AsyncIterator:Xt,async:function(t,r,e,n,o){return(u(r)?Vt:$t)(i(t),r,e,n,o)},keys:Kt,values:Ut}})()}function Ut(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(qt(t)+" is not iterable")}function Kt(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function $t(t,r,e,n,o){var u=Vt(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function Vt(t,r,e,n,o){return new Xt(Zt().w(t,r,e,n),o||Promise)}function Xt(a,c){var o;this.next||(x(Xt.prototype),x(Xt.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),x(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof tr?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function Zt(){var m,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof v?r:v,r=Object.create(r.prototype);return x(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:m,a:y,f:y.bind(m,4),d:function(t,r){return i=t,a=0,c=m,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(d=a<2?m:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(d=i[t=a?t:"next"]){if(!(d=d.call(i,c)))throw TypeError("iterator result is not an object");if(!d.done)return d;c=d.value,a<2&&(a=0)}else 1===a&&(d=i.return)&&d.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=m}else if((d=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=m,a=1,c=t}finally{s=1}}return{value:d,done:l}}),!0),r;function y(t,r){for(a=t,c=r,d=0;!l&&s&&!e&&d<f.length;d++){var e,n=f[d],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=m):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function v(){}function o(){}function u(){}var d=Object.getPrototypeOf,t=[][r]?d(d([][r]())):(x(d={},r,function(){return this}),d),i=u.prototype=v.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,x(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return x(i,"constructor",o.prototype=u),x(u,"constructor",o),x(u,e,o.displayName="GeneratorFunction"),x(i),x(i,e,"Generator"),x(i,r,function(){return this}),x(i,"toString",function(){return"[object Generator]"}),(Zt=function(){return{w:n,m:a}})()}function x(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(x=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){x(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function tr(t,r){this.v=t,this.k=r}function rr(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}var er=(()=>{a=Bt().mark(function t(r,e){var n,o,u,i,a,c,s;return Bt().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:return n=t.sent,t.next=5,Tt();case 5:return o=t.sent,u=(0,Yt.join)(process.cwd(),"/views/pages/website/kurumsal"),t.next=9,w();case 9:i=t.sent,console.log(r.path),a="Not Found",s=c="","/hakkimizda"===r.path?(a=(0,M.readFileSync)((0,Yt.join)(u,"hakkimizda.hbs")),c="hakkimizda",s="Hakkımızda"):"/iletisim"===r.path?(a=(0,M.readFileSync)((0,Yt.join)(u,"iletisim.hbs")),c="iletisim",s="İletişim"):"/teslimat-iade-sartlar"===r.path?(a=(0,M.readFileSync)((0,Yt.join)(u,"teslimat-iade-sartlar.hbs")),c="teslimat-iade-sartlar",s="Teslimat ve İade Şartları"):"/mesafeli-satis-sozlesmesi"===r.path?(a=(0,M.readFileSync)((0,Yt.join)(u,"mesafeli-satis-sozlesmesi.hbs")),c="mesafeli-satis-sozlesmesi",s="Mesafeli Satış Sözleşmesi"):"/siparis-takip"===r.path?(a=(0,M.readFileSync)((0,Yt.join)(u,"siparis-takip.hbs")),c="siparis-takip",s="Sipariş Takip"):"/havale-bildirimleri"===r.path&&(a=(0,M.readFileSync)((0,Yt.join)(u,"havale-bildirimleri.hbs")),c="havale-bildirimleri",s="Havale Bildirimleri"),e.render("pages/website/kurumsal/main.hbs",{title:s+" | Soylu İstif Makinaları",scriptname:process.env.WEBSCRIPTNAME,scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',temp:a,pagename:s,pageurl:c,menus:n,eticSiteler:o,wpno:i.whatsappno,musteri:r.user});case 16:case"end":return t.stop()}},t)});var a,e=function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){rr(n,r,e,o,u,"next",t)}function u(t){rr(n,r,e,o,u,"throw",t)}o(void 0)})};return function(t,r){return e.apply(this,arguments)}})();function nr(t){return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function or(){var o=fr(),t=o.m(or),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,ur(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(or=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new lr(t,r)},AsyncIterator:sr,async:function(t,r,e,n,o){return(u(r)?cr:ar)(i(t),r,e,n,o)},keys:ir,values:ur}})()}function ur(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(nr(t)+" is not iterable")}function ir(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function ar(t,r,e,n,o){var u=cr(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function cr(t,r,e,n,o){return new sr(fr().w(t,r,e,n),o||Promise)}function sr(a,c){var o;this.next||(S(sr.prototype),S(sr.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),S(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof lr?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function fr(){var m,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof v?r:v,r=Object.create(r.prototype);return S(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:m,a:y,f:y.bind(m,4),d:function(t,r){return i=t,a=0,c=m,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(d=a<2?m:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(d=i[t=a?t:"next"]){if(!(d=d.call(i,c)))throw TypeError("iterator result is not an object");if(!d.done)return d;c=d.value,a<2&&(a=0)}else 1===a&&(d=i.return)&&d.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=m}else if((d=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=m,a=1,c=t}finally{s=1}}return{value:d,done:l}}),!0),r;function y(t,r){for(a=t,c=r,d=0;!l&&s&&!e&&d<f.length;d++){var e,n=f[d],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=m):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function v(){}function o(){}function u(){}var d=Object.getPrototypeOf,t=[][r]?d(d([][r]())):(S(d={},r,function(){return this}),d),i=u.prototype=v.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,S(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return S(i,"constructor",o.prototype=u),S(u,"constructor",o),S(u,e,o.displayName="GeneratorFunction"),S(i),S(i,e,"Generator"),S(i,r,function(){return this}),S(i,"toString",function(){return"[object Generator]"}),(fr=function(){return{w:n,m:a}})()}function S(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(S=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){S(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function lr(t,r){this.v=t,this.k=r}function pr(t){return(t=>{if(Array.isArray(t))return yr(t)})(t)||(t=>{if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)})(t)||((t,r)=>{var e;if(t)return"string"==typeof t?yr(t,r):"Map"===(e="Object"===(e={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?yr(t,r):void 0})(t)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function yr(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function mr(r,t){var e,n=Object.keys(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(r),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,e)),n}function br(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?mr(Object(o),!0).forEach(function(t){var r,e;r=n,e=o[t=t],(t=(t=>(t=((t,r)=>{if("object"!=nr(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);if("object"!=nr(e=e.call(t,r||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==nr(t)?t:t+""))(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):mr(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function vr(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function dr(t,r){for(t=t.toString();t.length<r;)t="0"+t;return t}var hr=(()=>{a=or().mark(function t(r,e){var n,o,u,i,a,c,s,f,l,p,y,m;return or().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.params.urunurl,u=[],t.next=4,g();case 4:return a=t.sent,t.next=7,Tt();case 7:return c=t.sent,t.next=10,w();case 10:if(s=t.sent,n)return t.next=14,xt(n);t.next=27;break;case 14:return(o=t.sent).currSymb=pt(o),o.resimler=o.resimler&&JSON.parse(o.resimler),o.aciklama=o.aciklama&&JSON.parse(o.aciklama),o.garanti_aciklama=o.garanti_aciklama&&JSON.parse(o.garanti_aciklama),o.youmlar=o.youmlar&&JSON.parse(o.youmlar),u=JSON.parse(o.parents),t.next=23,dt(u);case 23:u=t.sent,i=u[u.length-1],(u=u.map(function(t,r){return br(br({},t),{},{last:r+1})})).push({name:o.name,url:"/urun/"+o.url,last:0});case 27:f=o&&o.yorumlar?JSON.parse(o.yorumlar):null,l=5,y=p=0,f&&(y=f.map(function(t){return Number(t.oran)}).reduce(function(t,r){return t+r},0)/f.length,y=Math.floor(y),f=f.sort(function(t,r){return r.tarih-t.tarih}).map(function(t){return br(br({},t),{},{oran:Number(t.oran),resimler:t.resimler,first_resim:t.resimler[0],tarih:dr(new Date(t.tarih).getDate(),2)+"."+dr(new Date(t.tarih).getMonth()-1,2)+"."+new Date(t.tarih).getFullYear()})}),l=f.reduce(function(t,r){return t+r.oran},0)/f.length,l=(l=Math.floor(l)).toFixed(1),p=f.length),m=o&&o.resimler?JSON.stringify(o.resimler):null,e.render("pages/website/urun.hbs",{title:o?o.kod+" | Soylu İstif Makinaları":"Soylu İstif Makinaları",scriptname:process.env.WEBSCRIPTNAME,scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',urun:o,breadcrumbs:u,lastkategori:i,menus:pr(a),eticSiteler:c,wpno:s.whatsappno,musteri:r.user,weblink:r.protocol+"://"+r.get("host"),yorumlar:f,yorumlenght:f?f.length:0,yorumTotal:l,totalStars:"",yorumlength:p,firsturunresim:m?m[0]:"/assets/urun/resim_yok.webp",oran:y});case 35:case"end":return t.stop()}},t)});var a,e=function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){vr(n,r,e,o,u,"next",t)}function u(t){vr(n,r,e,o,u,"throw",t)}o(void 0)})};return function(t,r){return e.apply(this,arguments)}})();function gr(t){return(gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wr(t){return(t=>{if(Array.isArray(t))return Or(t)})(t)||(t=>{if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)})(t)||((t,r)=>{var e;if(t)return"string"==typeof t?Or(t,r):"Map"===(e="Object"===(e={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Or(t,r):void 0})(t)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function Or(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function xr(r,t){var e,n=Object.keys(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(r),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,e)),n}function Sr(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?xr(Object(o),!0).forEach(function(t){var r,e;r=n,e=o[t=t],(t=(t=>(t=((t,r)=>{if("object"!=gr(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);if("object"!=gr(e=e.call(t,r||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==gr(t)?t:t+""))(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):xr(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function kr(){var o=Nr(),t=o.m(kr),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,jr(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(kr=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new Ir(t,r)},AsyncIterator:_r,async:function(t,r,e,n,o){return(u(r)?Tr:Pr)(i(t),r,e,n,o)},keys:Er,values:jr}})()}function jr(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(gr(t)+" is not iterable")}function Er(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Pr(t,r,e,n,o){var u=Tr(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function Tr(t,r,e,n,o){return new _r(Nr().w(t,r,e,n),o||Promise)}function _r(a,c){var o;this.next||(k(_r.prototype),k(_r.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),k(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof Ir?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function Nr(){var m,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof v?r:v,r=Object.create(r.prototype);return k(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:m,a:y,f:y.bind(m,4),d:function(t,r){return i=t,a=0,c=m,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(d=a<2?m:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(d=i[t=a?t:"next"]){if(!(d=d.call(i,c)))throw TypeError("iterator result is not an object");if(!d.done)return d;c=d.value,a<2&&(a=0)}else 1===a&&(d=i.return)&&d.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=m}else if((d=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=m,a=1,c=t}finally{s=1}}return{value:d,done:l}}),!0),r;function y(t,r){for(a=t,c=r,d=0;!l&&s&&!e&&d<f.length;d++){var e,n=f[d],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=m):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function v(){}function o(){}function u(){}var d=Object.getPrototypeOf,t=[][r]?d(d([][r]())):(k(d={},r,function(){return this}),d),i=u.prototype=v.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,k(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return k(i,"constructor",o.prototype=u),k(u,"constructor",o),k(u,e,o.displayName="GeneratorFunction"),k(i),k(i,e,"Generator"),k(i,r,function(){return this}),k(i,"toString",function(){return"[object Generator]"}),(Nr=function(){return{w:n,m:a}})()}function k(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(k=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){k(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function Ir(t,r){this.v=t,this.k=r}function Ar(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function Rr(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){Ar(n,r,e,o,u,"next",t)}function u(t){Ar(n,r,e,o,u,"throw",t)}o(void 0)})}}var Fr=(()=>{var t=Rr(kr().mark(function t(){var r;return kr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}})(),Lr=(()=>{var e=Rr(kr().mark(function t(r,e){var n,o;return kr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r.body){t.next=3;break}return t.abrupt("return",e.json({status:!1,msg:"Hata!"}));case 3:return n=r.body.search,t.next=6,gt(n);case 6:n=t.sent,o=(o=n.urunler).map(function(t){return t.resimler=JSON.parse(t.resimler),Sr(Sr({},t),{},{currSymb:pt(t),resim_on:t.resimler&&0<t.resimler.length?t.resimler[0]:"/assets/urun/resim_yok.webp",resim_arka:t.resimler&&1<t.resimler.length?t.resimler[1]:"/assets/urun/resim_yok.webp"})}),e.json(o),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0);case 15:case"end":return t.stop()}},t,null,[[0,12]])}));return function(t,r){return e.apply(this,arguments)}})(),Gr=(()=>{var e=Rr(kr().mark(function t(r,e){var n,o,u,i,a,c,s,f,l,p,y;return kr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Fr();case 2:return n=t.sent,t.next=5,Tt();case 5:return o=t.sent,p=r.query,f=p.search,u=p.minfiyat,i=p.maxfiyat,l=p.stok,a=p.birim,p=p.other,"all"!=(s=r.params.kategori)&&!s||(c=s),decodeURIComponent(decodeURIComponent(r.path)),t.next=12,Ot(c,f,u,i,a,l,p);case 12:s=t.sent,f=s.urunler,l=s.altKategoriler,p=s.breadcrumbs,y=s.filtreElemanlar,f=f.map(function(t){return t.resimler=JSON.parse(t.resimler),Sr(Sr({},t),{},{currSymb:pt(t),resim_on:t.resimler&&0<t.resimler.length?t.resimler[0]:"/assets/urun/resim_yok.webp",resim_arka:t.resimler&&1<t.resimler.length?t.resimler[1]:"/assets/urun/resim_yok.webp"})}),y={title:p[p.length-1]?p[p.length-1].name+" | Soylu İstif Makinaları":"Soylu İstif Makinaları",scriptname:process.env.WEBSCRIPTNAME,scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',urunler:f||[],altKategoriler:l,menus:wr(n),breadcrumbs:p,dizi1:[0,1,2,3,4,5,6,7,8,9],eticSiteler:o,musteri:r.user,filtreElemanlar:y,currSymb:"TRY"==a?"₺":"EUR"==a?"€":"$"},u&&0!==parseInt(u)&&(y=Sr(Sr({},y),{},{minfiyat:parseInt(u)})),u&&0!==parseInt(i)&&(y=Sr(Sr({},y),{},{maxfiyat:parseInt(i)})),e.render("pages/website/kategori.hbs",y);case 22:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})();function Cr(t){return(Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mr(r,t){var e,n=Object.keys(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(r),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,e)),n}function Dr(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Mr(Object(o),!0).forEach(function(t){var r,e;r=n,e=o[t=t],(t=(t=>(t=((t,r)=>{if("object"!=Cr(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);if("object"!=Cr(e=e.call(t,r||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Cr(t)?t:t+""))(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Mr(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function Hr(){var o=qr(),t=o.m(Hr),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,Qr(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(Hr=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new Br(t,r)},AsyncIterator:Yr,async:function(t,r,e,n,o){return(u(r)?zr:Jr)(i(t),r,e,n,o)},keys:Wr,values:Qr}})()}function Qr(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(Cr(t)+" is not iterable")}function Wr(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Jr(t,r,e,n,o){var u=zr(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function zr(t,r,e,n,o){return new Yr(qr().w(t,r,e,n),o||Promise)}function Yr(a,c){var o;this.next||(j(Yr.prototype),j(Yr.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),j(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof Br?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function qr(){var m,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof v?r:v,r=Object.create(r.prototype);return j(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:m,a:y,f:y.bind(m,4),d:function(t,r){return i=t,a=0,c=m,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(d=a<2?m:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(d=i[t=a?t:"next"]){if(!(d=d.call(i,c)))throw TypeError("iterator result is not an object");if(!d.done)return d;c=d.value,a<2&&(a=0)}else 1===a&&(d=i.return)&&d.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=m}else if((d=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=m,a=1,c=t}finally{s=1}}return{value:d,done:l}}),!0),r;function y(t,r){for(a=t,c=r,d=0;!l&&s&&!e&&d<f.length;d++){var e,n=f[d],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=m):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function v(){}function o(){}function u(){}var d=Object.getPrototypeOf,t=[][r]?d(d([][r]())):(j(d={},r,function(){return this}),d),i=u.prototype=v.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,j(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return j(i,"constructor",o.prototype=u),j(u,"constructor",o),j(u,e,o.displayName="GeneratorFunction"),j(i),j(i,e,"Generator"),j(i,r,function(){return this}),j(i,"toString",function(){return"[object Generator]"}),(qr=function(){return{w:n,m:a}})()}function j(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(j=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){j(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function Br(t,r){this.v=t,this.k=r}function Ur(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function Kr(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){Ur(n,r,e,o,u,"next",t)}function u(t){Ur(n,r,e,o,u,"throw",t)}o(void 0)})}}var $r=(()=>{var e=Kr(Hr().mark(function t(r,e){var n,o,u;return Hr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:return n=t.sent,t.next=5,Tt();case 5:return o=t.sent,t.next=8,w();case 8:u=t.sent,e.render("pages/website/sepet/main.hbs",{title:"Sepet",scriptname:process.env.WEBSCRIPTNAME,scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',menus:n,eticSiteler:o,wpno:u.whatsappno,musteri:r.user});case 10:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),Vr=(()=>{var e=Kr(Hr().mark(function t(r,e){var n,o,u,i;return Hr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:return n=t.sent,t.next=5,Tt();case 5:return o=t.sent,t.next=8,w();case 8:u=t.sent,i=Dr(Dr({},r.user),{},{adres:JSON.parse(r.user.adres)}),e.render("pages/website/sepet/odeme.hbs",{title:"Ödeme",scriptname:process.env.WEBSCRIPTNAME,scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',menus:n,eticSiteler:o,wpno:u.whatsappno,musteri:i});case 11:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),Xr=(()=>{var e=Kr(Hr().mark(function t(r,e){var n,o,u,i;return Hr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:return n=t.sent,t.next=5,Tt();case 5:return o=t.sent,t.next=8,w();case 8:u=t.sent,i=Dr(Dr({},r.user),{},{adres:JSON.parse(r.user.adres)}),e.render("pages/website/sepet/siparis-bilgi.hbs",{title:"Sipariş Bilgi",scriptname:process.env.WEBSCRIPTNAME,scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',menus:n,eticSiteler:o,wpno:u.whatsappno,musteri:i});case 11:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})();var e=function(t,r,e){return t.isAuthenticated()?"musteri"===t.user.role?t.session.destroy(function(t){return r.redirect("/signin")}):void e():r.redirect("/signin")},Zr=function(t,r,e){if(t.isAuthenticated()&&"local"==t.user.role)return r.redirect("/ctrlpanel");e()},te=function(t,r){t.session.destroy(function(t){return r.json({ok:!0})})},re=function(t,r,e){return t.isAuthenticated()?"local"===t.user.role?t.session.destroy(function(t){return r.redirect("/login")}):void e():r.redirect("/login")},ee=function(t,r,e){if(t.isAuthenticated()&&"musteri"==t.user.role)return r.redirect("/");e()},ne=function(t,r){t.session.destroy(function(t){return r.json({ok:!0})})};function oe(t){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var ue=["id"],ie=["id"],ae=["id"];function ce(r,t){var e,n=Object.keys(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(r),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,e)),n}function se(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(o),!0).forEach(function(t){var r,e;r=n,e=o[t=t],(t=(t=>(t=((t,r)=>{if("object"!=oe(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);if("object"!=oe(e=e.call(t,r||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==oe(t)?t:t+""))(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):ce(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function fe(t,r){var e,n,o,u,i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(i)return o=!(n=!0),{s:function(){i=i.call(t)},n:function(){var t=i.next();return n=t.done,t},e:function(t){o=!0,e=t},f:function(){try{n||null==i.return||i.return()}finally{if(o)throw e}}};if(Array.isArray(t)||(i=((t,r)=>{var e;if(t)return"string"==typeof t?le(t,r):"Map"===(e="Object"===(e={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?le(t,r):void 0})(t))||r&&t&&"number"==typeof t.length)return i&&(t=i),u=0,{s:r=function(){},n:function(){return u>=t.length?{done:!0}:{done:!1,value:t[u++]}},e:function(t){throw t},f:r};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function le(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function pe(t,r){if(null==t)return{};var e,n=((t,r)=>{if(null==t)return{};var e,n={};for(e in t)if({}.hasOwnProperty.call(t,e)){if(-1!==r.indexOf(e))continue;n[e]=t[e]}return n})(t,r);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),u=0;u<o.length;u++)e=o[u],-1===r.indexOf(e)&&{}.propertyIsEnumerable.call(t,e)&&(n[e]=t[e]);return n}function p(){var o=he(),t=o.m(p),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,ye(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(p=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new ge(t,r)},AsyncIterator:de,async:function(t,r,e,n,o){return(u(r)?ve:be)(i(t),r,e,n,o)},keys:me,values:ye}})()}function ye(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(oe(t)+" is not iterable")}function me(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function be(t,r,e,n,o){var u=ve(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function ve(t,r,e,n,o){return new de(he().w(t,r,e,n),o||Promise)}function de(a,c){var o;this.next||(E(de.prototype),E(de.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),E(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof ge?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function he(){var m,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof v?r:v,r=Object.create(r.prototype);return E(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:m,a:y,f:y.bind(m,4),d:function(t,r){return i=t,a=0,c=m,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(d=a<2?m:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(d=i[t=a?t:"next"]){if(!(d=d.call(i,c)))throw TypeError("iterator result is not an object");if(!d.done)return d;c=d.value,a<2&&(a=0)}else 1===a&&(d=i.return)&&d.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=m}else if((d=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=m,a=1,c=t}finally{s=1}}return{value:d,done:l}}),!0),r;function y(t,r){for(a=t,c=r,d=0;!l&&s&&!e&&d<f.length;d++){var e,n=f[d],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=m):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function v(){}function o(){}function u(){}var d=Object.getPrototypeOf,t=[][r]?d(d([][r]())):(E(d={},r,function(){return this}),d),i=u.prototype=v.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,E(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return E(i,"constructor",o.prototype=u),E(u,"constructor",o),E(u,e,o.displayName="GeneratorFunction"),E(i),E(i,e,"Generator"),E(i,r,function(){return this}),E(i,"toString",function(){return"[object Generator]"}),(he=function(){return{w:n,m:a}})()}function E(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(E=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){E(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function ge(t,r){this.v=t,this.k=r}function we(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function o(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){we(n,r,e,o,u,"next",t)}function u(t){we(n,r,e,o,u,"throw",t)}o(void 0)})}}var u=r.Router({mergeParams:!0}),Oe=(()=>{var e=o(p().mark(function t(r,e){return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.render("pages/ctrlpanel/urun.hbs",{title:"Ürünler",scriptname:process.env.CTRLPANELSCRIPTNAME,styles:'<link rel="stylesheet" href="https://code.jquery.com/ui/1.14.1/themes/base/jquery-ui.css"> <link\n  href="https://cdn.jsdelivr.net/npm/quill@2/dist/quill.snow.css"\n  rel="stylesheet"\n/>\n<link\n  href="https://cdn.jsdelivr.net/npm/quill@2/dist/quill.bubble.css"\n  rel="stylesheet"\n/>',scripts:'  <script defer src="https://code.jquery.com/ui/1.14.1/jquery-ui.js"><\/script> \n    <script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script> \n    <script defer src="https://cdn.jsdelivr.net/npm/quill@2/dist/quill.js"><\/script>',user:r.user});case 1:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),xe=(()=>{var r=o(p().mark(function t(r){return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u.post("/ctrlpanel/kategori/add-item",e,(()=>{var e=o(p().mark(function t(r,e){var n;return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,d.Query("INSERT INTO `kategori` SET ?",[n]);case 5:return t.sent,t.abrupt("return",e.json({msg:"Ok!"}));case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),u.post("/ctrlpanel/kategori/update-item",e,(()=>{var e=o(p().mark(function t(r,e){var n,o,u;return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.id,(u=pe(n,ue)).parents=u.parents?JSON.stringify(u.parents):null,t.next=7,d.Query("UPDATE `kategori` SET ? where id = "+o,[u]);case 7:return t.sent,t.abrupt("return",e.json({msg:"Ok!"}));case 9:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),u.post("/ctrlpanel/kategori/get-all-items",(()=>{var e=o(p().mark(function t(r,e){var n;return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,d.Query("SELECT * FROM `kategori`");case 5:return n=t.sent,t.abrupt("return",e.json(n));case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),u.post("/ctrlpanel/kategori/delete-items",e,(()=>{var e=o(p().mark(function t(r,e){var n,o,u,i;return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.ids,t.next=6,d.Query("START TRANSACTION");case 6:u=0;case 7:if(u<o.length)return i=o[u],t.next=11,d.Query("DELETE FROM `kategori` WHERE id = "+i);t.next=14;break;case 11:u++,t.next=7;break;case 14:return t.next=16,d.Query("COMMIT");case 16:return t.abrupt("return",e.json({msg:"OK!"}));case 17:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),u.post("/ctrlpanel/urun/add-urun",e,(()=>{var e=o(p().mark(function t(r,e){var n;return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,d.Query("INSERT INTO `urun` SET ?",[n]);case 5:return t.abrupt("return",e.json({msg:"OK!"}));case 6:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),u.post("/ctrlpanel/urun/update-urun",e,(()=>{var e=o(p().mark(function t(r,e){var n,o,u;return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.id,u=pe(n,ie),t.next=6,d.Query("UPDATE `urun` SET ? WHERE id ="+o,[u]);case 6:return t.abrupt("return",e.json({msg:"OK!"}));case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),u.post("/ctrlpanel/urun/delete-urun-from-kategori",e,(()=>{var e=o(p().mark(function t(r,e){var n,o,u,i,a,c,s,f,l;return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.ids,t.next=6,d.Query("START TRANSACTION");case 6:return t.next=8,d.Query("SELECT id,resimler FROM `urun` WHERE JSON_CONTAINS(parents,?,'$')",[[o]]);case 8:u=t.sent,i=0;case 10:if(!(i<u.length)){t.next=19;break}for(a=u[i].id,c=u[i].resimler?JSON.parse(u[i].resimler):[],s=0;s<c.length;s++)f="/uploads"+c[s],l=f.split("/").pop(),f=f.replace(l,""),l=process.cwd()+"/public"+f,(0,H.existsSync)(l)&&(0,H.rmdirSync)(l,{recursive:!0});return t.next=16,d.Query("DELETE FROM `urun` WHERE id = "+a);case 16:i++,t.next=10;break;case 19:return t.next=21,d.Query("COMMIT");case 21:return t.abrupt("return",e.json({msg:"OK!"}));case 22:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),u.post("/ctrlpanel/urun/delete-urun",e,(()=>{var e=o(p().mark(function t(r,e){var n,o;return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.id,t.next=6,d.Query("DELETE FROM `urun` WHERE id ="+o);case 6:return t.abrupt("return",e.json({msg:"OK!"}));case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),u.post("/ctrlpanel/urun/get-urunler",(()=>{var e=o(p().mark(function t(r,e){var n,o;return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=(o=n.kategori_ids).replace(/[\[\]]/g,""),t.next=7,d.Query("SELECT * FROM `urun` WHERE `parents` LIKE  '%"+o+"%'");case 7:return o=t.sent,t.abrupt("return",e.json(o));case 9:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),u.post("/ctrlpanel/urun/get-urun-resimler",(()=>{var e=o(p().mark(function t(r,e){var n,o;return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.id,t.next=6,d.Query("SELECT resimler FROM `urun` WHERE id = ?",[o]);case 6:return o=t.sent,t.abrupt("return",e.json(o[0].resimler));case 8:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),u.post("/ctrlpanel/urun/get-urun",(()=>{var e=o(p().mark(function t(r,e){var n,o;return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.id,t.next=6,d.Query("SELECT * FROM `urun` WHERE id = ?",[o]);case 6:return o=t.sent,t.abrupt("return",e.json(o[0]));case 8:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),u.get("/ctrlpanel/urunler",e,Oe),u.post("/urun/update-urun-goruntu",(()=>{var e=o(p().mark(function t(r,e){var n,o,u;return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.id,u=pe(n,ae),t.next=6,d.Query("UPDATE `urun` SET ? WHERE id = "+o,[u]);case 6:return t.abrupt("return",e.json({msg:"Ok!"}));case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),u.post("/urun/update-stok",e,(()=>{var e=o(p().mark(function t(r,e){var n,o,u,i;return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.id,u=n.alinan,t.next=6,d.Query("SELECT alinan,stok_dusme_durum FROM `urun` WHERE id = "+o);case 6:if(i=t.sent,"düşürülmedi"==i[0].stok_dusme_durum)return u=parseInt(u)+i[0].alinan,t.next=13,d.Query("UPDATE `urun` SET `alinan` = ?,`stok_dusme_durum` = ? WHERE id = "+o,[u,"düşürüldü"]);t.next=13;break;case 13:return t.abrupt("return",e.json({msg:"Ok!"}));case 14:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),u.post("/ctrlpanel/urun/insert-multiple-urun",(()=>{var e=o(p().mark(function t(r,e){var n,o,u,i;return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.arrayData,t.next=6,d.Query("START TRANSACTION");case 6:t.sent,u=fe(o),t.prev=8,u.s();case 10:if((i=u.n()).done){t.next=16;break}return i=i.value,t.next=14,d.Query("INSERT INTO `urun` set ?",[se({},i)]);case 14:t.next=10;break;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(8),u.e(t.t0);case 21:return t.prev=21,u.f(),t.finish(21);case 24:return t.next=26,d.Query("COMMIT");case 26:return t.sent,t.abrupt("return",e.json({status:!0,msg:"Ok!"}));case 28:case"end":return t.stop()}},t,null,[[8,18,21,24]])}));return function(t,r){return e.apply(this,arguments)}})()),t.abrupt("return",r.use("/",u));case 16:case"end":return t.stop()}},t)}));return function(t){return r.apply(this,arguments)}})();function Se(t){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var ke=["id"];function je(t,r){if(null==t)return{};var e,n=((t,r)=>{if(null==t)return{};var e,n={};for(e in t)if({}.hasOwnProperty.call(t,e)){if(-1!==r.indexOf(e))continue;n[e]=t[e]}return n})(t,r);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),u=0;u<o.length;u++)e=o[u],-1===r.indexOf(e)&&{}.propertyIsEnumerable.call(t,e)&&(n[e]=t[e]);return n}function Ee(){var o=Ae(),t=o.m(Ee),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,Pe(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(Ee=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new Re(t,r)},AsyncIterator:Ie,async:function(t,r,e,n,o){return(u(r)?Ne:_e)(i(t),r,e,n,o)},keys:Te,values:Pe}})()}function Pe(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(Se(t)+" is not iterable")}function Te(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function _e(t,r,e,n,o){var u=Ne(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function Ne(t,r,e,n,o){return new Ie(Ae().w(t,r,e,n),o||Promise)}function Ie(a,c){var o;this.next||(P(Ie.prototype),P(Ie.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),P(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof Re?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function Ae(){var m,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof v?r:v,r=Object.create(r.prototype);return P(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:m,a:y,f:y.bind(m,4),d:function(t,r){return i=t,a=0,c=m,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(d=a<2?m:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(d=i[t=a?t:"next"]){if(!(d=d.call(i,c)))throw TypeError("iterator result is not an object");if(!d.done)return d;c=d.value,a<2&&(a=0)}else 1===a&&(d=i.return)&&d.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=m}else if((d=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=m,a=1,c=t}finally{s=1}}return{value:d,done:l}}),!0),r;function y(t,r){for(a=t,c=r,d=0;!l&&s&&!e&&d<f.length;d++){var e,n=f[d],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=m):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function v(){}function o(){}function u(){}var d=Object.getPrototypeOf,t=[][r]?d(d([][r]())):(P(d={},r,function(){return this}),d),i=u.prototype=v.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,P(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return P(i,"constructor",o.prototype=u),P(u,"constructor",o),P(u,e,o.displayName="GeneratorFunction"),P(i),P(i,e,"Generator"),P(i,r,function(){return this}),P(i,"toString",function(){return"[object Generator]"}),(Ae=function(){return{w:n,m:a}})()}function P(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(P=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){P(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function Re(t,r){this.v=t,this.k=r}function Fe(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function Le(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){Fe(n,r,e,o,u,"next",t)}function u(t){Fe(n,r,e,o,u,"throw",t)}o(void 0)})}}var Ge=r.Router({mergeParams:!0}),Ce=(()=>{var e=Le(Ee().mark(function t(r,e){return Ee().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.render("pages/ctrlpanel/slaytlar.hbs",{title:"Slaytlar",scriptname:process.env.CTRLPANELSCRIPTNAME,styles:'<link rel="stylesheet" href="https://code.jquery.com/ui/1.14.1/themes/base/jquery-ui.css">',scripts:'  <script defer src="https://code.jquery.com/ui/1.14.1/jquery-ui.js"><\/script> \n    <script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',user:r.user});case 1:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),Me=function(t){return Ge.post("/ctrlpanel/slaytlar/add-item",e,(()=>{var e=Le(Ee().mark(function t(r,e){var n;return Ee().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,d.Query("INSERT INTO `slayt` SET ?",[n]);case 5:return t.sent,t.abrupt("return",e.json({msg:"Ok!"}));case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),Ge.post("/ctrlpanel/slaytlar/delete-item",e,(()=>{var e=Le(Ee().mark(function t(r,e){var n,o;return Ee().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.id,t.next=6,d.Query("DELETE FROM `slayt` WHERE id ="+o);case 6:return t.abrupt("return",e.json({msg:"OK!"}));case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),Ge.post("/ctrlpanel/slaytlar/get-items",(()=>{var e=Le(Ee().mark(function t(r,e){var n,o;return Ee().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.tur,t.next=6,d.Query("SELECT * FROM `slayt` WHERE tur = ? ORDER BY sira ASC ",[o]);case 6:return o=t.sent,t.abrupt("return",e.json(o));case 8:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),Ge.post("/ctrlpanel/slaytlar/update-item",e,(()=>{var e=Le(Ee().mark(function t(r,e){var n,o,u;return Ee().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.id,u=je(n,ke),t.next=6,d.Query("UPDATE `slayt` SET ?  WHERE id = "+o,[u]);case 6:return t.abrupt("return",e.json({msg:"Ok!"}));case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),Ge.get("/ctrlpanel/slaytlar",e,Ce),t.use("/",Ge)};function De(t){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var He=["siparis_id"],Qe=["siparis_id"];function We(t,r){if(null==t)return{};var e,n=((t,r)=>{if(null==t)return{};var e,n={};for(e in t)if({}.hasOwnProperty.call(t,e)){if(-1!==r.indexOf(e))continue;n[e]=t[e]}return n})(t,r);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),u=0;u<o.length;u++)e=o[u],-1===r.indexOf(e)&&{}.propertyIsEnumerable.call(t,e)&&(n[e]=t[e]);return n}function Je(){var o=Ke(),t=o.m(Je),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,ze(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(Je=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new $e(t,r)},AsyncIterator:Ue,async:function(t,r,e,n,o){return(u(r)?Be:qe)(i(t),r,e,n,o)},keys:Ye,values:ze}})()}function ze(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(De(t)+" is not iterable")}function Ye(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function qe(t,r,e,n,o){var u=Be(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function Be(t,r,e,n,o){return new Ue(Ke().w(t,r,e,n),o||Promise)}function Ue(a,c){var o;this.next||(T(Ue.prototype),T(Ue.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),T(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof $e?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function Ke(){var m,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof v?r:v,r=Object.create(r.prototype);return T(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:m,a:y,f:y.bind(m,4),d:function(t,r){return i=t,a=0,c=m,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(d=a<2?m:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(d=i[t=a?t:"next"]){if(!(d=d.call(i,c)))throw TypeError("iterator result is not an object");if(!d.done)return d;c=d.value,a<2&&(a=0)}else 1===a&&(d=i.return)&&d.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=m}else if((d=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=m,a=1,c=t}finally{s=1}}return{value:d,done:l}}),!0),r;function y(t,r){for(a=t,c=r,d=0;!l&&s&&!e&&d<f.length;d++){var e,n=f[d],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=m):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function v(){}function o(){}function u(){}var d=Object.getPrototypeOf,t=[][r]?d(d([][r]())):(T(d={},r,function(){return this}),d),i=u.prototype=v.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,T(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return T(i,"constructor",o.prototype=u),T(u,"constructor",o),T(u,e,o.displayName="GeneratorFunction"),T(i),T(i,e,"Generator"),T(i,r,function(){return this}),T(i,"toString",function(){return"[object Generator]"}),(Ke=function(){return{w:n,m:a}})()}function T(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(T=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){T(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function $e(t,r){this.v=t,this.k=r}function Ve(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function Xe(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){Ve(n,r,e,o,u,"next",t)}function u(t){Ve(n,r,e,o,u,"throw",t)}o(void 0)})}}var Ze=r.Router({mergeParams:!0}),tn=(()=>{var e=Xe(Je().mark(function t(r,e){return Je().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.render("pages/ctrlpanel/siparisler.hbs",{title:"Siparişler",scriptname:process.env.CTRLPANELSCRIPTNAME,styles:"",scripts:'  <script defer src="https://code.jquery.com/ui/1.14.1/jquery-ui.js"><\/script> \n    <script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',user:r.user});case 1:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),rn=function(t){return Ze.get("/ctrlpanel/siparisler",e,tn),Ze.post("/ctrlpanel/siparisler/get-all",(()=>{var e=Xe(Je().mark(function t(r,e){var n;return Je().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.Query("SELECT * FROM `siparis`");case 2:return n=t.sent,console.log(n),t.abrupt("return",e.json(n));case 5:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),Ze.post("/ctrlpanel/siparisler/update",e,(()=>{var e=Xe(Je().mark(function t(r,e){var n,o;return Je().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return");case 2:return o=r.body,n=o.siparis_id,o=We(o,He),t.next=5,d.Query("UPDATE `siparis` SET ? WHERE id = "+n,[o]);case 5:return t.sent,t.abrupt("return",e.json({msg:"OK!"}));case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),Ze.post("/ctrlpanel/siparisler/update-iade",re,(()=>{var e=Xe(Je().mark(function t(r,e){var n,o;return Je().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return");case 2:return n=r.body,o=n.siparis_id,n=We(n,Qe),console.log(r.body),t.next=6,d.Query("UPDATE `siparis` SET ? WHERE paymentId = "+o,[n]);case 6:return o=t.sent,console.log(o),t.abrupt("return",e.json({msg:"OK!"}));case 9:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),t.use("/",Ze)};function en(t){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var nn=["id"];function on(t,r){if(null==t)return{};var e,n=((t,r)=>{if(null==t)return{};var e,n={};for(e in t)if({}.hasOwnProperty.call(t,e)){if(-1!==r.indexOf(e))continue;n[e]=t[e]}return n})(t,r);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),u=0;u<o.length;u++)e=o[u],-1===r.indexOf(e)&&{}.propertyIsEnumerable.call(t,e)&&(n[e]=t[e]);return n}function un(){var o=pn(),t=o.m(un),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,an(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(un=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new yn(t,r)},AsyncIterator:ln,async:function(t,r,e,n,o){return(u(r)?fn:sn)(i(t),r,e,n,o)},keys:cn,values:an}})()}function an(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(en(t)+" is not iterable")}function cn(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function sn(t,r,e,n,o){var u=fn(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function fn(t,r,e,n,o){return new ln(pn().w(t,r,e,n),o||Promise)}function ln(a,c){var o;this.next||(_(ln.prototype),_(ln.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),_(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof yn?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function pn(){var m,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof v?r:v,r=Object.create(r.prototype);return _(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:m,a:y,f:y.bind(m,4),d:function(t,r){return i=t,a=0,c=m,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(d=a<2?m:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(d=i[t=a?t:"next"]){if(!(d=d.call(i,c)))throw TypeError("iterator result is not an object");if(!d.done)return d;c=d.value,a<2&&(a=0)}else 1===a&&(d=i.return)&&d.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=m}else if((d=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=m,a=1,c=t}finally{s=1}}return{value:d,done:l}}),!0),r;function y(t,r){for(a=t,c=r,d=0;!l&&s&&!e&&d<f.length;d++){var e,n=f[d],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=m):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function v(){}function o(){}function u(){}var d=Object.getPrototypeOf,t=[][r]?d(d([][r]())):(_(d={},r,function(){return this}),d),i=u.prototype=v.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,_(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return _(i,"constructor",o.prototype=u),_(u,"constructor",o),_(u,e,o.displayName="GeneratorFunction"),_(i),_(i,e,"Generator"),_(i,r,function(){return this}),_(i,"toString",function(){return"[object Generator]"}),(pn=function(){return{w:n,m:a}})()}function _(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(_=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){_(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function yn(t,r){this.v=t,this.k=r}function mn(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function bn(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){mn(n,r,e,o,u,"next",t)}function u(t){mn(n,r,e,o,u,"throw",t)}o(void 0)})}}var vn=r.Router({mergeParams:!0}),dn=function(t){return vn.get("/ctrlpanel/etic-siteler",e,function(t,r){return r.render("pages/ctrlpanel/eticaret.hbs",{title:"Eticaret Siteler",scriptname:process.env.CTRLPANELSCRIPTNAME,styles:"",scripts:'  <script defer src="https://code.jquery.com/ui/1.14.1/jquery-ui.js"><\/script> \n    <script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',user:t.user})}),vn.post("/get-esites",(()=>{var e=bn(un().mark(function t(r,e){var n;return un().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return",e.send("Hata!!"));case 2:return t.next=4,d.Query("SELECT * FROM `eticsites`");case 4:return n=t.sent,t.abrupt("return",e.json(n));case 6:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),vn.post("/ctrlpanel/add-esite",e,(()=>{var e=bn(un().mark(function t(r,e){return un().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return",e.send("Hata!!"));case 2:return t.next=4,d.Query("INSERT INTO `eticsites` SET ?",[r.body]);case 4:return t.abrupt("return",e.json({msg:"OK!"}));case 5:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),vn.post("/ctrlpanel/update-esite",e,(()=>{var e=bn(un().mark(function t(r,e){var n,o;return un().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return",e.send("Hata!!"));case 2:return o=r.body,n=o.id,o=on(o,nn),t.next=5,d.Query("UPDATE `eticsites` SET ? WHERE id = "+n,[o]);case 5:return t.abrupt("return",e.json({msg:"OK!"}));case 6:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),vn.post("/ctrlpanel/delete-esite",e,(()=>{var e=bn(un().mark(function t(r,e){var n;return un().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return",e.send("Hata!!"));case 2:return n=r.body.id,t.next=5,d.Query("DELETE FROM `eticsites` WHERE id = "+n);case 5:return t.abrupt("return",e.json({msg:"OK!"}));case 6:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),t.use("/",vn)};function hn(t){return(hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gn(t,r){return(t=>{if(Array.isArray(t))return t})(t)||((t,r)=>{var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,u,i,a=[],c=!0,s=!1;try{if(u=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;c=!1}else for(;!(c=(n=u.call(e)).done)&&(a.push(n.value),a.length!==r);c=!0);}catch(t){s=!0,o=t}finally{try{if(!c&&null!=e.return&&(i=e.return(),Object(i)!==i))return}finally{if(s)throw o}}return a}})(t,r)||((t,r)=>{var e;if(t)return"string"==typeof t?wn(t,r):"Map"===(e="Object"===(e={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?wn(t,r):void 0})(t,r)||(()=>{throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function wn(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function On(){var o=Pn(),t=o.m(On),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,xn(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(On=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new Tn(t,r)},AsyncIterator:En,async:function(t,r,e,n,o){return(u(r)?jn:kn)(i(t),r,e,n,o)},keys:Sn,values:xn}})()}function xn(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(hn(t)+" is not iterable")}function Sn(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function kn(t,r,e,n,o){var u=jn(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function jn(t,r,e,n,o){return new En(Pn().w(t,r,e,n),o||Promise)}function En(a,c){var o;this.next||(N(En.prototype),N(En.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),N(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof Tn?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function Pn(){var m,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof v?r:v,r=Object.create(r.prototype);return N(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:m,a:y,f:y.bind(m,4),d:function(t,r){return i=t,a=0,c=m,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(d=a<2?m:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(d=i[t=a?t:"next"]){if(!(d=d.call(i,c)))throw TypeError("iterator result is not an object");if(!d.done)return d;c=d.value,a<2&&(a=0)}else 1===a&&(d=i.return)&&d.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=m}else if((d=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=m,a=1,c=t}finally{s=1}}return{value:d,done:l}}),!0),r;function y(t,r){for(a=t,c=r,d=0;!l&&s&&!e&&d<f.length;d++){var e,n=f[d],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=m):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function v(){}function o(){}function u(){}var d=Object.getPrototypeOf,t=[][r]?d(d([][r]())):(N(d={},r,function(){return this}),d),i=u.prototype=v.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,N(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return N(i,"constructor",o.prototype=u),N(u,"constructor",o),N(u,e,o.displayName="GeneratorFunction"),N(i),N(i,e,"Generator"),N(i,r,function(){return this}),N(i,"toString",function(){return"[object Generator]"}),(Pn=function(){return{w:n,m:a}})()}function N(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(N=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){N(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function Tn(t,r){this.v=t,this.k=r}function _n(r,t){var e,n=Object.keys(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(r),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,e)),n}function Nn(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?_n(Object(o),!0).forEach(function(t){var r,e;r=n,e=o[t=t],(t=(t=>(t=((t,r)=>{if("object"!=hn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);if("object"!=hn(e=e.call(t,r||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==hn(t)?t:t+""))(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):_n(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function In(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function An(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){In(n,r,e,o,u,"next",t)}function u(t){In(n,r,e,o,u,"throw",t)}o(void 0)})}}function Rn(t,r){for(t=t.toString();t.length<r;)t="0"+t;return t}var Fn=(()=>{var e=An(On().mark(function t(r,e){var n,o,u,i,a,c,s,f,l,p,y,m,b,v;return On().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:return n=t.sent,t.next=5,Tt();case 5:return o=t.sent,t.next=8,w();case 8:if(u=t.sent,c=r.query,i=Nn(Nn({},r.user),{},{adres:JSON.parse(r.user.adres)}),a={title:"Siparişler",scriptname:process.env.WEBSCRIPTNAME,scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',menus:n,eticSiteler:o,wpno:u.whatsappno,musteri:i},c&&c.crp)return t.next=15,Pt([c.crp]);t.next=26;break;case 15:for(c=t.sent,s=gn(c,1),s=s[0],f="",l=JSON.parse(s.basketItems),p=0;p<l.length;p++)y=l[p],f+="".concat(y.adet," x ").concat(y.name,"\n\r");return m=JSON.parse(s.billingAddress).address,b=JSON.parse(s.shippingAddress).address,v=new Date(parseInt(s.systemTime)),v="".concat(Rn(v.getDate(),2),".").concat(Rn(v.getMonth()-1,2),".").concat(v.getFullYear()," ").concat(Rn(v.getHours(),2),":").concat(Rn(v.getMinutes())),t.abrupt("return",e.render("pages/website/siparis/main query.hbs",Nn(Nn({},a),{},{siparis:s,tarih:v,shippingAddress:b,billingAddress:m,urunlerStr:f,wpno:u.whatsappno,musteri:i})));case 26:return t.abrupt("return",e.render("pages/website/siparis/main.hbs",a));case 27:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})();function Ln(t){return(Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gn(){var o=Wn(),t=o.m(Gn),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,Cn(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(Gn=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new Jn(t,r)},AsyncIterator:Qn,async:function(t,r,e,n,o){return(u(r)?Hn:Dn)(i(t),r,e,n,o)},keys:Mn,values:Cn}})()}function Cn(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(Ln(t)+" is not iterable")}function Mn(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Dn(t,r,e,n,o){var u=Hn(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function Hn(t,r,e,n,o){return new Qn(Wn().w(t,r,e,n),o||Promise)}function Qn(a,c){var o;this.next||(I(Qn.prototype),I(Qn.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),I(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof Jn?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function Wn(){var m,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof v?r:v,r=Object.create(r.prototype);return I(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:m,a:y,f:y.bind(m,4),d:function(t,r){return i=t,a=0,c=m,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(d=a<2?m:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(d=i[t=a?t:"next"]){if(!(d=d.call(i,c)))throw TypeError("iterator result is not an object");if(!d.done)return d;c=d.value,a<2&&(a=0)}else 1===a&&(d=i.return)&&d.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=m}else if((d=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=m,a=1,c=t}finally{s=1}}return{value:d,done:l}}),!0),r;function y(t,r){for(a=t,c=r,d=0;!l&&s&&!e&&d<f.length;d++){var e,n=f[d],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=m):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function v(){}function o(){}function u(){}var d=Object.getPrototypeOf,t=[][r]?d(d([][r]())):(I(d={},r,function(){return this}),d),i=u.prototype=v.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,I(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return I(i,"constructor",o.prototype=u),I(u,"constructor",o),I(u,e,o.displayName="GeneratorFunction"),I(i),I(i,e,"Generator"),I(i,r,function(){return this}),I(i,"toString",function(){return"[object Generator]"}),(Wn=function(){return{w:n,m:a}})()}function I(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(I=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){I(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function Jn(t,r){this.v=t,this.k=r}function zn(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}var Yn=(()=>{a=Gn().mark(function t(r,e){var n,o,u;return Gn().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:return n=t.sent,t.next=5,Tt();case 5:return o=t.sent,t.next=8,w();case 8:u=t.sent,e.render("pages/website/favori/main.hbs",{title:"Favoriler",scriptname:process.env.WEBSCRIPTNAME,scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',menus:n,eticSiteler:o,wpno:u.whatsappno,musteri:r.user});case 10:case"end":return t.stop()}},t)});var a,e=function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){zn(n,r,e,o,u,"next",t)}function u(t){zn(n,r,e,o,u,"throw",t)}o(void 0)})};return function(t,r){return e.apply(this,arguments)}})();function qn(t){return(qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bn(r,t){var e,n=Object.keys(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(r),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,e)),n}function Un(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Bn(Object(o),!0).forEach(function(t){var r,e;r=n,e=o[t=t],(t=(t=>(t=((t,r)=>{if("object"!=qn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);if("object"!=qn(e=e.call(t,r||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==qn(t)?t:t+""))(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Bn(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function s(){var o=to(),t=o.m(s),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,Kn(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(s=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new ro(t,r)},AsyncIterator:Zn,async:function(t,r,e,n,o){return(u(r)?Xn:Vn)(i(t),r,e,n,o)},keys:$n,values:Kn}})()}function Kn(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(qn(t)+" is not iterable")}function $n(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Vn(t,r,e,n,o){var u=Xn(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function Xn(t,r,e,n,o){return new Zn(to().w(t,r,e,n),o||Promise)}function Zn(a,c){var o;this.next||(A(Zn.prototype),A(Zn.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),A(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof ro?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function to(){var m,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof v?r:v,r=Object.create(r.prototype);return A(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:m,a:y,f:y.bind(m,4),d:function(t,r){return i=t,a=0,c=m,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(d=a<2?m:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(d=i[t=a?t:"next"]){if(!(d=d.call(i,c)))throw TypeError("iterator result is not an object");if(!d.done)return d;c=d.value,a<2&&(a=0)}else 1===a&&(d=i.return)&&d.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=m}else if((d=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=m,a=1,c=t}finally{s=1}}return{value:d,done:l}}),!0),r;function y(t,r){for(a=t,c=r,d=0;!l&&s&&!e&&d<f.length;d++){var e,n=f[d],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=m):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function v(){}function o(){}function u(){}var d=Object.getPrototypeOf,t=[][r]?d(d([][r]())):(A(d={},r,function(){return this}),d),i=u.prototype=v.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,A(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return A(i,"constructor",o.prototype=u),A(u,"constructor",o),A(u,e,o.displayName="GeneratorFunction"),A(i),A(i,e,"Generator"),A(i,r,function(){return this}),A(i,"toString",function(){return"[object Generator]"}),(to=function(){return{w:n,m:a}})()}function A(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(A=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){A(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function ro(t,r){this.v=t,this.k=r}function eo(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function no(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){eo(n,r,e,o,u,"next",t)}function u(t){eo(n,r,e,o,u,"throw",t)}o(void 0)})}}var oo=r.Router({mergeParams:!0}),uo=(()=>{var e=no(s().mark(function t(r,e){return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.render("pages/ctrlpanel/rapor-urunler.hbs",{title:"Ürün Listesi",scriptname:process.env.CTRLPANELSCRIPTNAME,styles:"",scripts:'  <script defer src="https://code.jquery.com/ui/1.14.1/jquery-ui.js"><\/script> \n    <script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',user:r.user});case 1:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),io=(()=>{var e=no(s().mark(function t(r,e){var n;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return",e.json([]));case 2:return t.prev=2,t.next=5,so();case 5:return n=t.sent,t.abrupt("return",e.json(n));case 9:return t.prev=9,t.t0=t.catch(2),console.error(t.t0),t.abrupt("return",e.json(t.t0));case 13:case"end":return t.stop()}},t,null,[[2,9]])}));return function(t,r){return e.apply(this,arguments)}})(),ao=(()=>{var e=no(s().mark(function t(r,e){var n,o,u,i,a,c;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return",e.json([]));case 2:for(n=(n=r.body.urunler).map(function(t){return Un(Un({},t),{},{kategoristr:t.kategoristr.replaceAll("<br>",",")})}),o=process.cwd()+"/public/uploads/raporlar/urun-raporlar/",(0,H.existsSync)(o)||(0,H.mkdirSync)(o,{recursive:!0}),u="\ufeffNo;ÜrünKodu;Ürün Adı;Kategorler;İndirim(%);Fiyat(₺);İndirimli Fiyat(₺);Kdv(%);Beğenilme;Görüntülenme;Stok;Kalan\n",i=0;i<n.length;i++)a=n[i],a="".concat(i+1,";").concat(a.kod,";").concat(a.name,';"').concat(a.kategoristr,'";').concat(a.indirim,";").concat(a.fiyat,";").concat(a.indirimli_fiyat,";").concat(a.kdv,";").concat(a.begenilme,";").concat(a.goruntulenme,";").concat(a.stok,";").concat(a.kalan,"\n"),u+=a;return c="rapor_"+(new Date).getTime()+".csv",(0,H.writeFileSync)(o+c,u,{encoding:"utf-8"}),t.abrupt("return",e.json({url:"/uploads/raporlar/urun-raporlar/"+c,filename:c}));case 11:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),co=(()=>{var r=no(s().mark(function t(r){return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return oo.get("/ctrlpanel/rapor-urunler",e,uo),oo.post("/ctrlpanel/rapor-urunler",e,io),oo.post("/ctrlpanel/rapor-exportcsv",e,ao),oo.post("/ctrlpanel/rapor-deletecsv",e,function(t,r){return t.body?(t=t.body.url,(0,H.unlinkSync)(process.cwd()+"/public"+t),r.json({status:!0,msg:"Ok!"})):r.json({status:!1,msg:"Failure"})}),t.abrupt("return",r.use("/",oo));case 5:case"end":return t.stop()}},t)}));return function(t){return r.apply(this,arguments)}})(),so=(()=>{var t=no(s().mark(function t(){var r,e,n,o;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.Query("SELECT * from `urun`");case 2:if(!(r=t.sent)){t.next=9;break}for(r=(r=r.sort(function(t,r){return t.name||console.error(t),t.name&&r.name&&t.name<r.name?-1:1})).map(function(t){return Un(Un({},t),{},{kalan:t.stok-t.alinan,resimler:JSON.parse(t.resimler),parents:JSON.parse(t.parents)})}),e=[],n=0;n<r.length;n++)o=r[n],e.push(fo(o));return t.abrupt("return",Promise.all(e));case 9:return t.abrupt("return",[]);case 10:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}})(),fo=(()=>{var r=no(s().mark(function t(r){var e,n,o,u,i,a,c;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e=[],n="",o=0;o<r.parents.length;o++)u=r.parents[o],e.push(lo(u));return t.next=5,Promise.all(e);case 5:for(i=t.sent,a=0;a<i.length;a++)(c=i[a])&&(n+=c+"<br>");return t.abrupt("return",Un(Un({},r),{},{kategoristr:n}));case 8:case"end":return t.stop()}},t)}));return function(t){return r.apply(this,arguments)}})(),lo=(()=>{var r=no(s().mark(function t(r){var e;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.Query("SELECT * from `kategori` WHERE id = ?",[r]);case 2:if((e=t.sent)&&0<e.length)return t.abrupt("return",e[0].name);t.next=5;break;case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}},t)}));return function(t){return r.apply(this,arguments)}})();let po=require("node:crypto");function yo(t){return(0,po.scryptSync)(t,vo,64).toString("hex")}function mo(t,r){return(0,po.scryptSync)(t,vo,64).toString("hex")===r}function bo(t){for(var r="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=e.length,o=0;o<t;o++)r+=e.charAt(Math.floor(Math.random()*n));return r}var vo="syldisr?*fe";let ho=require("nodemailer");function go(t){return(go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wo(){var o=Eo(),t=o.m(wo),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,Oo(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(wo=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new Po(t,r)},AsyncIterator:jo,async:function(t,r,e,n,o){return(u(r)?ko:So)(i(t),r,e,n,o)},keys:xo,values:Oo}})()}function Oo(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(go(t)+" is not iterable")}function xo(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function So(t,r,e,n,o){var u=ko(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function ko(t,r,e,n,o){return new jo(Eo().w(t,r,e,n),o||Promise)}function jo(a,c){var o;this.next||(R(jo.prototype),R(jo.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),R(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof Po?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function Eo(){var m,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof v?r:v,r=Object.create(r.prototype);return R(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:m,a:y,f:y.bind(m,4),d:function(t,r){return i=t,a=0,c=m,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(d=a<2?m:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(d=i[t=a?t:"next"]){if(!(d=d.call(i,c)))throw TypeError("iterator result is not an object");if(!d.done)return d;c=d.value,a<2&&(a=0)}else 1===a&&(d=i.return)&&d.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=m}else if((d=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=m,a=1,c=t}finally{s=1}}return{value:d,done:l}}),!0),r;function y(t,r){for(a=t,c=r,d=0;!l&&s&&!e&&d<f.length;d++){var e,n=f[d],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=m):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function v(){}function o(){}function u(){}var d=Object.getPrototypeOf,t=[][r]?d(d([][r]())):(R(d={},r,function(){return this}),d),i=u.prototype=v.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,R(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return R(i,"constructor",o.prototype=u),R(u,"constructor",o),R(u,e,o.displayName="GeneratorFunction"),R(i),R(i,e,"Generator"),R(i,r,function(){return this}),R(i,"toString",function(){return"[object Generator]"}),(Eo=function(){return{w:n,m:a}})()}function R(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(R=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){R(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function Po(t,r){this.v=t,this.k=r}function To(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function _o(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){To(n,r,e,o,u,"next",t)}function u(t){To(n,r,e,o,u,"throw",t)}o(void 0)})}}function No(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Io(n.key),n)}}function Io(t){t=((t,r)=>{if("object"!=go(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);if("object"!=go(e=e.call(t,r||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string");return"symbol"==go(t)?t:t+""}r.Router({mergeParams:!0});var Ao=(()=>{function n(){var t,r,e;if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");t=this,e=void 0,(r=Io(r="trans"))in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,this.trans=(0,ho.createTransport)({service:"Gmail",host:"smtp.gmail.com",port:465,secure:!0,auth:{user:"soyluistif@gmail.com",pass:"xlyr fbro duba byen"}})}return t=n,(r=[{key:"sendMail",value:(o=_o(wo().mark(function t(r){var e,n;return wo().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.to,n=r.text,e={from:'"Soyluistif Makinaları" <soyluistif@gmail.com>',to:e,subject:r.subject,html:r.html,text:n},t.next=4,this.trans.sendMail(e);case 4:return n=t.sent,t.abrupt("return",n);case 6:case"end":return t.stop()}},t,this)})),function(t){return o.apply(this,arguments)})}])&&No(t.prototype,r),e&&No(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,e,o})(),Ro=(()=>{var n=_o(wo().mark(function t(r,e,n){var o;return wo().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o=new Ao,t.next=4,o.sendMail({to:n,subject:"Aktivasyon işlemi | Soyluistif Makinaları",text:"",html:'<div style="padding:40px 10px;text-align:center;">\n    <div><strong>Aktivasyon işlemi için lütfen alttaki linke gidiniz</strong></div>\n     <div style="text-align:center;font-size:16px;">\n        <a href="'.concat(C,"/cust/activation?urn=").concat(e,"&cdn=").concat(r,'" target="_blank"\n            style="text-decoration:underline;color:blue">Aktivasyon yap</a>\n    </div>\n    <div style="padding:5px 10px; background-color:rgba(0,0,0,0.2); font-weight:700;font-size:24px;">').concat(r,"</div>\n    <div>Lütfen yukarıdaki linkten aktivasyon yapabilirsiniz</div>\n</div>")});case 4:return t.sent,t.abrupt("return","Sended");case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}));return function(t,r,e){return n.apply(this,arguments)}})(),Fo=(()=>{var n=_o(wo().mark(function t(r,e,n){var o;return wo().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o=new Ao,t.next=4,o.sendMail({to:n,subject:"Aktivasyon işlemi | Soyluistif Makinaları",text:"",html:'<div style="padding:40px 10px;text-align:center;">\n    <div><strong style="font-size:18px">Şifre değişiklik işlemi için lütfen alttaki linke gidiniz</strong></div>\n     <div style="text-align:center;font-size:16px;">\n        <a href="'.concat(C,"/cust/chngepassw?urn=").concat(e,"&cdn=").concat(r,'" target="_blank"\n            style="text-decoration:underline;color:blue">Şifre Değişikliğe Git</a>\n    </div>\n    <div style="text-align:center">\n        <div style="padding:10px;border-radius:5px; background-color:rgba(0,0,0,0.2); font-weight:700; font-size:24px;">').concat(r,"</div>\n    </div>\n   \n    <div>Lütfen yukarıdaki linkten şifre değiştirebilirsiniz ulaşabilirsiniz!</div>\n</div>")});case 4:return t.sent,t.abrupt("return","Sended");case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}));return function(t,r,e){return n.apply(this,arguments)}})();function Lo(t){return(Lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Go=["newpassw1","newpassw2"];function Co(r,t){var e,n=Object.keys(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(r),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,e)),n}function Mo(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Co(Object(o),!0).forEach(function(t){var r,e;r=n,e=o[t=t],(t=(t=>(t=((t,r)=>{if("object"!=Lo(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);if("object"!=Lo(e=e.call(t,r||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Lo(t)?t:t+""))(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Co(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function Do(t,r){if(null==t)return{};var e,n=((t,r)=>{if(null==t)return{};var e,n={};for(e in t)if({}.hasOwnProperty.call(t,e)){if(-1!==r.indexOf(e))continue;n[e]=t[e]}return n})(t,r);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),u=0;u<o.length;u++)e=o[u],-1===r.indexOf(e)&&{}.propertyIsEnumerable.call(t,e)&&(n[e]=t[e]);return n}function Ho(){var o=qo(),t=o.m(Ho),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,Qo(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(Ho=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new Bo(t,r)},AsyncIterator:Yo,async:function(t,r,e,n,o){return(u(r)?zo:Jo)(i(t),r,e,n,o)},keys:Wo,values:Qo}})()}function Qo(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(Lo(t)+" is not iterable")}function Wo(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Jo(t,r,e,n,o){var u=zo(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function zo(t,r,e,n,o){return new Yo(qo().w(t,r,e,n),o||Promise)}function Yo(a,c){var o;this.next||(F(Yo.prototype),F(Yo.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),F(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof Bo?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function qo(){var m,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof v?r:v,r=Object.create(r.prototype);return F(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:m,a:y,f:y.bind(m,4),d:function(t,r){return i=t,a=0,c=m,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(d=a<2?m:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(d=i[t=a?t:"next"]){if(!(d=d.call(i,c)))throw TypeError("iterator result is not an object");if(!d.done)return d;c=d.value,a<2&&(a=0)}else 1===a&&(d=i.return)&&d.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=m}else if((d=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=m,a=1,c=t}finally{s=1}}return{value:d,done:l}}),!0),r;function y(t,r){for(a=t,c=r,d=0;!l&&s&&!e&&d<f.length;d++){var e,n=f[d],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=m):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function v(){}function o(){}function u(){}var d=Object.getPrototypeOf,t=[][r]?d(d([][r]())):(F(d={},r,function(){return this}),d),i=u.prototype=v.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,F(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return F(i,"constructor",o.prototype=u),F(u,"constructor",o),F(u,e,o.displayName="GeneratorFunction"),F(i),F(i,e,"Generator"),F(i,r,function(){return this}),F(i,"toString",function(){return"[object Generator]"}),(qo=function(){return{w:n,m:a}})()}function F(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(F=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){F(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function Bo(t,r){this.v=t,this.k=r}function Uo(t){return(t=>{if(Array.isArray(t))return Ko(t)})(t)||(t=>{if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)})(t)||((t,r)=>{var e;if(t)return"string"==typeof t?Ko(t,r):"Map"===(e="Object"===(e={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Ko(t,r):void 0})(t)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function Ko(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function $o(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function Vo(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){$o(n,r,e,o,u,"next",t)}function u(t){$o(n,r,e,o,u,"throw",t)}o(void 0)})}}var Xo=(()=>{var e=Vo(Ho().mark(function t(r,e){var n,o;return Ho().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:return n=t.sent,t.next=5,w();case 5:o=t.sent,e.render("pages/website/auth/uye-ol.hbs",{title:"Üye ol",scriptname:process.env.WEBSCRIPTNAME,scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',menus:Uo(n),wpno:o.whatsappno});case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),Zo=(()=>{var e=Vo(Ho().mark(function t(r,e){var n,o,u,i,a;return Ho().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return",e.json({status:!1,msg:"Hata!"}));case 2:return i=r.body,n=bo(6),o=yo(n),i=Mo(Mo({id:0},i),{},{onay_kod:n}),u=i.newpassw1,i=Do(i,Go),t.next=8,d.Query("SELECT id FROM `musteriler` WHERE email = ?",[i.email]);case 8:if(0<t.sent.length)return t.abrupt("return",e.json({status:!1,msg:"Bu email adresi kayıtlıdır!"}));t.next=11;break;case 11:return a=Mo(Mo({id:0,passw:u},i),{},{role:"musteri"}),t.next=14,d.Query("INSERT INTO `musteriler` SET ?",[Mo({},a)]);case 14:return t.sent,t.next=17,Ro(n,o,i.email);case 17:return t.abrupt("return",e.json({status:!0,msg:"OK!"}));case 18:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})();function tu(t){return(tu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ru(r,t){var e,n=Object.keys(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(r),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,e)),n}function eu(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ru(Object(o),!0).forEach(function(t){var r,e;r=n,e=o[t=t],(t=(t=>(t=((t,r)=>{if("object"!=tu(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);if("object"!=tu(e=e.call(t,r||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==tu(t)?t:t+""))(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):ru(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function nu(){var o=su(),t=o.m(nu),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,ou(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(nu=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new fu(t,r)},AsyncIterator:cu,async:function(t,r,e,n,o){return(u(r)?au:iu)(i(t),r,e,n,o)},keys:uu,values:ou}})()}function ou(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(tu(t)+" is not iterable")}function uu(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function iu(t,r,e,n,o){var u=au(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function au(t,r,e,n,o){return new cu(su().w(t,r,e,n),o||Promise)}function cu(a,c){var o;this.next||(L(cu.prototype),L(cu.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),L(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof fu?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function su(){var m,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof v?r:v,r=Object.create(r.prototype);return L(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:m,a:y,f:y.bind(m,4),d:function(t,r){return i=t,a=0,c=m,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(d=a<2?m:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(d=i[t=a?t:"next"]){if(!(d=d.call(i,c)))throw TypeError("iterator result is not an object");if(!d.done)return d;c=d.value,a<2&&(a=0)}else 1===a&&(d=i.return)&&d.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=m}else if((d=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=m,a=1,c=t}finally{s=1}}return{value:d,done:l}}),!0),r;function y(t,r){for(a=t,c=r,d=0;!l&&s&&!e&&d<f.length;d++){var e,n=f[d],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=m):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function v(){}function o(){}function u(){}var d=Object.getPrototypeOf,t=[][r]?d(d([][r]())):(L(d={},r,function(){return this}),d),i=u.prototype=v.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,L(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return L(i,"constructor",o.prototype=u),L(u,"constructor",o),L(u,e,o.displayName="GeneratorFunction"),L(i),L(i,e,"Generator"),L(i,r,function(){return this}),L(i,"toString",function(){return"[object Generator]"}),(su=function(){return{w:n,m:a}})()}function L(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(L=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){L(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function fu(t,r){this.v=t,this.k=r}function lu(t){return(t=>{if(Array.isArray(t))return pu(t)})(t)||(t=>{if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)})(t)||((t,r)=>{var e;if(t)return"string"==typeof t?pu(t,r):"Map"===(e="Object"===(e={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?pu(t,r):void 0})(t)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function pu(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function yu(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function mu(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){yu(n,r,e,o,u,"next",t)}function u(t){yu(n,r,e,o,u,"throw",t)}o(void 0)})}}var bu=(()=>{var e=mu(nu().mark(function t(r,e){var n,o,u,i,a,c,s;return nu().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:return n=t.sent,t.next=5,Tt();case 5:return o=t.sent,t.next=8,w();case 8:if(u=t.sent,i=r.query,s=i.urn,i=i.cdn,a={status:!1,msg:"Aktivasyon sağlanamadı"},s&&i)return c=mo(i,s),t.next=15,d.Query("SELECT id FROM `musteriler` WHERE onay_kod = ?",[i]);t.next=24;break;case 15:if(s=t.sent,c){if(1==s.length)return a={status:!0,msg:"Kullanıcı hesabınız aktifleştirildi. Lütfen giriş Yapınız"},t.next=21,d.Query("UPDATE `musteriler` SET ? WHERE onay_kod = ?",[{onay_kod:"-"},i]);t.next=23}else t.next=24;break;case 21:t.next=24;break;case 23:a={status:!0,msg:"Kullanıcı hesabınız daha önce aktifleştirilmiş"};case 24:return t.abrupt("return",e.render("pages/website/auth/activasyononay.hbs",{title:"Not Activation User",scriptname:process.env.WEBSCRIPTNAME,scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',altKategoriler:n,menus:lu(n),dizi1:[0,1,2,3,4,5,6,7,8,9],eticSiteler:o,wpno:u.whatsappno,respData:a}));case 25:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),vu=(()=>{var e=mu(nu().mark(function t(r,e){var n,o,u,i,a;return nu().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r.body){t.next=3;break}return t.abrupt("return",e.json({status:!1,msg:"Hata!"}));case 3:return n=r.body.email,o=bo(6),u=yo(o),i=bo(10),i={passw:i,onay_kod:o},t.next=10,d.Query("SELECT * FROM `musteriler` WHERE email = ?",[n]);case 10:if((a=t.sent)&&1===a.length)return t.next=14,d.Query("UPDATE `musteriler` SET ? WHERE email = ?",[eu({},i),n]);t.next=18;break;case 14:return t.sent,t.next=17,Ro(o,u,n);case 17:return t.abrupt("return",e.json({status:!0,msg:"OK!"}));case 18:return t.abrupt("return",e.json({status:!1,msg:"".concat(n," ile kayıtlı bir kullanıcı bulunamadı")}));case 21:t.prev=21,t.t0=t.catch(0),console.log(t.t0);case 24:case"end":return t.stop()}},t,null,[[0,21]])}));return function(t,r){return e.apply(this,arguments)}})(),du=(()=>{var e=mu(nu().mark(function t(r,e){var n,o;return nu().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:return n=t.sent,t.next=5,w();case 5:return o=t.sent,t.abrupt("return",e.render("pages/website/auth/sifre-unutma.hbs",{title:"Şifre Değiştir",scriptname:process.env.WEBSCRIPTNAME,scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',menus:lu(n),wpno:o.whatsappno,musteri:r.user}));case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),hu=(()=>{var e=mu(nu().mark(function t(r,e){var n,o;return nu().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:return n=t.sent,t.next=5,w();case 5:return o=t.sent,t.abrupt("return",e.render("pages/website/auth/sifre-degistir.hbs",{title:"Şifre Değiştir",scriptname:process.env.WEBSCRIPTNAME,scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',menus:lu(n),wpno:o.whatsappno,musteri:r.user}));case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),gu=(()=>{var e=mu(nu().mark(function t(r,e){var n,o,u,i;return nu().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r.body){t.next=3;break}return t.abrupt("return",e.json({status:!1,msg:"Hata!"}));case 3:if(n={status:!1,msg:"Şifre değişikliği yapılamadı!"},u=r.body,o=u.newpassw1,i=u.cdn,(u=u.urn)&&i)if(mo(i,u))return t.next=10,d.Query("UPDATE `musteriler` SET ? WHERE onay_kod = ?",[{passw:o,onay_kod:"-"},i]);t.next=11;break;case 10:n={status:!0,msg:"Şifre Değiştirildi. Lütfen giriş Yapınız"};case 11:return t.abrupt("return",e.json(eu({},n)));case 14:t.prev=14,t.t0=t.catch(0),console.log(t.t0);case 17:case"end":return t.stop()}},t,null,[[0,14]])}));return function(t,r){return e.apply(this,arguments)}})(),wu=(()=>{var e=mu(nu().mark(function t(r,e){var n,o,u,i,a;return nu().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r.body){t.next=3;break}return t.abrupt("return",e.json({status:!1,msg:"Hata!"}));case 3:return n=r.body.email,o=bo(6),u=yo(o),i=bo(10),i={passw:i,onay_kod:o},t.next=10,d.Query("SELECT * FROM `musteriler` WHERE email = ?",[n]);case 10:if((a=t.sent)&&1===a.length)return t.next=14,d.Query("UPDATE `musteriler` SET ? WHERE email = ?",[eu({},i),n]);t.next=18;break;case 14:return t.sent,t.next=17,Fo(o,u,n);case 17:return t.abrupt("return",e.json({status:!0,msg:"OK!"}));case 18:return t.abrupt("return",e.json({status:!1,msg:"".concat(n," ile kayıtlı bir kullanıcı bulunamadı")}));case 21:t.prev=21,t.t0=t.catch(0),console.log(t.t0);case 24:case"end":return t.stop()}},t,null,[[0,21]])}));return function(t,r){return e.apply(this,arguments)}})();function Ou(t){return(Ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var xu=["newpassw1","newpassw2"];function Su(r,t){var e,n=Object.keys(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(r),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,e)),n}function ku(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Su(Object(o),!0).forEach(function(t){var r,e;r=n,e=o[t=t],(t=(t=>(t=((t,r)=>{if("object"!=Ou(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);if("object"!=Ou(e=e.call(t,r||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Ou(t)?t:t+""))(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Su(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function ju(t,r){if(null==t)return{};var e,n=((t,r)=>{if(null==t)return{};var e,n={};for(e in t)if({}.hasOwnProperty.call(t,e)){if(-1!==r.indexOf(e))continue;n[e]=t[e]}return n})(t,r);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),u=0;u<o.length;u++)e=o[u],-1===r.indexOf(e)&&{}.propertyIsEnumerable.call(t,e)&&(n[e]=t[e]);return n}function Eu(){var o=Au(),t=o.m(Eu),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,Pu(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(Eu=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new Ru(t,r)},AsyncIterator:Iu,async:function(t,r,e,n,o){return(u(r)?Nu:_u)(i(t),r,e,n,o)},keys:Tu,values:Pu}})()}function Pu(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(Ou(t)+" is not iterable")}function Tu(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function _u(t,r,e,n,o){var u=Nu(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function Nu(t,r,e,n,o){return new Iu(Au().w(t,r,e,n),o||Promise)}function Iu(a,c){var o;this.next||(G(Iu.prototype),G(Iu.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),G(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof Ru?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function Au(){var m,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof v?r:v,r=Object.create(r.prototype);return G(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:m,a:y,f:y.bind(m,4),d:function(t,r){return i=t,a=0,c=m,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(d=a<2?m:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(d=i[t=a?t:"next"]){if(!(d=d.call(i,c)))throw TypeError("iterator result is not an object");if(!d.done)return d;c=d.value,a<2&&(a=0)}else 1===a&&(d=i.return)&&d.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=m}else if((d=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=m,a=1,c=t}finally{s=1}}return{value:d,done:l}}),!0),r;function y(t,r){for(a=t,c=r,d=0;!l&&s&&!e&&d<f.length;d++){var e,n=f[d],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=m):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function v(){}function o(){}function u(){}var d=Object.getPrototypeOf,t=[][r]?d(d([][r]())):(G(d={},r,function(){return this}),d),i=u.prototype=v.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,G(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return G(i,"constructor",o.prototype=u),G(u,"constructor",o),G(u,e,o.displayName="GeneratorFunction"),G(i),G(i,e,"Generator"),G(i,r,function(){return this}),G(i,"toString",function(){return"[object Generator]"}),(Au=function(){return{w:n,m:a}})()}function G(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(G=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){G(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function Ru(t,r){this.v=t,this.k=r}function Fu(t){return(t=>{if(Array.isArray(t))return Lu(t)})(t)||(t=>{if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)})(t)||((t,r)=>{var e;if(t)return"string"==typeof t?Lu(t,r):"Map"===(e="Object"===(e={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Lu(t,r):void 0})(t)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function Lu(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function Gu(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function Cu(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){Gu(n,r,e,o,u,"next",t)}function u(t){Gu(n,r,e,o,u,"throw",t)}o(void 0)})}}var Mu=(()=>{var e=Cu(Eu().mark(function t(r,e){var n,o;return Eu().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:return n=t.sent,t.next=5,w();case 5:return o=t.sent,t.abrupt("return",e.render("pages/website/auth/user-bilgi.hbs",{title:"Müşteri Genel Bilgiler",scriptname:process.env.WEBSCRIPTNAME,scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',menus:Fu(n),wpno:o.whatsappno,musteri:r.user}));case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),Du=(()=>{var e=Cu(Eu().mark(function t(r,e){var n;return Eu().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return",e.json({status:!1,msg:"Gerekli bilgiler eksik"}));case 2:return t.prev=2,n=r.body.adres,console.log(n,r.user),t.next=7,d.Query("UPDATE `musteriler` SET ? WHERE id = ?",[{adres:JSON.stringify(n)},r.user.id]);case 7:return t.sent,t.abrupt("return",e.json({status:!0,msg:"Ok!"}));case 11:return t.prev=11,t.t0=t.catch(2),console.log(t.t0),t.abrupt("return",e.json({status:!1,msg:"Hata!"}));case 15:case"end":return t.stop()}},t,null,[[2,11]])}));return function(t,r){return e.apply(this,arguments)}})(),Hu=(()=>{var e=Cu(Eu().mark(function t(r,e){var n,o;return Eu().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return",e.json({status:!1,msg:"Gerekli bilgiler eksik"}));case 2:return t.prev=2,o=r.body,n=o.newpassw1,o=ju(o,xu),o=ku(ku({},o),{},{passw:n}),t.next=7,d.Query("UPDATE `musteriler` SET ? WHERE id =?",[ku({},o),r.user.id]);case 7:return t.sent,t.abrupt("return",e.json({status:!0,msg:"Ok!"}));case 11:return t.prev=11,t.t0=t.catch(2),t.abrupt("return",e.json({status:!1,msg:"Hata!"}));case 14:case"end":return t.stop()}},t,null,[[2,11]])}));return function(t,r){return e.apply(this,arguments)}})(),Qu=(()=>{var e=Cu(Eu().mark(function t(r,e){var n,o,u;return Eu().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:return n=t.sent,t.next=5,w();case 5:return o=t.sent,u=ku(ku({},r.user),{},{adres:JSON.parse(r.user.adres)}),t.abrupt("return",e.render("pages/website/auth/user-adresbilgi.hbs",{title:"Müşteri Adres Bilgileri",scriptname:process.env.WEBSCRIPTNAME,scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',menus:Fu(n),wpno:o.whatsappno,musteri:u}));case 8:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})();function Wu(t,r){var r=1<arguments.length&&void 0!==r?r:"*",e=(t=(t="string"!=typeof t?t.toString():t).replace(/[^0-9]+/g,"")).length;return t.substring(0,3)+r.repeat(e-6)+t.substring(e-3,e)}function Ju(t,r){for(t=t.toString();t.length<r;)t="0"+t;return t}var zu=(()=>{var e=Cu(Eu().mark(function t(r,e){var n,o,u,i;return Eu().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:return n=t.sent,t.next=5,w();case 5:return o=t.sent,t.next=8,d.Query("SELECT * FROM `siparis` WHERE userid = ?",[r.user.id]);case 8:return u=(u=(u=t.sent).sort(function(t,r){return t.systemTime<r.systemTime?1:-1})).map(function(t){for(var r,e=JSON.parse(t.paymentCard),n=(e.cardNumber=Wu(e.cardNumber,"*"),JSON.parse(t.buyer)),o=(n.identityNumber=Wu(n.identityNumber,"*"),JSON.parse(t.itemTransactions)),u=JSON.parse(t.basketItems),i=0;i<u.length;i++)u[i]=ku(ku({},u[i]),{},{fiyat:parseFloat(u[i].fiyat).toFixed(2),indirimli_fiyat:parseFloat(u[i].indirimli_fiyat).toFixed(2),price:parseFloat(u[i].price).toFixed(2),resim:"/assets/urun/resim_yok.webp"});return ku(ku({},t),{},{price:parseFloat(t.price).toFixed(2),basketItems:u,paymentCard:e,shippingAddress:JSON.parse(t.shippingAddress),billingAddress:JSON.parse(t.billingAddress),itemTransactions:o,buyer:n,systemTimeStr:(e=t.systemTime,o=Ju((e=new Date(parseInt(e))).getDate(),2),n=Ju(e.getMonth()+1,2),t=e.getFullYear(),r=e.getHours(),e=e.getMinutes(),"".concat(o,".").concat(n,".").concat(t," ").concat(r,":").concat(e)),resim:"/assets/urun/resim_yok.webp"})}),i=u.map(function(t){return t.basketItems}),t.abrupt("return",e.render("pages/website/auth/user-siparis.hbs",{title:"Siparişlerim",scriptname:process.env.WEBSCRIPTNAME,scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',menus:Fu(n),wpno:o.whatsappno,musteri:r.user,siparisler:u,basketItems:i}));case 13:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})();function Yu(t){return(Yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var qu=["id"];function Bu(t,r){if(null==t)return{};var e,n=((t,r)=>{if(null==t)return{};var e,n={};for(e in t)if({}.hasOwnProperty.call(t,e)){if(-1!==r.indexOf(e))continue;n[e]=t[e]}return n})(t,r);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),u=0;u<o.length;u++)e=o[u],-1===r.indexOf(e)&&{}.propertyIsEnumerable.call(t,e)&&(n[e]=t[e]);return n}function a(){var o=Zu(),t=o.m(a),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,Uu(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(a=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new ri(t,r)},AsyncIterator:Xu,async:function(t,r,e,n,o){return(u(r)?Vu:$u)(i(t),r,e,n,o)},keys:Ku,values:Uu}})()}function Uu(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(Yu(t)+" is not iterable")}function Ku(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function $u(t,r,e,n,o){var u=Vu(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function Vu(t,r,e,n,o){return new Xu(Zu().w(t,r,e,n),o||Promise)}function Xu(a,c){var o;this.next||(ti(Xu.prototype),ti(Xu.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),ti(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof ri?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function Zu(){var m,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof v?r:v,r=Object.create(r.prototype);return ti(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:m,a:y,f:y.bind(m,4),d:function(t,r){return i=t,a=0,c=m,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(d=a<2?m:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(d=i[t=a?t:"next"]){if(!(d=d.call(i,c)))throw TypeError("iterator result is not an object");if(!d.done)return d;c=d.value,a<2&&(a=0)}else 1===a&&(d=i.return)&&d.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=m}else if((d=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=m,a=1,c=t}finally{s=1}}return{value:d,done:l}}),!0),r;function y(t,r){for(a=t,c=r,d=0;!l&&s&&!e&&d<f.length;d++){var e,n=f[d],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=m):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function v(){}function o(){}function u(){}var d=Object.getPrototypeOf,t=[][r]?d(d([][r]())):(ti(d={},r,function(){return this}),d),i=u.prototype=v.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,ti(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return ti(i,"constructor",o.prototype=u),ti(u,"constructor",o),ti(u,e,o.displayName="GeneratorFunction"),ti(i),ti(i,e,"Generator"),ti(i,r,function(){return this}),ti(i,"toString",function(){return"[object Generator]"}),(Zu=function(){return{w:n,m:a}})()}function ti(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(ti=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){ti(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function ri(t,r){this.v=t,this.k=r}function ei(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function ni(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){ei(n,r,e,o,u,"next",t)}function u(t){ei(n,r,e,o,u,"throw",t)}o(void 0)})}}function oi(t){i.post("/urun/get-urunlerforgorlen",(()=>{var e=ni(a().mark(function t(r,e){var n,o;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.ids,t.next=6,d.Query("SELECT * FROM `urun` WHERE id IN  ?",[[o]]);case 6:return o=t.sent,t.abrupt("return",e.json(o));case 8:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),i.post("/urun/update-urun",(()=>{var e=ni(a().mark(function t(r,e){var n,o,u;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.id,u=Bu(n,qu),t.next=6,d.Query("UPDATE `urun` SET ? WHERE id ="+o,[u]);case 6:return t.abrupt("return",e.json({msg:"OK!"}));case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),i.post("/urun/get-yorumlar",(()=>{var e=ni(a().mark(function t(r,e){var n,o;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.id,t.next=6,d.Query("SELECT yorumlar FROM `urun` WHERE id ="+o);case 6:return o=t.sent,t.abrupt("return",e.json(o[0].yorumlar||JSON.stringify([])));case 8:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),i.get("/urun/:urunurl",hr),i.get("/urun",function(t,r){return r.redirect("/urun/")}),t.use("/",i)}function ui(t){i.post("/get-menu",(()=>{var e=ni(a().mark(function t(r,e){var n,o,u,i;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.id,u=n.parent_length,i=u-1,t.next=7,d.Query("SELECT * FROM `kategori` WHERE JSON_CONTAINS(JSON_EXTRACT(parents,'$[?]'),?,'$') AND JSON_LENGTH(parents, '$') = ?",[i,o,u]);case 7:return i=t.sent,t.abrupt("return",e.json(i));case 9:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),t.use("/",i)}function ii(t){i.post("/siparis/add",(()=>{var e=ni(a().mark(function t(r,e){return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,kt(r.body);case 4:return t.abrupt("return",e.json({msg:"OK!"}));case 5:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),i.post("/siparis/delete",(()=>{var e=ni(a().mark(function t(r,e){var n;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return");case 2:return n=r.body.id,t.next=5,St(n);case 5:return t.abrupt("return",e.json({msg:"OK!"}));case 6:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),i.post("/siparis/update",(()=>{var e=ni(a().mark(function t(r,e){return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,jt(r.body);case 4:return t.abrupt("return",e.json({msg:"OK!"}));case 5:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),i.post("/siparis/get",(()=>{var e=ni(a().mark(function t(r,e){var n;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Et(r.body);case 4:return n=t.sent,t.abrupt("return",e.json(n));case 6:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),i.post("/siparis/getbysipid",(()=>{var e=ni(a().mark(function t(r,e){var n;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return");case 2:return n=r.body.ids,t.next=5,Pt(n);case 5:return n=t.sent,t.abrupt("return",e.json(n));case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),i.get("/siparis*",re,Fn),i.get("/siparis",function(t,r){return r.redirect("/siparis/")}),t.use("/",i)}function ai(t){i.get("/sepet*",$r),i.get("/siparis-bilgi*",re,Xr),i.get("/odeme*",re,Vr),i.post("/sepet/get-urunler",(()=>{var e=ni(a().mark(function t(r,e){var n,o;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.ids,t.next=6,d.Query("SELECT * FROM `urun`  WHERE id IN ?",[[o]]);case 6:return o=t.sent,t.abrupt("return",e.json(o));case 8:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),i.get("/sepet",function(t,r){return r.redirect("/sepet/")}),t.use("/",i)}function ci(t){i.get("/favori*",Yn),i.post("/favori/get-urunler",(()=>{var e=ni(a().mark(function t(r,e){var n,o;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.ids,t.next=6,d.Query("SELECT * FROM `urun`  WHERE id IN ?",[[o]]);case 6:return o=t.sent,t.abrupt("return",e.json(o));case 8:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),i.get("/sepet",function(t,r){return r.redirect("/sepet/")}),t.use("/",i)}var i=r.Router({mergeParams:!0});require("crypto");function si(t){return(si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fi(t,r){return(t=>{if(Array.isArray(t))return t})(t)||((t,r)=>{var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,u,i,a=[],c=!0,s=!1;try{if(u=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;c=!1}else for(;!(c=(n=u.call(e)).done)&&(a.push(n.value),a.length!==r);c=!0);}catch(t){s=!0,o=t}finally{try{if(!c&&null!=e.return&&(i=e.return(),Object(i)!==i))return}finally{if(s)throw o}}return a}})(t,r)||((t,r)=>{var e;if(t)return"string"==typeof t?li(t,r):"Map"===(e="Object"===(e={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?li(t,r):void 0})(t,r)||(()=>{throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function li(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function pi(r,t){var e,n=Object.keys(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(r),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,e)),n}function f(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?pi(Object(o),!0).forEach(function(t){var r,e;r=n,e=o[t=t],(t=(t=>(t=((t,r)=>{if("object"!=si(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);if("object"!=si(e=e.call(t,r||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==si(t)?t:t+""))(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):pi(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function l(){var o=hi(),t=o.m(l),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,yi(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(l=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new wi(t,r)},AsyncIterator:di,async:function(t,r,e,n,o){return(u(r)?vi:bi)(i(t),r,e,n,o)},keys:mi,values:yi}})()}function yi(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(si(t)+" is not iterable")}function mi(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function bi(t,r,e,n,o){var u=vi(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function vi(t,r,e,n,o){return new di(hi().w(t,r,e,n),o||Promise)}function di(a,c){var o;this.next||(gi(di.prototype),gi(di.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),gi(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof wi?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function hi(){var m,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof v?r:v,r=Object.create(r.prototype);return gi(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:m,a:y,f:y.bind(m,4),d:function(t,r){return i=t,a=0,c=m,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(d=a<2?m:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(d=i[t=a?t:"next"]){if(!(d=d.call(i,c)))throw TypeError("iterator result is not an object");if(!d.done)return d;c=d.value,a<2&&(a=0)}else 1===a&&(d=i.return)&&d.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=m}else if((d=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=m,a=1,c=t}finally{s=1}}return{value:d,done:l}}),!0),r;function y(t,r){for(a=t,c=r,d=0;!l&&s&&!e&&d<f.length;d++){var e,n=f[d],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=m):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function v(){}function o(){}function u(){}var d=Object.getPrototypeOf,t=[][r]?d(d([][r]())):(gi(d={},r,function(){return this}),d),i=u.prototype=v.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,gi(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return gi(i,"constructor",o.prototype=u),gi(u,"constructor",o),gi(u,e,o.displayName="GeneratorFunction"),gi(i),gi(i,e,"Generator"),gi(i,r,function(){return this}),gi(i,"toString",function(){return"[object Generator]"}),(hi=function(){return{w:n,m:a}})()}function gi(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(gi=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){gi(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function wi(t,r){this.v=t,this.k=r}function Oi(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function xi(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){Oi(n,r,e,o,u,"next",t)}function u(t){Oi(n,r,e,o,u,"throw",t)}o(void 0)})}}function Si(t){ki.post("/iyz/bin-check",(()=>{var e=xi(l().mark(function t(r,e){var n,o,u;return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o={locale:ji.LOCALE.TR,conversationId:"123456789",binNumber:n.binNumber},t.next=6,new Promise(function(e,n){Ei.binNumber.retrieve(o,function(t,r){t&&n(t),e(r)})});case 6:return u=t.sent,t.abrupt("return",e.json(u));case 8:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),ki.get("/iyz/3ds-verify",(()=>{var e=xi(l().mark(function t(r,e){var n,o;return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.query.ulre){t.next=3;break}return t.abrupt("return",e.send("not Found"));case 3:return t.next=5,d.Query("SELECT threeDSHtmlContent FROM `siparis` WHERE `paymentId` = "+n);case 5:return o=t.sent,o=Buffer.from(o[0].threeDSHtmlContent,"base64"),e.setHeader("Content-type","text/html"),t.abrupt("return",e.send(o.toString("utf8")));case 9:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),ki.post("/iyz/3ds-init",(()=>{var e=xi(l().mark(function t(r,i){var e,n,a;return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=r.user,n=r.body){t.next=4;break}return t.abrupt("return");case 4:a=f(f({},{userid:e.id,locale:ji.LOCALE.TR,conversationId:"123456789",price:"1",paidPrice:"1.2",currency:ji.CURRENCY.TRY,installment:"1",basketId:"B67832",paymentChannel:ji.PAYMENT_CHANNEL.WEB,paymentGroup:ji.PAYMENT_GROUP.PRODUCT,callbackUrl:C+"/iyz/3ds-pay",paymentCard:{cardHolderName:n.cardHolderName,cardNumber:n.cardNumber,expireMonth:n.expireMonth,expireYear:n.expireYear,cvc:n.cvc,registerCard:"0"},buyer:{id:"BY789",name:"John",surname:"Doe",gsmNumber:"+905350000000",email:"email@email.com",identityNumber:"74300864791",lastLoginDate:"2015-10-05 12:43:35",registrationDate:"2013-04-21 15:12:09",registrationAddress:"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1",ip:"85.34.78.112",city:"Istanbul",country:"Turkey",zipCode:"34732"},shippingAddress:{contactName:"Jane Doe",city:"Istanbul",country:"Turkey",address:"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1",zipCode:"34742"},billingAddress:{contactName:"Jane Doe",city:"Istanbul",country:"Turkey",address:"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1",zipCode:"34742"},basketItems:[{id:"BI101",name:"Binocular",category1:"Collectibles",category2:"Accessories",itemType:ji.BASKET_ITEM_TYPE.PHYSICAL,price:"0.3"},{id:"BI102",name:"Game code",category1:"Game",category2:"Online Game Items",itemType:ji.BASKET_ITEM_TYPE.VIRTUAL,price:"0.5"},{id:"BI103",name:"Usb",category1:"Electronics",category2:"Usb / Cable",itemType:ji.BASKET_ITEM_TYPE.PHYSICAL,price:"0.2"}]}),n),Ei.threedsInitialize.create(a,(()=>{var e=xi(l().mark(function t(r,e){var n,o,u;return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r)return t.abrupt("return",i.json({status:!1,msg:r}));t.next=2;break;case 2:if("success"===e.status)return n=e.paymentId,o=e.threeDSHtmlContent,u=e.systemTime,t.next=6,kt(f(f({},a),{},{paymentId:n,systemTime:u,threeDSHtmlContent:o}));t.next=9;break;case 6:return t.abrupt("return",i.json({status:!0,html:n}));case 9:if("failure"==e.status)return t.abrupt("return",i.json({status:!1,msg:e.errorMessage}));t.next=11;break;case 11:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})());case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),ki.get("/iyz/3ds-pay",(()=>{var e=xi(l().mark(function t(r,e){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.redirect("/"));case 1:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),ki.post("/iyz/3ds-pay",(()=>{var e=xi(l().mark(function t(i,a){var r,e,n,o,u,c,s;return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=i.body){t.next=3;break}return t.abrupt("return");case 3:return r.status,e=r.paymentId,n=r.conversationId,o=r.conversationData,u=r.mdStatus,t.next=6,g();case 6:if(s=t.sent,c={title:"Ödeme Sonuç",scriptname:process.env.WEBSCRIPTNAME,scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',menus:s,odemeStatus:""},1==u)return s={conversationId:n,locale:ji.LOCALE.TR,paymentId:e,conversationData:o},t.abrupt("return",Ei.threedsPayment.create(s,(()=>{var e=xi(l().mark(function t(r,e){var n,o,u;return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r)return t.abrupt("return",a.render("pages/website/sepet/odeme-result.hbs",c));t.next=2;break;case 2:if(n=e.paymentId,o=e.itemTransactions,"success"===e.status)return t.next=6,Pt([n]);t.next=18;break;case 6:return u=t.sent,u=fi(u,1),u=u[0],u=JSON.parse(u.buyer),u=u.email,t.next=12,Pi(u,n);case 12:return t.next=14,d.Query("UPDATE `siparis` SET ? WHERE paymentId = "+n,[{itemTransactions:JSON.stringify(o)}]);case 14:return u=f({},i.user),t.abrupt("return",a.render("pages/website/sepet/odeme-result.hbs",f(f({},c),{},{odemestatus:"Success",odememesaj:"Ödeme Başarılı",paymentId:n,musteri:u})));case 18:if("failure"!=e.status)t.next=23;else{if(n)return t.next=22,SiparisDelete(n);t.next=22}break;case 22:return t.abrupt("return",a.render("pages/website/sepet/odeme-result.hbs",f(f({},c),{},{odemestatus:"Error",odememesaj:e.errorMessage})));case 23:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()));t.next=13;break;case 13:if(-1!=u)t.next=20;else{if(e)return t.next=17,SiparisDelete(e);t.next=17}break;case 17:return t.abrupt("return",a.render("pages/website/sepet/odeme-result.hbs",f(f({},c),{},{odemestatus:"Error",odememesaj:"3-D Secure imzası geçersiz veya doğrulama."})));case 20:if(0!=u)t.next=27;else{if(e)return t.next=24,SiparisDelete(e);t.next=24}break;case 24:return t.abrupt("return",a.render("pages/website/sepet/odeme-result.hbs",f(f({},c),{},{odemestatus:"Error",odememesaj:"3-D Secure imzası geçersiz veya doğrulama."})));case 27:if(2!=u)t.next=34;else{if(e)return t.next=31,SiparisDelete(e);t.next=31}break;case 31:return t.abrupt("return",a.render("pages/website/sepet/odeme-result.hbs",f(f({},c),{},{odemestatus:"Error",odememesaj:"Kart sahibi veya bankası sisteme kayıtlı değil."})));case 34:if(3!=u)t.next=41;else{if(e)return t.next=38,SiparisDelete(e);t.next=38}break;case 38:return t.abrupt("return",a.render("pages/website/sepet/odeme-result.hbs",f(f({},c),{},{odemestatus:"Error",odememesaj:"Kartın bankası sisteme kayıtlı değil."})));case 41:if(4!=u)t.next=48;else{if(e)return t.next=45,SiparisDelete(e);t.next=45}break;case 45:return t.abrupt("return",a.render("pages/website/sepet/odeme-result.hbs",f(f({},c),{},{odemestatus:"Error",odememesaj:"Doğrulama denemesi, kart sahibi sisteme daha sonra kayıt olmayı seçmiş"})));case 48:if(5!=u)t.next=55;else{if(e)return t.next=52,SiparisDelete(e);t.next=52}break;case 52:return t.abrupt("return",a.render("pages/website/sepet/odeme-result.hbs",f(f({},c),{},{odemestatus:"Error",odememesaj:"Doğrulama yapılamıyor."})));case 55:if(6!=u)t.next=62;else{if(e)return t.next=59,SiparisDelete(e);t.next=59}break;case 59:return t.abrupt("return",a.render("pages/website/sepet/odeme-result.hbs",f(f({},c),{},{odemestatus:"Error",odememesaj:"3-D Secure hatası."})));case 62:if(7!=u)t.next=69;else{if(e)return t.next=66,SiparisDelete(e);t.next=66}break;case 66:return t.abrupt("return",a.render("pages/website/sepet/odeme-result.hbs",f(f({},c),{},{odemestatus:"Error",odememesaj:"Sistem hatası."})));case 69:if(7!=u)t.next=74;else{if(e)return t.next=73,SiparisDelete(e);t.next=73}break;case 73:return t.abrupt("return",a.render("pages/website/sepet/odeme-result.hbs",f(f({},c),{},{odemestatus:"Error",odememesaj:"Bilinmeyen kart no."})));case 74:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),ki.post("/iyz/iade",(()=>{var e=xi(l().mark(function t(r,e){var n,o,u;return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return");case 2:n={locale:ji.LOCALE.TR,conversationId:"123456789",paymentTransactionId:"",price:"",ip:"85.34.78.112",currency:ji.CURRENCY.TRY},o=r.body,o.paymentId,u=o.price,n.paymentTransactionId=o.paymentTransactionId,n.price=u,Ei.refund.create(n,function(t,r){return t?e.json({status:!1,msg:t}):e.json({status:!0,msg:"Ok!",result:r})});case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),ki.post("/iyz/iptal",(()=>{var e=xi(l().mark(function t(r,e){var n,o;return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return");case 2:n={locale:ji.LOCALE.TR,paymentId:"",ip:"85.34.78.112"},o=r.body.paymentId,n.paymentId=o,Ei.cancel.create(n,function(t,r){return t?e.json({status:!1,msg:t}):e.json({status:!0,msg:"Ok!",result:r})});case 6:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),t.use("/",ki)}var ki=r.Router({mergeParams:!0}),ji=require("iyzipay"),Ei=new ji({apiKey:process.env.IYZICO_API_KEY,secretKey:process.env.IYZICO_SECRET_KEY,uri:process.env.IYZICO_BASE_URL}),Pi=(()=>{var e=xi(l().mark(function t(r,e){var n;return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=new Ao,t.next=3,n.sendMail({to:r,subject:"Soyluistif Alışveriş",text:"",html:'\n      <div style="padding:40px 10px;text-align:center;">\n         <div>Sn.<strong>Soyluistif Makinaları</strong></div>\n          <div><strong>Ödemeniz Gerçekleştirildi</strong></div>\n          <div style="padding:5px 10px; background-color:rgba(0,0,0,0.2); font-weight:700">'.concat(e,'</div>\n            <a href="').concat(C,'/siparis" target="_blank" style="text-decoration:underline;color:blue">Siparişi Görüntüle</a>\n          <div>Lütfen yukarıdaki linkten siparişinize ulaşabilirsiniz!</div>\n      </div>\n    ')});case 3:t.sent;case 4:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})();function Ti(t){return(Ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _i(){var o=Li(),t=o.m(_i),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,Ni(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(_i=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new Ci(t,r)},AsyncIterator:Fi,async:function(t,r,e,n,o){return(u(r)?Ri:Ai)(i(t),r,e,n,o)},keys:Ii,values:Ni}})()}function Ni(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(Ti(t)+" is not iterable")}function Ii(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Ai(t,r,e,n,o){var u=Ri(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function Ri(t,r,e,n,o){return new Fi(Li().w(t,r,e,n),o||Promise)}function Fi(a,c){var o;this.next||(Gi(Fi.prototype),Gi(Fi.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),Gi(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof Ci?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function Li(){var m,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof v?r:v,r=Object.create(r.prototype);return Gi(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:m,a:y,f:y.bind(m,4),d:function(t,r){return i=t,a=0,c=m,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(d=a<2?m:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(d=i[t=a?t:"next"]){if(!(d=d.call(i,c)))throw TypeError("iterator result is not an object");if(!d.done)return d;c=d.value,a<2&&(a=0)}else 1===a&&(d=i.return)&&d.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=m}else if((d=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=m,a=1,c=t}finally{s=1}}return{value:d,done:l}}),!0),r;function y(t,r){for(a=t,c=r,d=0;!l&&s&&!e&&d<f.length;d++){var e,n=f[d],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=m):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function v(){}function o(){}function u(){}var d=Object.getPrototypeOf,t=[][r]?d(d([][r]())):(Gi(d={},r,function(){return this}),d),i=u.prototype=v.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,Gi(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return Gi(i,"constructor",o.prototype=u),Gi(u,"constructor",o),Gi(u,e,o.displayName="GeneratorFunction"),Gi(i),Gi(i,e,"Generator"),Gi(i,r,function(){return this}),Gi(i,"toString",function(){return"[object Generator]"}),(Li=function(){return{w:n,m:a}})()}function Gi(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(Gi=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){Gi(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function Ci(t,r){this.v=t,this.k=r}function Mi(r,t){var e,n=Object.keys(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(r),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,e)),n}function Di(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Mi(Object(o),!0).forEach(function(t){var r,e;r=n,e=o[t=t],(t=(t=>(t=((t,r)=>{if("object"!=Ti(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);if("object"!=Ti(e=e.call(t,r||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Ti(t)?t:t+""))(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Mi(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function Hi(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function Qi(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){Hi(n,r,e,o,u,"next",t)}function u(t){Hi(n,r,e,o,u,"throw",t)}o(void 0)})}}var Wi=r.Router({mergeParams:!0}),Ji=(()=>{var e=Qi(_i().mark(function t(r,e){var n,o,u;return _i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return",e.json({msg:"Data not found"}));case 3:return u=n.il_id,o=n.ilce_id,t.next=6,d.Query("SELECT * FROM `mahalleler` where il_id = ? AND ilce_id = ?",[u,o]);case 6:return u=t.sent,t.abrupt("return",e.json(Di({},u)));case 8:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),zi=(()=>{var e=Qi(_i().mark(function t(r,e){var n,o;return _i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return",e.json({msg:"Data not found"}));case 3:return o=n.il_id,t.next=6,d.Query("SELECT * FROM `ilceler` where il_id = ?",[o]);case 6:return o=t.sent,t.abrupt("return",e.json(Di({},o)));case 8:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),Yi=(()=>{var e=Qi(_i().mark(function t(r,e){var n;return _i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=3;break}return t.abrupt("return",e.json({msg:"Data not found"}));case 3:return t.next=5,d.Query("SELECT * FROM `iller`");case 5:return n=t.sent,t.abrupt("return",e.json(Di({},n)));case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),qi=(()=>{var e=Qi(_i().mark(function t(r,e){var n,o;return _i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return",e.json({msg:"Data not found"}));case 3:return o=n.il_id,t.next=6,d.Query("SELECT * FROM `iller` WHERE id = ?",[o]);case 6:return o=t.sent,t.abrupt("return",e.json(Di({},o)));case 8:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),Bi=(()=>{var e=Qi(_i().mark(function t(r,e){var n,o;return _i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return",e.json({msg:"Data not found"}));case 3:return o=n.ilce_id,t.next=6,d.Query("SELECT * FROM `ilceler` WHERE id = ?",[o]);case 6:return o=t.sent,t.abrupt("return",e.json(Di({},o)));case 8:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),Ui=(()=>{var e=Qi(_i().mark(function t(r,e){var n,o;return _i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return",e.json({msg:"Data not found"}));case 3:return o=n.mahalle_id,t.next=6,d.Query("SELECT * FROM `mahalleler` WHERE id = ?",[o]);case 6:return o=t.sent,t.abrupt("return",e.json(Di({},o)));case 8:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),Ki=r.Router({mergeParams:!0}),$i=require("passport-local");let Vi=require("passport");require("bcryptjs");function Xi(t){return(Xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zi(){var o=ua(),t=o.m(Zi),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,ta(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(Zi=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new aa(t,r)},AsyncIterator:oa,async:function(t,r,e,n,o){return(u(r)?na:ea)(i(t),r,e,n,o)},keys:ra,values:ta}})()}function ta(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(Xi(t)+" is not iterable")}function ra(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function ea(t,r,e,n,o){var u=na(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function na(t,r,e,n,o){return new oa(ua().w(t,r,e,n),o||Promise)}function oa(a,c){var o;this.next||(ia(oa.prototype),ia(oa.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),ia(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof aa?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function ua(){var m,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof v?r:v,r=Object.create(r.prototype);return ia(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:m,a:y,f:y.bind(m,4),d:function(t,r){return i=t,a=0,c=m,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(d=a<2?m:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(d=i[t=a?t:"next"]){if(!(d=d.call(i,c)))throw TypeError("iterator result is not an object");if(!d.done)return d;c=d.value,a<2&&(a=0)}else 1===a&&(d=i.return)&&d.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=m}else if((d=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=m,a=1,c=t}finally{s=1}}return{value:d,done:l}}),!0),r;function y(t,r){for(a=t,c=r,d=0;!l&&s&&!e&&d<f.length;d++){var e,n=f[d],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=m):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function v(){}function o(){}function u(){}var d=Object.getPrototypeOf,t=[][r]?d(d([][r]())):(ia(d={},r,function(){return this}),d),i=u.prototype=v.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,ia(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return ia(i,"constructor",o.prototype=u),ia(u,"constructor",o),ia(u,e,o.displayName="GeneratorFunction"),ia(i),ia(i,e,"Generator"),ia(i,r,function(){return this}),ia(i,"toString",function(){return"[object Generator]"}),(ua=function(){return{w:n,m:a}})()}function ia(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(ia=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){ia(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function aa(t,r){this.v=t,this.k=r}function ca(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function sa(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){ca(n,r,e,o,u,"next",t)}function u(t){ca(n,r,e,o,u,"throw",t)}o(void 0)})}}function fa(o,u){return new Promise((()=>{var e=sa(Zi().mark(function t(r,e){var n;return Zi().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:try{"sifre"in u?n=o===u.sifre:"passw"in u&&(n=o===u.passw),r(!!n||"The password that you've entered is incorrect")}catch(t){e(t)}case 1:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})())}var la=(()=>{var r=sa(Zi().mark(function t(r){var e;return Zi().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.Query("SELECT * FROM `users` WHERE `email` = ? ",r);case 3:return e=t.sent,t.abrupt("return",e[0]);case 7:return t.prev=7,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",!1);case 11:case"end":return t.stop()}},t,null,[[0,7]])}));return function(t){return r.apply(this,arguments)}})(),pa=(()=>{var r=sa(Zi().mark(function t(r){var e;return Zi().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.Query("SELECT * FROM `users` WHERE `id` = ? ",r);case 3:return e=t.sent,t.abrupt("return",e[0]);case 7:return t.prev=7,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",!1);case 11:case"end":return t.stop()}},t,null,[[0,7]])}));return function(t){return r.apply(this,arguments)}})(),ya=(()=>{var r=sa(Zi().mark(function t(r){var e;return Zi().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.Query("SELECT * FROM `musteriler` WHERE `email` = ? ",r);case 3:return e=t.sent,t.abrupt("return",e[0]);case 7:return t.prev=7,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",!1);case 11:case"end":return t.stop()}},t,null,[[0,7]])}));return function(t){return r.apply(this,arguments)}})(),ma=(()=>{var r=sa(Zi().mark(function t(r){var e;return Zi().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.Query("SELECT * FROM `musteriler` WHERE `id` = ? ",r);case 3:return e=t.sent,t.abrupt("return",e[0]);case 7:return t.prev=7,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",!1);case 11:case"end":return t.stop()}},t,null,[[0,7]])}));return function(t){return r.apply(this,arguments)}})();function ba(t){return(ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function va(){var o=Oa(),t=o.m(va),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,da(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(va=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new Sa(t,r)},AsyncIterator:wa,async:function(t,r,e,n,o){return(u(r)?ga:function(t,r,e,n,o){var u=ga(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})})(i(t),r,e,n,o)},keys:ha,values:da}})()}function da(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(ba(t)+" is not iterable")}function ha(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function ga(t,r,e,n,o){return new wa(Oa().w(t,r,e,n),o||Promise)}function wa(a,c){var o;this.next||(xa(wa.prototype),xa(wa.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),xa(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof Sa?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function Oa(){var m,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof v?r:v,r=Object.create(r.prototype);return xa(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:m,a:y,f:y.bind(m,4),d:function(t,r){return i=t,a=0,c=m,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(d=a<2?m:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(d=i[t=a?t:"next"]){if(!(d=d.call(i,c)))throw TypeError("iterator result is not an object");if(!d.done)return d;c=d.value,a<2&&(a=0)}else 1===a&&(d=i.return)&&d.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=m}else if((d=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=m,a=1,c=t}finally{s=1}}return{value:d,done:l}}),!0),r;function y(t,r){for(a=t,c=r,d=0;!l&&s&&!e&&d<f.length;d++){var e,n=f[d],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=m):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function v(){}function o(){}function u(){}var d=Object.getPrototypeOf,t=[][r]?d(d([][r]())):(xa(d={},r,function(){return this}),d),i=u.prototype=v.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,xa(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return xa(i,"constructor",o.prototype=u),xa(u,"constructor",o),xa(u,e,o.displayName="GeneratorFunction"),xa(i),xa(i,e,"Generator"),xa(i,r,function(){return this}),xa(i,"toString",function(){return"[object Generator]"}),(Oa=function(){return{w:n,m:a}})()}function xa(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(xa=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){xa(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function Sa(t,r){this.v=t,this.k=r}function ka(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function ja(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){ka(n,r,e,o,u,"next",t)}function u(t){ka(n,r,e,o,u,"throw",t)}o(void 0)})}}var $i=$i.Strategy,Ea=function(n,o,u){Vi.authenticate("local",function(t,r,e){switch(n.accepts("html","json")){case"html":if(t)return u(t);if(!r)return o.redirect("/signin");n.logIn(r,function(t){return t?u(t):o.redirect("/ctrlpanel")});break;case"json":if(t)return u(t);if(console.log(r,e),!r)return console.log("Kullunıcı bulunamadı"),o.status(401).json({ok:!1,msg:"Kullunıcı bulunamadı"});if(e)return console.log(e,r),o.status(401).json({ok:!1,msg:"Email veya şifre hatalı"});n.logIn(r,function(t){return t?(console.log(r,"Hatalı bir durum var"),o.status(401).json({ok:!1,msg:"Hatalı bir durum var"})):o.json({ok:!0})});break;default:o.status(406).json()}})(n,o,u)},Pa=function(u,i,a){Vi.authenticate("musteri",function(t,r,e){switch(u.accepts("html","json")){case"html":if(t)return a(t);if(!r)return i.redirect("/login");u.logIn(r,function(t){return t?a(t):i.redirect("/")});break;case"json":if(t)return a(t);var n=e.status,o=e.msg;if(!n)return i.status(401).json({ok:!1,msg:o});if(!r)return console.log("Kullunıcı bulunamadı11"),i.status(401).json({ok:!1,msg:"Kullunıcı bulunamadı"});if(!e||!e.status)return console.log(e,r),i.status(401).json({ok:!1,msg:"Email veya şifre hatalı"});u.logIn(r,function(t){return t?(console.log(r,"Hatalı bir durum var"),i.status(401).json({ok:!1,msg:"Hatalı bir durum var"})):i.json({ok:!0})});break;default:i.status(406).json()}})(u,i,a)};function Ta(t){return(Ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _a(){var o=La(),t=o.m(_a),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,Na(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(_a=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new Ca(t,r)},AsyncIterator:Fa,async:function(t,r,e,n,o){return(u(r)?Ra:Aa)(i(t),r,e,n,o)},keys:Ia,values:Na}})()}function Na(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(Ta(t)+" is not iterable")}function Ia(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Aa(t,r,e,n,o){var u=Ra(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function Ra(t,r,e,n,o){return new Fa(La().w(t,r,e,n),o||Promise)}function Fa(a,c){var o;this.next||(Ga(Fa.prototype),Ga(Fa.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),Ga(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof Ca?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function La(){var m,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof v?r:v,r=Object.create(r.prototype);return Ga(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:m,a:y,f:y.bind(m,4),d:function(t,r){return i=t,a=0,c=m,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(d=a<2?m:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(d=i[t=a?t:"next"]){if(!(d=d.call(i,c)))throw TypeError("iterator result is not an object");if(!d.done)return d;c=d.value,a<2&&(a=0)}else 1===a&&(d=i.return)&&d.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=m}else if((d=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=m,a=1,c=t}finally{s=1}}return{value:d,done:l}}),!0),r;function y(t,r){for(a=t,c=r,d=0;!l&&s&&!e&&d<f.length;d++){var e,n=f[d],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=m):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function v(){}function o(){}function u(){}var d=Object.getPrototypeOf,t=[][r]?d(d([][r]())):(Ga(d={},r,function(){return this}),d),i=u.prototype=v.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,Ga(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return Ga(i,"constructor",o.prototype=u),Ga(u,"constructor",o),Ga(u,e,o.displayName="GeneratorFunction"),Ga(i),Ga(i,e,"Generator"),Ga(i,r,function(){return this}),Ga(i,"toString",function(){return"[object Generator]"}),(La=function(){return{w:n,m:a}})()}function Ga(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(Ga=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){Ga(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function Ca(t,r){this.v=t,this.k=r}function Ma(t){return(t=>{if(Array.isArray(t))return Da(t)})(t)||(t=>{if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)})(t)||((t,r)=>{var e;if(t)return"string"==typeof t?Da(t,r):"Map"===(e="Object"===(e={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Da(t,r):void 0})(t)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function Da(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function Ha(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}Vi.serializeUser(function(t,r){r(null,t)}),Vi.deserializeUser(function(t,r){"local"==t.role?pa(t.id).then(function(t){return r(null,t)}).catch(function(t){return r(t,null)}):"musteri"==t.role&&ma(t.id).then(function(t){return r(null,t)}).catch(function(t){return r(t,null)})});function Qa(t){Wa.get("/signin",Zr,function(t,r){return r.render("pages/signin.hbs",{title:"Signin",scriptname:"signin"})}),Wa.post("/signin",function(t,r,e){if(!t.body)return r.send("User Not found");e()},Ea),Wa.post("/signout",te),Wa.get("/login",ee,(()=>{a=_a().mark(function t(r,e){var n,o;return _a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:return n=t.sent,t.next=5,w();case 5:return o=t.sent,t.abrupt("return",e.render("pages/website/auth/login.hbs",{title:"Login",scriptname:process.env.WEBSCRIPTNAME,scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',menus:Ma(n),wpno:o.whatsappno}));case 7:case"end":return t.stop()}},t)});var a,e=function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){Ha(n,r,e,o,u,"next",t)}function u(t){Ha(n,r,e,o,u,"throw",t)}o(void 0)})};return function(t,r){return e.apply(this,arguments)}})()),Wa.post("/login",function(t,r,e){if(!t.body)return r.send("User Not found");e()},Pa),Wa.post("/logout",ne),t.use("/",Wa)}var Wa=r.Router({mergeParams:!0});function Ja(t){return(Ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function za(){var o=Ka(),t=o.m(za),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,Ya(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(za=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new Va(t,r)},AsyncIterator:Ua,async:function(t,r,e,n,o){return(u(r)?Ba:function(t,r,e,n,o){var u=Ba(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})})(i(t),r,e,n,o)},keys:qa,values:Ya}})()}function Ya(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(Ja(t)+" is not iterable")}function qa(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Ba(t,r,e,n,o){return new Ua(Ka().w(t,r,e,n),o||Promise)}function Ua(a,c){var o;this.next||($a(Ua.prototype),$a(Ua.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),$a(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof Va?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function Ka(){var m,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof v?r:v,r=Object.create(r.prototype);return $a(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:m,a:y,f:y.bind(m,4),d:function(t,r){return i=t,a=0,c=m,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(d=a<2?m:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(d=i[t=a?t:"next"]){if(!(d=d.call(i,c)))throw TypeError("iterator result is not an object");if(!d.done)return d;c=d.value,a<2&&(a=0)}else 1===a&&(d=i.return)&&d.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=m}else if((d=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=m,a=1,c=t}finally{s=1}}return{value:d,done:l}}),!0),r;function y(t,r){for(a=t,c=r,d=0;!l&&s&&!e&&d<f.length;d++){var e,n=f[d],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=m):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function v(){}function o(){}function u(){}var d=Object.getPrototypeOf,t=[][r]?d(d([][r]())):($a(d={},r,function(){return this}),d),i=u.prototype=v.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,$a(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return $a(i,"constructor",o.prototype=u),$a(u,"constructor",o),$a(u,e,o.displayName="GeneratorFunction"),$a(i),$a(i,e,"Generator"),$a(i,r,function(){return this}),$a(i,"toString",function(){return"[object Generator]"}),(Ka=function(){return{w:n,m:a}})()}function $a(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}($a=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){$a(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function Va(t,r){this.v=t,this.k=r}function Xa(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function Za(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){Xa(n,r,e,o,u,"next",t)}function u(t){Xa(n,r,e,o,u,"throw",t)}o(void 0)})}}var tc=r.Router({mergeParams:!0}),$i=(rc=new $i({usernameField:"email",passwordField:"sifre",passReqToCallback:!0},(()=>{var o=ja(va().mark(function t(r,e,n,o){var u,i;return va().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,la(e);case 3:if(u=t.sent){t.next=8;break}return t.abrupt("return",o(null,!1));case 8:return t.next=10,fa(n,u);case 10:if(!0===(i=t.sent))return t.abrupt("return",o(null,u,null));t.next=15;break;case 15:if("The password that you've entered is incorrect"===i)return t.abrupt("return",o(null,!1,i));t.next=19;break;case 19:return t.abrupt("return",o(null,!1,null));case 20:t.next=25;break;case 22:return t.prev=22,t.t0=t.catch(0),t.abrupt("return",o(null,!1,{message:t.t0}));case 25:case"end":return t.stop()}},t,null,[[0,22]])}));return function(t,r,e,n){return o.apply(this,arguments)}})()),$i=new $i({usernameField:"email",passwordField:"passw",passReqToCallback:!0},(()=>{var o=ja(va().mark(function t(r,e,n,o){var u,i,a,c;return va().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ya(e);case 3:if(u=t.sent){t.next=8;break}return t.abrupt("return",o(null,!1,{status:!1,msg:"Email adresi veya Şifre Yanlış"}));case 8:return t.next=10,fa(n,u);case 10:if(i=t.sent,a=u.role,c=u.onay_kod,!1===i)return t.abrupt("return",o(null,u,{status:!1,msg:"Email adresi veya Şifre Yanlış"}));t.next=16;break;case 16:if("The password that you've entered is incorrect"===i)return t.abrupt("return",o(null,!1,{status:!1,msg:"Email adresi veya Şifre Yanlış"}));t.next=20;break;case 20:if("-"!==c)return t.abrupt("return",o(null,!1,{status:!1,msg:"Email Adresinize gönderilen aktiviasyon mailinizi aktifleştirin"}));t.next=24;break;case 24:if("musteri"!==a)return t.abrupt("return",o(null,!1,{status:!1,msg:"Email adresi veya Şifre Yanlış"}));t.next=28;break;case 28:return t.abrupt("return",o(null,u,{status:!0,msg:"OK!"}));case 29:t.next=34;break;case 31:return t.prev=31,t.t0=t.catch(0),t.abrupt("return",o(null,!1,{message:t.t0}));case 34:case"end":return t.stop()}},t,null,[[0,31]])}));return function(t,r,e,n){return o.apply(this,arguments)}})()),Vi.use("musteri",$i),Vi.use("local",rc),require("body-parser")),rc=require("method-override"),c=require("cookie-parser"),ec=require("express-session"),y=require("compression"),nc=require("cors");let oc=require("isbot"),uc=require("sitemap");function ic(r,t){var e,n=Object.keys(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(r),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,e)),n}function ac(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ic(Object(o),!0).forEach(function(t){var r,e;r=n,e=o[t=t],(t=(t=>(t=((t,r)=>{if("object"!=wc(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);if("object"!=wc(e=e.call(t,r||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==wc(t)?t:t+""))(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):ic(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function cc(t){return(t=>{if(Array.isArray(t))return sc(t)})(t)||(t=>{if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)})(t)||((t,r)=>{var e;if(t)return"string"==typeof t?sc(t,r):"Map"===(e="Object"===(e={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?sc(t,r):void 0})(t)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function sc(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function fc(){var o=bc(),t=o.m(fc),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,lc(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(fc=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new dc(t,r)},AsyncIterator:mc,async:function(t,r,e,n,o){return(u(r)?yc:function(t,r,e,n,o){var u=yc(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})})(i(t),r,e,n,o)},keys:pc,values:lc}})()}function lc(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(wc(t)+" is not iterable")}function pc(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function yc(t,r,e,n,o){return new mc(bc().w(t,r,e,n),o||Promise)}function mc(a,c){var o;this.next||(vc(mc.prototype),vc(mc.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),vc(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof dc?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function bc(){var m,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof v?r:v,r=Object.create(r.prototype);return vc(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:m,a:y,f:y.bind(m,4),d:function(t,r){return i=t,a=0,c=m,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(d=a<2?m:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(d=i[t=a?t:"next"]){if(!(d=d.call(i,c)))throw TypeError("iterator result is not an object");if(!d.done)return d;c=d.value,a<2&&(a=0)}else 1===a&&(d=i.return)&&d.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=m}else if((d=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=m,a=1,c=t}finally{s=1}}return{value:d,done:l}}),!0),r;function y(t,r){for(a=t,c=r,d=0;!l&&s&&!e&&d<f.length;d++){var e,n=f[d],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=m):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function v(){}function o(){}function u(){}var d=Object.getPrototypeOf,t=[][r]?d(d([][r]())):(vc(d={},r,function(){return this}),d),i=u.prototype=v.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,vc(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return vc(i,"constructor",o.prototype=u),vc(u,"constructor",o),vc(u,e,o.displayName="GeneratorFunction"),vc(i),vc(i,e,"Generator"),vc(i,r,function(){return this}),vc(i,"toString",function(){return"[object Generator]"}),(bc=function(){return{w:n,m:a}})()}function vc(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(vc=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){vc(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function dc(t,r){this.v=t,this.k=r}function hc(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function gc(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){hc(n,r,e,o,u,"next",t)}function u(t){hc(n,r,e,o,u,"throw",t)}o(void 0)})}}function wc(t){return(wc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oc(t,r,e){r.locals.jsonLd=[],r.addJsonLd=function(t){"object"===wc(t)&&r.locals.jsonLd.push(t)},e()}var xc,Sc=r.Router({mergeParams:!0}),C=((0,t.config)({path:["const.env"]}),""),t=r(),kc=(t.use(nc({origin:!0})),process.env.PORT||3e3),C="https://soyluistif.com.tr";t.use(y()),t.use(c("secret")),t.use(ec({secret:"secret",resave:!0,saveUninitialized:!1,cookie:{maxAge:864e5}})),t.engine(".hbs",(0,v.engine)({defaultLayout:"main",extname:".hbs",layoutsDir:"views/layouts",partialsDir:["views/partials"],helpers:{calc:function(t){return t+7},list:function(t,r,e){return"<h3>"+e.fn({test:t,test1:r,label:"custom Helper List"})},IsEq:function(t,r,e){return t===r?e.fn(this):e.inverse(this)},BiggerThan:function(t,r){return 0<t.length?r.fn(this):r.inverse(this)},LessThan:function(t,r){return t.length<=0?r.fn(this):r.inverse(this)},Inc:function(t,r){return parseInt(t)+1},Json:function(t,r){return JSON.stringify(t)},DigitFract:function(t,r){return t.toFixed(r)},jsonld:function(t){return JSON.stringify(t,null,2)},stars:function(t){return 5===t?'<button data-ur="1" class="tio text-orange-500">star</button>\n    <button data-ur="2" class="tio text-orange-500">star</button>\n    <button data-ur="3" class="tio text-orange-500">star</button>\n    <button data-ur="4" class="tio text-orange-500">star</button>\n    <button data-ur="5" class="tio text-orange-500">star</button>':4===t?'<button data-ur="1" class="tio text-orange-500">star</button>\n    <button data-ur="2" class="tio text-orange-500">star</button>\n    <button data-ur="3" class="tio text-orange-500">star</button>\n    <button data-ur="4" class="tio text-orange-500">star</button>\n    <button data-ur="5" class="tio text-gray-500">star</button>':3===t?'<button data-ur="1" class="tio text-orange-500">star</button>\n    <button data-ur="2" class="tio text-orange-500">star</button>\n    <button data-ur="3" class="tio text-orange-500">star</button>\n    <button data-ur="4" class="tio text-gray-500">star</button>\n    <button data-ur="5" class="tio text-gray-500">star</button>':2===t?'<button data-ur="1" class="tio text-orange-500">star</button>\n    <button data-ur="2" class="tio text-orange-500">star</button>\n    <button data-ur="3" class="tio text-gray-500">star</button>\n    <button data-ur="4" class="tio text-gray-500">star</button>\n    <button data-ur="5" class="tio text-gray-500">star</button>':1===t?'<button data-ur="1" class="tio text-orange-500">star</button>\n    <button data-ur="2" class="tio text-gray-500">star</button>\n    <button data-ur="3" class="tio text-gray-500">star</button>\n    <button data-ur="4" class="tio text-gray-500">star</button>\n    <button data-ur="5" class="tio text-gray-500">star</button>':'<button data-ur="1" class="tio text-gray-500">star</button>\n    <button data-ur="2" class="tio text-gray-500">star</button>\n    <button data-ur="3" class="tio text-gray-500">star</button>\n    <button data-ur="4" class="tio text-gray-500">star</button>\n    <button data-ur="5" class="tio text-gray-500">star</button>'}}})),t.set("view engine",".hbs"),t.set("views","".concat(process.cwd(),"/views")),t.use(r.static("public")),t.use($i.urlencoded({limit:"100mb",extended:!0,parameterLimit:1e6})),t.use($i.json({limit:"100mb"})),t.use($i.text({limit:"100mb"})),t.use(rc("_method")),t.use(Vi.initialize()),t.use(Vi.session()),nc=t,xc="Örnek E-Ticaret",Sc.use(Oc),Sc.get("/sitemap.xml",(()=>{var n=gc(fc().mark(function t(r,e,n){var o,u;return fc().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.header("Content-Type","application/xml"),(o=new uc.SitemapStream({hostname:C})).write({url:"/",changefreq:"weekly",priority:1}),o.write({url:"/hakkimizda",changefreq:"never",priority:.9}),o.write({url:"/iletisim",changefreq:"never",priority:.9}),t.next=7,d.Query("SELECT url FROM kategori");case 7:return t.sent.forEach(function(t){o.write({url:"".concat(t.url),changefreq:"weekly",priority:.7})}),t.next=11,d.Query("SELECT url FROM urun");case 11:return t.sent.forEach(function(t){o.write({url:"/urun/".concat(t.url),changefreq:"weekly",priority:.8})}),o.end(),t.next=16,(0,uc.streamToPromise)(o);case 16:return u=t.sent,t.abrupt("return",e.send(u.toString()));case 18:case"end":return t.stop()}},t)}));return function(t,r,e){return n.apply(this,arguments)}})()),Sc.get("/kategori/:slug",(()=>{var n=gc(fc().mark(function t(r,e,n){var o,u,i,a,c,s,f,l,p,y,m,b,v;return fc().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=(0,oc.isbot)(r.get("user-agent")),o=r.params.slug,s)return e.addJsonLd({"@context":"https://schema.org","@type":"Organization",name:xc,url:C,logo:C+"/logo.png",contactPoint:[{"@type":"ContactPoint",telephone:"+905099129428",contactType:"customer service",areaServed:"TR",availableLanguage:["Turkish"]}],sameAs:["https://www.facebook.com/","https://www.instagram.com/","https://www.twitter.com/"]}),e.addJsonLd({"@context":"https://schema.org","@type":"WebSite",url:C+r.path,name:xc,potentialAction:{"@type":"SearchAction",target:C+"/kategori?search={search_term_string}","query-input":"required name=search_term_string"}}),s="SELECT id,parents,name FROM kategori WHERE url = '/kategori/"+o+"'",i=[],a=[],c=[],t.next=11,d.Query(s);t.next=29;break;case 11:if(!(s=t.sent)[0]){t.next=23;break}for(i=[s[0].id],u=s[0].name,s[0].parents&&(i=[].concat(cc(i),cc(JSON.parse(s[0].parents)))),f="",l=0;l<i.length;l++)p=i[l],l==i.length-1?f+=p:f+=p+",";return b="SELECT name,kod,url,resimler FROM urun WHERE parents LIKE '%"+f+"%'",t.next=21,d.Query(b);case 21:for(c=t.sent,y=0;y<c.length;y++)m=c[y],a.push({"@type":"ListItem",position:y+1,url:C+"/urun/"+m.url,name:m.kod});case 23:return e.addJsonLd({"@context":"https://schema.org","@type":"ItemList",name:u,itemListOrder:"https://schema.org/ItemListOrderAscending",numberOfItems:a.length,itemListElement:[].concat(a)}),t.next=26,d.Query("SELECT url,name FROM kategori WHERE parents IS NULL");case 26:return b=t.sent,v=c.map(function(t){return ac(ac({},t),{},{resim:t.resimler&&0<t.resimler.length?JSON.parse(t.resimler)[0]:"/assets/logosm.png"})}),t.abrupt("return",e.render("pages/seo/kategori.hbs",{title:u+" ÜRÜNLERİ",layout:"seo-main.hbs",jsonLDdata:e.locals.jsonLd,urunlerRs:v,ekmenu:b,image:C+"/assets/thumbnail.png",href:C+"/kategori/"+o,description:"Soylu İstif Makinaları A.Ş. Transpalet, istif makineleri ve kaldırma ekipmanlarının satışı, transpalet tekerleri ve yedek parça üretimi."}));case 29:n();case 30:case"end":return t.stop()}},t)}));return function(t,r,e){return n.apply(this,arguments)}})()),Sc.get("/urun/:slug",(()=>{var n=gc(fc().mark(function t(r,e,n){var o,u,i,a,c,s;return fc().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o="Soylu istif Makineleri",u=r.params.slug,i="Soylu İstif Makinaları A.Ş. Transpalet, istif makineleri ve kaldırma ekipmanlarının satışı, transpalet tekerleri ve yedek parça üretimi.",(0,oc.isbot)(r.get("user-agent")))return e.addJsonLd({"@context":"https://schema.org","@type":"Organization",name:o,url:C,logo:C+"/logo.png",contactPoint:[{"@type":"ContactPoint",telephone:"+905099129428",contactType:"customer service",areaServed:"TR",availableLanguage:["Turkish"]}],sameAs:["https://www.facebook.com/","https://www.instagram.com/","https://www.twitter.com/"]}),e.addJsonLd({"@context":"https://schema.org","@type":"WebSite",url:C+r.path,name:o,potentialAction:{"@type":"SearchAction",target:C+"/kategori?search={search_term_string}","query-input":"required name=search_term_string"}}),t.next=10,d.Query("SELECT * FROM urun WHERE url = '"+u+"'");t.next=18;break;case 10:return a=t.sent,(a=a[0])&&(e.addJsonLd({"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Ana Sayfa",item:C},{"@type":"ListItem",position:2,name:a.kod,item:C+"/urun/"+a.url}]}),i=a.aciklama,a.name,c=((t,r)=>{for(t=t.toString();t.length<r;)t="0"+t;return t})(parseFloat(a.fiyat),2),e.addJsonLd({"@context":"https://schema.org/","@type":"Product",name:a.kod,image:a.resimler?JSON.parse(a.resimler):["/assets/logo.png"],description:a.aciklama,sku:a.name,brand:{"@type":"Brand",name:a.kod},offers:{"@type":"Offer",url:C+"/urun/"+a.url,priceCurrency:a.currency,price:c,priceValidUntil:"2028-12-31",itemCondition:"https://schema.org/NewCondition",availability:"https://schema.org/InStock",seller:{"@type":"Organization",name:o}},aggregateRating:{"@type":"AggregateRating",ratingValue:"4.5",reviewCount:"128"},review:[{"@type":"Review",author:{"@type":"Person",name:"Ali"},datePublished:"2025-08-12",reviewBody:"Ürün çok rahat ve hızlı kargo.",name:"Harika spor ayakkabı",reviewRating:{"@type":"Rating",ratingValue:"5",bestRating:"5"}}]})),t.next=15,d.Query("SELECT url,name FROM kategori WHERE parents IS NULL");case 15:return c=t.sent,s=a.resimler?JSON.parse(a.resimler):[],t.abrupt("return",e.render("pages/seo/urun.hbs",{title:a.kod,layout:"seo-main.hbs",jsonLDdata:e.locals.jsonLd,ekmenu:c,image:C+(0<s.length?s[0]:"/assets/thumbnail.png"),href:C+"/urun/"+u,description:i,urun:a,resimler:s,firstResim:0<s.length?s[0]:"/assets/thumbnail.png"}));case 18:n();case 19:case"end":return t.stop()}},t)}));return function(t,r,e){return n.apply(this,arguments)}})()),Sc.get("/iletisim",(()=>{var n=gc(fc().mark(function t(r,e,n){var o,u;return fc().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o="Soylu İstif Makinaları",(0,oc.isbot)(r.get("user-agent")))return e.addJsonLd({"@context":"https://schema.org","@type":"Organization",name:o,url:C,logo:C+"/logo.png",contactPoint:[{"@type":"ContactPoint",telephone:"+905099129428",contactType:"customer service",areaServed:"TR",availableLanguage:["Turkish"]}],sameAs:["https://www.facebook.com/","https://www.instagram.com/","https://www.twitter.com/"]}),e.addJsonLd({"@context":"https://schema.org","@type":"WebSite",url:C+r.path,name:o,potentialAction:{"@type":"SearchAction",target:C+"/kategori?search={search_term_string}","query-input":"required name=search_term_string"}}),e.addJsonLd({"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Ana Sayfa",item:C},{"@type":"ListItem",position:2,name:"İletişim",item:C+"/iletisim"}]}),t.next=8,d.Query("SELECT url,name FROM kategori WHERE parents IS NULL");t.next=10;break;case 8:return u=t.sent,t.abrupt("return",e.render("pages/seo/iletisim.hbs",{title:"Hakkımızda | "+o,layout:"seo-main.hbs",jsonLDdata:e.locals.jsonLd,ekmenu:u,image:C+"/assets/thumbnail.png",href:C,description:"Soylu İstif Makinaları A.Ş. Transpalet, istif makineleri ve kaldırma ekipmanlarının satışı, transpalet tekerleri ve yedek parça üretimi."}));case 10:n();case 11:case"end":return t.stop()}},t)}));return function(t,r,e){return n.apply(this,arguments)}})()),Sc.get("/hakkimizda",(()=>{var n=gc(fc().mark(function t(r,e,n){var o,u;return fc().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o="Soylu İstif Makinaları",(0,oc.isbot)(r.get("user-agent")))return e.addJsonLd({"@context":"https://schema.org","@type":"Organization",name:o,url:C,logo:C+"/logo.png",contactPoint:[{"@type":"ContactPoint",telephone:"+905099129428",contactType:"customer service",areaServed:"TR",availableLanguage:["Turkish"]}],sameAs:["https://www.facebook.com/","https://www.instagram.com/","https://www.twitter.com/"]}),e.addJsonLd({"@context":"https://schema.org","@type":"WebSite",url:C+r.path,name:o,potentialAction:{"@type":"SearchAction",target:C+"/kategori?search={search_term_string}","query-input":"required name=search_term_string"}}),e.addJsonLd({"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Ana Sayfa",item:C},{"@type":"ListItem",position:2,name:"Hakkımızda",item:C+"/hakkimizda"}]}),t.next=8,d.Query("SELECT url,name FROM kategori WHERE parents IS NULL");t.next=10;break;case 8:return u=t.sent,t.abrupt("return",e.render("pages/seo/hakkimizda.hbs",{title:"İletişim | "+o,layout:"seo-main.hbs",jsonLDdata:e.locals.jsonLd,ekmenu:u,image:C+"/assets/thumbnail.png",href:C,description:"Soylu İstif Makinaları A.Ş. Transpalet, istif makineleri ve kaldırma ekipmanlarının satışı, transpalet tekerleri ve yedek parça üretimi."}));case 10:n();case 11:case"end":return t.stop()}},t)}));return function(t,r,e){return n.apply(this,arguments)}})()),Sc.get("/",(()=>{var n=gc(fc().mark(function t(r,e,n){var o,u,i,a,c,s,f;return fc().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o="Soylu İstif Makinaları",(0,oc.isbot)(r.get("user-agent")))return e.addJsonLd({"@context":"https://schema.org","@type":"Organization",name:o,url:C,logo:C+"/logo.png",contactPoint:[{"@type":"ContactPoint",telephone:"+905099129428",contactType:"customer service",areaServed:"TR",availableLanguage:["Turkish"]}],sameAs:["https://www.facebook.com/","https://www.instagram.com/","https://www.twitter.com/"]}),e.addJsonLd({"@context":"https://schema.org","@type":"WebSite",url:C+r.path,name:o,potentialAction:{"@type":"SearchAction",target:C+"/kategori?search={search_term_string}","query-input":"required name=search_term_string"}}),e.addJsonLd({"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Ana Sayfa",item:C}]}),t.next=9,d.Query("SELECT name,url,resimler FROM urun");t.next=18;break;case 9:for(u=u=t.sent,i=[],a=0;a<u.length;a++)c=u[a],i.push({"@type":"ListItem",position:a+1,url:C+"/urun/"+c.url,name:c.name});return e.addJsonLd({"@context":"https://schema.org","@type":"ItemList",name:"Tüm Ürünler",itemListOrder:"https://schema.org/ItemListOrderAscending",numberOfItems:u.length,itemListElement:[].concat(i)}),s=u.map(function(t){return ac(ac({},t),{},{resim:t.resimler&&0<t.resimler.length?JSON.parse(t.resimler)[0]:"/assets/logosm.png"})}),t.next=16,d.Query("SELECT url,name FROM kategori WHERE parents IS NULL");case 16:return f=t.sent,t.abrupt("return",e.render("pages/seo/home.hbs",{title:o,layout:"seo-main.hbs",jsonLDdata:e.locals.jsonLd,ekmenu:f,image:C+"/assets/thumbnail.png",href:C,urunlerRs:s,description:"Soylu İstif Makinaları A.Ş. Transpalet, istif makineleri ve kaldırma ekipmanlarının satışı, transpalet tekerleri ve yedek parça üretimi."}));case 18:n();case 19:case"end":return t.stop()}},t)}));return function(t,r,e){return n.apply(this,arguments)}})()),nc.use("/",Sc),Si(y=t),c=y,Ki.post("/template/get-txt",function(t,r){return t.body?(t=t.body.filepath,r.setHeader("Content-Type","text/plain"),t=(0,M.readFileSync)("".concat(process.cwd(),"/public/templates/").concat(t),"utf-8"),r.send(t)):r.json({msg:"Error!"})}),c.use("/",Ki),c=y,Wi.post("/get-il",qi),Wi.post("/get-iller",Yi),Wi.post("/get-ilce",Bi),Wi.post("/get-ilceler",zi),Wi.post("/get-mahalle",Ui),Wi.post("/get-mahalleler",Ji),c.use("/",Wi),c=y,Q.post("/stat/fileupload",D.single("file"),function(t,r){r.status(200).json({msg:"Ok!"})}),Q.post("/stat/filedelete",function(t,r){return t.body?(t=t.body.filepath,t=process.cwd()+"/public"+t,(0,H.existsSync)(t)&&(0,H.unlinkSync)(t),r.json({msg:"Kaldırıldı"})):r.json({msg:"Data Not found"})}),Q.post("/stat/folderdelete",function(t,r){return t.body?(t=t.body.folderpath,t=process.cwd()+"/public"+t,(0,H.existsSync)(t)&&(0,H.rmdirSync)(t,{recursive:!0}),r.json({msg:"Kaldırıldı"})):r.json({msg:"Data Not found"})}),c.use("/",Q),c=y,i.get("/",W),c.use("/",i),c=y,i.get("/hakkimizda",er),i.get("/iletisim",er),i.get("/kullanici-sozlesmesi",er),i.get("/mesafeli-satis-sozlesmesi",er),i.get("/teslimat-iade-sartlar",er),i.get("/siparis-takip",er),i.get("/havale-bildirimleri",er),c.use("/",i),oi(y),c=y,i.post("/kategori/search",Lr),i.get("/kategori/:kategori",Gr),c.use("/",i),ui(y),ai(y),ii(y),ci(y),Qa(y),c=y,i.get("/cust/chngepassw",hu),i.post("/cust/chngepasswactiv",wu),i.post("/cust/chngepassw",gu),i.get("/cust/sendactivation",du),i.post("/cust/sendactivation",vu),i.get("/cust/activation",bu),i.get("/uye-ol",Xo),i.post("/uye-ol",Zo),i.get("/cust/info",re,Mu),i.get("/cust/adress",re,Qu),i.get("/cust/order",re,zu),i.post("/cust/update-info",Hu),i.post("/cust/update-useradres",Du),i.get("/cust*",function(t,r){return r.redirect("/cust/info")}),c.use("/",i),tc.post("/templates/get-temp",(()=>{var e=Za(za().mark(function t(r,e){var n,o;return za().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.folderpath,o=process.cwd()+"/public/templates/"+o,o=(0,M.readFileSync)(o,"utf-8"),e.set("Content-Type","text/plain"),t.abrupt("return",e.send(o));case 8:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),xe(c=y),Me(c),rn(c),dn(c),co(c),c.use("/",i),tc.get("/ctrlpanel",e,(()=>{var e=Za(za().mark(function t(r,e){return za().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.render("pages/ctrlpanel/dashboard.hbs",{title:"Anasayfa",scriptname:process.env.CTRLPANELSCRIPTNAME,scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',user:r.user}));case 1:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),tc.get("/ctrlpanel**",function(t,r){return r.redirect("/ctrlpanel/")}),tc.get("**",(()=>{var e=Za(za().mark(function t(r,e){var n;return za().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:n=t.sent,e.status(404).render("pages/404.hbs",{title:"404 Not Found",scriptname:process.env.WEBSCRIPTNAME,scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',menus:n});case 4:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),y.use("/",tc),t.all("**",function(t,r){r.render("pages/404.hbs",{title:"Kontrol Panel",scriptname:"main"})}),t.listen(kc,function(){console.log("Server is starting at ".concat(kc))})})();