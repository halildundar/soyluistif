/*! For license information please see server.js.LICENSE.txt */
(()=>{var t=require("dotenv"),r=require("express"),m=require("express-handlebars");let C=require("node:fs");var M=require("multer");let L=require("fs");var Q=r.Router({mergeParams:!0}),H=M.diskStorage({destination:function(t,r,e){t=t.body.dest_path,t=process.cwd()+"/public"+t;(0,L.existsSync)(t)||(0,L.mkdirSync)(t,{recursive:!0}),e(null,t)},filename:function(t,r,e){e(null,t.body.filename+"."+r.originalname.split(".").pop())}}),M=M({storage:H});let W=require("mysql");function Y(t){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J(){var o=$(),t=o.m(J),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,q(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(J=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new X(t,r)},AsyncIterator:B,async:function(t,r,e,n,o){return(u(r)?z:U)(i(t),r,e,n,o)},keys:K,values:q}})()}function q(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(Y(t)+" is not iterable")}function K(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function U(t,r,e,n,o){var u=z(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function z(t,r,e,n,o){return new B($().w(t,r,e,n),o||Promise)}function B(a,c){var o;this.next||(d(B.prototype),d(B.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),d(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof X?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function $(){var v,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof m?r:m,r=Object.create(r.prototype);return d(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:v,a:y,f:y.bind(v,4),d:function(t,r){return i=t,a=0,c=v,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(h=a<2?v:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(h=i[t=a?t:"next"]){if(!(h=h.call(i,c)))throw TypeError("iterator result is not an object");if(!h.done)return h;c=h.value,a<2&&(a=0)}else 1===a&&(h=i.return)&&h.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=v}else if((h=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=v,a=1,c=t}finally{s=1}}return{value:h,done:l}}),!0),r;function y(t,r){for(a=t,c=r,h=0;!l&&s&&!e&&h<f.length;h++){var e,n=f[h],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=v):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function m(){}function o(){}function u(){}var h=Object.getPrototypeOf,t=[][r]?h(h([][r]())):(d(h={},r,function(){return this}),h),i=u.prototype=m.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,d(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return d(i,"constructor",o.prototype=u),d(u,"constructor",o),d(u,e,o.displayName="GeneratorFunction"),d(i),d(i,e,"Generator"),d(i,r,function(){return this}),d(i,"toString",function(){return"[object Generator]"}),($=function(){return{w:n,m:a}})()}function d(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(d=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){d(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function X(t,r){this.v=t,this.k=r}function Z(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function V(r,t){var e,n=Object.keys(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(r),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,e)),n}function tt(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?V(Object(e),!0).forEach(function(t){rt(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):V(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))})}return r}function rt(t,r,e){return(r=(t=>(t=((t,r)=>{if("object"!=Y(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);if("object"!=Y(e=e.call(t,r||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Y(t)?t:t+""))(r))in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}(0,t.config)({path:["const.env"]});var et=rt(rt(rt({connectionLimit:5,host:process.env.MYSQL_DB_HOST,user:process.env.MYSQL_DB_USERNAME1,password:process.env.MYSQL_DB_PASSWORD1,database:process.env.MYSQL_DB_NAME},"connectionLimit",20),"idleTimeoutMillis",3e4),"connectionTimeoutMillis",2e3),p=new function(t,r,e){var t=tt(tt({},et),{},{database:t,user:r,password:e}),u=W.createPool(t);return{Connection:function(){return new Promise(function(t,r){u.getConnection(function(e,o){e&&r(e);t({query:function(t,r){return new Promise(function(e,n){o.query(t,r,function(t,r){t&&n(t),e(r)})})},release:function(){return new Promise(function(t,r){e&&r(e),t(o.release())})}})})})},Query:function(t,r){return new Promise(function(n,o){u.query(t,r,function(t,r,e){t&&o(t),n(r)})})}}}(et.database,et.user,et.password);function nt(t){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}(()=>{a=J().mark(function t(){var r,e,n,o,u,i,a,c;return J().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.Query("SELECT * FROM `kategori`");case 2:r=t.sent,e=0;case 4:if(e<r.length){if((u=r[e].parents)&&u.includes('"')||u&&u.includes("'"))return u=u.replace(/"/g,""),t.next=10,p.Query("UPDATE `kategori` SET parents = ? WHERE id = ?",[u,r[e].id]);t.next=10}else t.next=13;break;case 10:e++,t.next=4;break;case 13:return t.next=15,p.Query("SELECT * FROM `urun`");case 15:n=t.sent,o=0;case 17:if(o<n.length){if((u=n[o].parents)&&u.includes('"')||u&&u.includes("'"))return u=u.replace(/"/g,""),t.next=23,p.Query("UPDATE `urun` SET parents = ? WHERE id = ?",[u,n[o].id]);t.next=23}else t.next=26;break;case 23:o++,t.next=17;break;case 26:i=[],n=function(t){return t.reduce(function(t,r){return(t.some(function(t){return t.name===r.name&&t.kod===r.kod})?i:t).push(r),t},[])}(n),console.log(i.length),a=0;case 31:if(a<i.length)return c=i[a],console.log("removedItem",c),t.next=36,p.Query("DELETE FROM `urun` WHERE id = ?",[c.id]);t.next=39;break;case 36:a++,t.next=31;break;case 39:console.log(n.length);case 40:case"end":return t.stop()}},t)});var a,t=function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){Z(n,r,e,o,u,"next",t)}function u(t){Z(n,r,e,o,u,"throw",t)}o(void 0)})};return function(){return t.apply(this,arguments)}})()();var ot=["id"];function ut(t,r){if(null==t)return{};var e,n=((t,r)=>{if(null==t)return{};var e,n={};for(e in t)if({}.hasOwnProperty.call(t,e)){if(-1!==r.indexOf(e))continue;n[e]=t[e]}return n})(t,r);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),u=0;u<o.length;u++)e=o[u],-1===r.indexOf(e)&&{}.propertyIsEnumerable.call(t,e)&&(n[e]=t[e]);return n}function it(t){return(t=>{if(Array.isArray(t))return at(t)})(t)||(t=>{if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)})(t)||((t,r)=>{var e;if(t)return"string"==typeof t?at(t,r):"Map"===(e="Object"===(e={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?at(t,r):void 0})(t)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function at(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function ct(r,t){var e,n=Object.keys(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(r),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,e)),n}function st(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(o),!0).forEach(function(t){var r,e;r=n,e=o[t=t],(t=(t=>(t=((t,r)=>{if("object"!=nt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);if("object"!=nt(e=e.call(t,r||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==nt(t)?t:t+""))(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):ct(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function s(){var o=bt(),t=o.m(s),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,ft(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(s=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new mt(t,r)},AsyncIterator:vt,async:function(t,r,e,n,o){return(u(r)?yt:pt)(i(t),r,e,n,o)},keys:lt,values:ft}})()}function ft(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(nt(t)+" is not iterable")}function lt(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function pt(t,r,e,n,o){var u=yt(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function yt(t,r,e,n,o){return new vt(bt().w(t,r,e,n),o||Promise)}function vt(a,c){var o;this.next||(w(vt.prototype),w(vt.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),w(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof mt?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function bt(){var v,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof m?r:m,r=Object.create(r.prototype);return w(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:v,a:y,f:y.bind(v,4),d:function(t,r){return i=t,a=0,c=v,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(h=a<2?v:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(h=i[t=a?t:"next"]){if(!(h=h.call(i,c)))throw TypeError("iterator result is not an object");if(!h.done)return h;c=h.value,a<2&&(a=0)}else 1===a&&(h=i.return)&&h.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=v}else if((h=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=v,a=1,c=t}finally{s=1}}return{value:h,done:l}}),!0),r;function y(t,r){for(a=t,c=r,h=0;!l&&s&&!e&&h<f.length;h++){var e,n=f[h],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=v):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function m(){}function o(){}function u(){}var h=Object.getPrototypeOf,t=[][r]?h(h([][r]())):(w(h={},r,function(){return this}),h),i=u.prototype=m.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,w(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return w(i,"constructor",o.prototype=u),w(u,"constructor",o),w(u,e,o.displayName="GeneratorFunction"),w(i),w(i,e,"Generator"),w(i,r,function(){return this}),w(i,"toString",function(){return"[object Generator]"}),(bt=function(){return{w:n,m:a}})()}function w(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(w=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){w(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function mt(t,r){this.v=t,this.k=r}function ht(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function n(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){ht(n,r,e,o,u,"next",t)}function u(t){ht(n,r,e,o,u,"throw",t)}o(void 0)})}}var dt=(()=>{var r=n(s().mark(function t(r){var e;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.Query("SELECT * FROM `slayt` WHERE tur = ? ORDER BY sira ASC ",[r]);case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}},t)}));return function(t){return r.apply(this,arguments)}})(),h=(()=>{var t=n(s().mark(function t(){var r;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.Query("SELECT * FROM `kategori` WHERE parents  IS NULL ORDER BY name ASC");case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}})(),wt=(()=>{var t=n(s().mark(function t(){var r;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.Query("SELECT * FROM `urun`  ORDER BY begenilme DESC LIMIT 20");case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}})(),gt=(()=>{var t=n(s().mark(function t(){var r;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.Query("SELECT * FROM `urun`  ORDER BY `alinan` DESC LIMIT 20");case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}})(),Ot=(()=>{var t=n(s().mark(function t(){var r;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.Query("SELECT * FROM `urun`  ORDER BY kayit_tarih DESC LIMIT 20");case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}})(),xt=(()=>{var r=n(s().mark(function t(r){var e;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.Query("SELECT name,url FROM `kategori` WHERE id IN ?",[[r]]);case 2:return e=t.sent,t.abrupt("return",e.map(function(t,r){t=st({},t);return r==e.length-1?t.last=1:t.last=0,t}));case 4:case"end":return t.stop()}},t)}));return function(t){return r.apply(this,arguments)}})(),jt=(()=>{var e=n(s().mark(function t(r,e){var n,o,u,i,a,c;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.Query("START TRANSACTION");case 2:return t.next=4,p.Query("SELECT id,parents FROM `kategori` WHERE url = ?",[r]);case 4:if(u=t.sent,u=u[0],n=u.id,o=[],o=(u=u.parents)?[].concat(it(JSON.parse(u)),[n]):[n],u=[],r.includes("/all")){t.next=29;break}if(e){t.next=16;break}return t.next=13,p.Query("SELECT * FROM `urun` WHERE JSON_CONTAINS(parents,?,'$')",[n]);case 13:u=t.sent,t.next=19;break;case 16:return t.next=18,p.Query("SELECT * FROM `urun` WHERE JSON_CONTAINS(parents,?,'$') AND  name LIKE '%"+e+"%' ",[n]);case 18:u=t.sent;case 19:return i=o.length,t.next=22,p.Query("SELECT * FROM `kategori` WHERE JSON_CONTAINS(JSON_EXTRACT(parents,'$[?]'),?,'$') AND JSON_LENGTH(parents, '$') = ?",[i-1,n,i]);case 22:if(0==(a=t.sent).length)return t.next=26,p.Query("SELECT * FROM `kategori` WHERE JSON_CONTAINS(JSON_EXTRACT(parents,'$[?]'),?,'$') AND JSON_LENGTH(parents, '$') = ?",[i-2,o[o.length-2],i-1]);t.next=27;break;case 26:a=t.sent;case 27:t.next=32;break;case 29:return t.next=31,p.Query("SELECT * FROM `urun` WHERE   name LIKE '%"+e+"%' ");case 31:u=t.sent;case 32:return t.next=34,xt(o);case 34:return c=t.sent,t.next=37,p.Query("COMMIT");case 37:return t.abrupt("return",{urunler:u,altKategoriler:a,breadcrumbs:c});case 38:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),St=(()=>{var r=n(s().mark(function t(r){var e;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r)return t.next=3,p.Query("SELECT * FROM `urun` WHERE  name LIKE '%"+r+"%'OR kod LIKE  '%"+r+"%'");t.next=7;break;case 3:e=t.sent,console.log("urunler",e),t.next=10;break;case 7:return t.next=9,p.Query("SELECT * FROM `urun`");case 9:e=t.sent;case 10:return t.abrupt("return",{urunler:e,altKategoriler:[],breadcrumbs:[]});case 11:case"end":return t.stop()}},t)}));return function(t){return r.apply(this,arguments)}})(),kt=(()=>{var r=n(s().mark(function t(r){var e;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.Query("SELECT * FROM `urun`  WHERE url = ?",[r]);case 2:return e=t.sent,t.abrupt("return",e[0]);case 4:case"end":return t.stop()}},t)}));return function(t){return r.apply(this,arguments)}})(),Et=(()=>{var r=n(s().mark(function t(r){return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.Query("DELETE FROM `siparis` WHERE id = ?",[r]);case 2:return t.sent,t.abrupt("return",res.json({msg:"OK!"}));case 4:case"end":return t.stop()}},t)}));return function(t){return r.apply(this,arguments)}})(),Pt=(()=>{var r=n(s().mark(function t(r){var e;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=st(st({},r),{},{paymentCard:JSON.stringify(r.paymentCard),buyer:JSON.stringify(r.buyer),shippingAddress:JSON.stringify(r.shippingAddress),billingAddress:JSON.stringify(r.billingAddress),basketItems:JSON.stringify(r.basketItems)}),t.next=3,p.Query("INSERT INTO `siparis` SET ?",[e]);case 3:return e=t.sent,t.abrupt("return",e);case 5:case"end":return t.stop()}},t)}));return function(t){return r.apply(this,arguments)}})(),Tt=(()=>{var r=n(s().mark(function t(r){var e,n;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.id,e=ut(r,ot),t.next=3,p.Query("UPDATE `siparis` SET ? WHERE id = "+n,[e]);case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}},t)}));return function(t){return r.apply(this,arguments)}})(),_t=(()=>{var r=n(s().mark(function t(r){var e;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.Query("SELECT * FROM `siparis` WHERE id = ?",[[r]]);case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}},t)}));return function(t){return r.apply(this,arguments)}})(),Nt=(()=>{var r=n(s().mark(function t(r){var e;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.Query("SELECT * FROM `siparis` WHERE paymentId IN ?",[[r]]);case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}},t)}));return function(t){return r.apply(this,arguments)}})(),It=(()=>{var t=n(s().mark(function t(){var r;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.Query("SELECT * FROM `eticsites`");case 2:return t.next=4,t.sent;case 4:if((r=t.sent)&&0<r.length)return t.abrupt("return",r.sort(function(t,r){return t.sira<r.sira?-1:1}));t.next=7;break;case 7:return t.abrupt("return",[]);case 8:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}})(),g=(()=>{var t=n(s().mark(function t(){var r;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.Query("SELECT * FROM `settings` WHERE id = 1");case 2:return r=t.sent,t.abrupt("return",r[0]);case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}})();function Gt(t){return(Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function At(t){return(t=>{if(Array.isArray(t))return Ft(t)})(t)||(t=>{if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)})(t)||((t,r)=>{var e;if(t)return"string"==typeof t?Ft(t,r):"Map"===(e="Object"===(e={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Ft(t,r):void 0})(t)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function Ft(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function Rt(){var o=Ht(),t=o.m(Rt),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,Dt(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(Rt=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new Wt(t,r)},AsyncIterator:Qt,async:function(t,r,e,n,o){return(u(r)?Lt:Mt)(i(t),r,e,n,o)},keys:Ct,values:Dt}})()}function Dt(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(Gt(t)+" is not iterable")}function Ct(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Mt(t,r,e,n,o){var u=Lt(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function Lt(t,r,e,n,o){return new Qt(Ht().w(t,r,e,n),o||Promise)}function Qt(a,c){var o;this.next||(O(Qt.prototype),O(Qt.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),O(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof Wt?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function Ht(){var v,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof m?r:m,r=Object.create(r.prototype);return O(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:v,a:y,f:y.bind(v,4),d:function(t,r){return i=t,a=0,c=v,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(h=a<2?v:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(h=i[t=a?t:"next"]){if(!(h=h.call(i,c)))throw TypeError("iterator result is not an object");if(!h.done)return h;c=h.value,a<2&&(a=0)}else 1===a&&(h=i.return)&&h.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=v}else if((h=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=v,a=1,c=t}finally{s=1}}return{value:h,done:l}}),!0),r;function y(t,r){for(a=t,c=r,h=0;!l&&s&&!e&&h<f.length;h++){var e,n=f[h],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=v):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function m(){}function o(){}function u(){}var h=Object.getPrototypeOf,t=[][r]?h(h([][r]())):(O(h={},r,function(){return this}),h),i=u.prototype=m.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,O(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return O(i,"constructor",o.prototype=u),O(u,"constructor",o),O(u,e,o.displayName="GeneratorFunction"),O(i),O(i,e,"Generator"),O(i,r,function(){return this}),O(i,"toString",function(){return"[object Generator]"}),(Ht=function(){return{w:n,m:a}})()}function O(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(O=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){O(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function Wt(t,r){this.v=t,this.k=r}function Yt(r,t){var e,n=Object.keys(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(r),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,e)),n}function Jt(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Yt(Object(o),!0).forEach(function(t){var r,e;r=n,e=o[t=t],(t=(t=>(t=((t,r)=>{if("object"!=Gt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);if("object"!=Gt(e=e.call(t,r||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Gt(t)?t:t+""))(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Yt(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function qt(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function Kt(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){qt(n,r,e,o,u,"next",t)}function u(t){qt(n,r,e,o,u,"throw",t)}o(void 0)})}}var Ut=(()=>{var t=Kt(Rt().mark(function t(){var r,e,n,o,u,i,a;return Rt().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,dt("homeleft");case 2:return r=t.sent,t.next=5,dt("homeright");case 5:return n=t.sent,e=r.map(function(t){return t.img_url}),n=n.map(function(t){return t.img_url}),t.next=10,h();case 10:return o=t.sent,t.next=13,wt();case 13:return u=(u=t.sent).map(function(t){var r=t.resimler?JSON.parse(t.resimler):[],t=Jt(Jt({},t),{},{kalan_stok:t.stok-t.alinan,resimler:r});return t.img_on=0<t.resimler.length?"/uploads"+t.resimler[0]:"/assets/urun/resim_yok.webp",t.img_arka=1<t.resimler.length?"/uploads"+t.resimler[1]:"/assets/urun/resim_yok.webp",t}),t.next=17,gt();case 17:return i=(i=t.sent).map(function(t){var r=t.resimler?JSON.parse(t.resimler):[],t=Jt(Jt({},t),{},{kalan_stok:t.stok-t.alinan,resimler:r});return t.img_on=0<t.resimler.length?"/uploads"+t.resimler[0]:"/assets/urun/resim_yok.webp",t.img_arka=1<t.resimler.length?"/uploads"+t.resimler[1]:"/assets/urun/resim_yok.webp",t}),t.next=21,Ot();case 21:return a=(a=t.sent).map(function(t){var r=t.resimler?JSON.parse(t.resimler):[],t=Jt(Jt({},t),{},{kalan_stok:t.stok-t.alinan,resimler:r});return t.img_on=0<t.resimler.length?"/uploads"+t.resimler[0]:"/assets/urun/resim_yok.webp",t.img_arka=1<t.resimler.length?"/uploads"+t.resimler[1]:"/assets/urun/resim_yok.webp",t}),t.abrupt("return",{enyeniler:a,coksatanlar:i,onecikanlar:u,imagesBg:e,imagesSm:n,mainMenus:o});case 24:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}})(),H=(()=>{var e=Kt(Rt().mark(function t(r,e){var n,o,u,i,a,c,s,f;return Rt().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ut();case 2:return c=t.sent,n=c.enyeniler,o=c.coksatanlar,u=c.onecikanlar,i=c.imagesBg,a=c.imagesSm,c=c.mainMenus,t.next=11,It();case 11:return s=t.sent,t.next=14,g();case 14:f=t.sent,e.render("pages/website/home/main.hbs",{title:"Anasayfa",scriptname:"main",scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',imagesBg:At(i),imagesSm:At(a),dizi:[0,1,2,3,4,5,6,7,8,9],menus:At(c),onecikanlar:u,coksatanlar:o,enyeniler:n,eticSiteler:s,wpno:f.whatsappno,musteri:r.user});case 16:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})();let zt=require("node:path");function Bt(t){return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $t(){var o=er(),t=o.m($t),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,Xt(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return($t=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new nr(t,r)},AsyncIterator:rr,async:function(t,r,e,n,o){return(u(r)?tr:Vt)(i(t),r,e,n,o)},keys:Zt,values:Xt}})()}function Xt(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(Bt(t)+" is not iterable")}function Zt(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Vt(t,r,e,n,o){var u=tr(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function tr(t,r,e,n,o){return new rr(er().w(t,r,e,n),o||Promise)}function rr(a,c){var o;this.next||(x(rr.prototype),x(rr.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),x(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof nr?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function er(){var v,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof m?r:m,r=Object.create(r.prototype);return x(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:v,a:y,f:y.bind(v,4),d:function(t,r){return i=t,a=0,c=v,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(h=a<2?v:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(h=i[t=a?t:"next"]){if(!(h=h.call(i,c)))throw TypeError("iterator result is not an object");if(!h.done)return h;c=h.value,a<2&&(a=0)}else 1===a&&(h=i.return)&&h.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=v}else if((h=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=v,a=1,c=t}finally{s=1}}return{value:h,done:l}}),!0),r;function y(t,r){for(a=t,c=r,h=0;!l&&s&&!e&&h<f.length;h++){var e,n=f[h],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=v):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function m(){}function o(){}function u(){}var h=Object.getPrototypeOf,t=[][r]?h(h([][r]())):(x(h={},r,function(){return this}),h),i=u.prototype=m.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,x(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return x(i,"constructor",o.prototype=u),x(u,"constructor",o),x(u,e,o.displayName="GeneratorFunction"),x(i),x(i,e,"Generator"),x(i,r,function(){return this}),x(i,"toString",function(){return"[object Generator]"}),(er=function(){return{w:n,m:a}})()}function x(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(x=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){x(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function nr(t,r){this.v=t,this.k=r}function or(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}var ur=(()=>{a=$t().mark(function t(r,e){var n,o,u,i,a,c,s;return $t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:return n=t.sent,t.next=5,It();case 5:return o=t.sent,u=(0,zt.join)(process.cwd(),"/views/pages/website/kurumsal"),t.next=9,g();case 9:i=t.sent,a="Not Found",s=c="","/hakkimizda"===r.path?(a=(0,C.readFileSync)((0,zt.join)(u,"hakkimizda.hbs")),c="hakkimizda",s="Hakkımızda"):"/iletisim"===r.path?(a=(0,C.readFileSync)((0,zt.join)(u,"iletisim.hbs")),c="iletisim",s="İletişim"):"/mesafeli-satis-sozlesmesi"===r.path?(a=(0,C.readFileSync)((0,zt.join)(u,"mesafeli-satis-sozlesmesi.hbs")),c="mesafeli-satis-sozlesmesi",s="Mesafeli Satış Sözleşmesi"):"/siparis-takip"===r.path?(a=(0,C.readFileSync)((0,zt.join)(u,"siparis-takip.hbs")),c="siparis-takip",s="Sipariş Takip"):"/havale-bildirimleri"===r.path&&(a=(0,C.readFileSync)((0,zt.join)(u,"havale-bildirimleri.hbs")),c="havale-bildirimleri",s="Havale Bildirimleri"),e.render("pages/website/kurumsal/main.hbs",{title:"Kurumsal",scriptname:"main",scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',temp:a,pagename:s,pageurl:c,menus:n,eticSiteler:o,wpno:i.whatsappno,musteri:r.user});case 15:case"end":return t.stop()}},t)});var a,e=function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){or(n,r,e,o,u,"next",t)}function u(t){or(n,r,e,o,u,"throw",t)}o(void 0)})};return function(t,r){return e.apply(this,arguments)}})();function ir(t){return(ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ar(){var o=yr(),t=o.m(ar),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,cr(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(ar=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new vr(t,r)},AsyncIterator:pr,async:function(t,r,e,n,o){return(u(r)?lr:fr)(i(t),r,e,n,o)},keys:sr,values:cr}})()}function cr(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(ir(t)+" is not iterable")}function sr(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function fr(t,r,e,n,o){var u=lr(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function lr(t,r,e,n,o){return new pr(yr().w(t,r,e,n),o||Promise)}function pr(a,c){var o;this.next||(j(pr.prototype),j(pr.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),j(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof vr?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function yr(){var v,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof m?r:m,r=Object.create(r.prototype);return j(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:v,a:y,f:y.bind(v,4),d:function(t,r){return i=t,a=0,c=v,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(h=a<2?v:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(h=i[t=a?t:"next"]){if(!(h=h.call(i,c)))throw TypeError("iterator result is not an object");if(!h.done)return h;c=h.value,a<2&&(a=0)}else 1===a&&(h=i.return)&&h.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=v}else if((h=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=v,a=1,c=t}finally{s=1}}return{value:h,done:l}}),!0),r;function y(t,r){for(a=t,c=r,h=0;!l&&s&&!e&&h<f.length;h++){var e,n=f[h],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=v):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function m(){}function o(){}function u(){}var h=Object.getPrototypeOf,t=[][r]?h(h([][r]())):(j(h={},r,function(){return this}),h),i=u.prototype=m.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,j(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return j(i,"constructor",o.prototype=u),j(u,"constructor",o),j(u,e,o.displayName="GeneratorFunction"),j(i),j(i,e,"Generator"),j(i,r,function(){return this}),j(i,"toString",function(){return"[object Generator]"}),(yr=function(){return{w:n,m:a}})()}function j(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(j=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){j(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function vr(t,r){this.v=t,this.k=r}function br(t){return(t=>{if(Array.isArray(t))return mr(t)})(t)||(t=>{if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)})(t)||((t,r)=>{var e;if(t)return"string"==typeof t?mr(t,r):"Map"===(e="Object"===(e={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?mr(t,r):void 0})(t)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function mr(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function hr(r,t){var e,n=Object.keys(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(r),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,e)),n}function dr(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?hr(Object(o),!0).forEach(function(t){var r,e;r=n,e=o[t=t],(t=(t=>(t=((t,r)=>{if("object"!=ir(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);if("object"!=ir(e=e.call(t,r||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==ir(t)?t:t+""))(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):hr(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function wr(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}var gr=(()=>{a=ar().mark(function t(r,e){var n,o,u,i,a,c,s;return ar().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.params.urunurl,u=[],t.next=4,h();case 4:return a=t.sent,t.next=7,It();case 7:return c=t.sent,t.next=10,g();case 10:if(s=t.sent,n)return t.next=14,kt(n);t.next=26;break;case 14:return(o=t.sent).resimler=o.resimler&&JSON.parse(o.resimler),o.aciklama=o.aciklama&&JSON.parse(o.aciklama),o.garanti_aciklama=o.garanti_aciklama&&JSON.parse(o.garanti_aciklama),o.youmlar=o.youmlar&&JSON.parse(o.youmlar),u=JSON.parse(o.parents),t.next=22,xt(u);case 22:u=t.sent,i=u[u.length-1],(u=u.map(function(t,r){return dr(dr({},t),{},{last:r+1})})).push({name:o.name,url:"/urun/"+o.url,last:0});case 26:e.render("pages/website/urun.hbs",{title:"Ürün",scriptname:"main",scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',urun:o,breadcrumbs:u,lastkategori:i,menus:br(a),eticSiteler:c,wpno:s.whatsappno,musteri:r.user});case 27:case"end":return t.stop()}},t)});var a,e=function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){wr(n,r,e,o,u,"next",t)}function u(t){wr(n,r,e,o,u,"throw",t)}o(void 0)})};return function(t,r){return e.apply(this,arguments)}})();function Or(t){return(Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xr(t){return(t=>{if(Array.isArray(t))return jr(t)})(t)||(t=>{if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)})(t)||((t,r)=>{var e;if(t)return"string"==typeof t?jr(t,r):"Map"===(e="Object"===(e={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?jr(t,r):void 0})(t)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function jr(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function Sr(r,t){var e,n=Object.keys(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(r),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,e)),n}function kr(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Sr(Object(o),!0).forEach(function(t){var r,e;r=n,e=o[t=t],(t=(t=>(t=((t,r)=>{if("object"!=Or(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);if("object"!=Or(e=e.call(t,r||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Or(t)?t:t+""))(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Sr(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function Er(){var o=Gr(),t=o.m(Er),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,Pr(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(Er=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new Ar(t,r)},AsyncIterator:Ir,async:function(t,r,e,n,o){return(u(r)?Nr:_r)(i(t),r,e,n,o)},keys:Tr,values:Pr}})()}function Pr(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(Or(t)+" is not iterable")}function Tr(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function _r(t,r,e,n,o){var u=Nr(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function Nr(t,r,e,n,o){return new Ir(Gr().w(t,r,e,n),o||Promise)}function Ir(a,c){var o;this.next||(S(Ir.prototype),S(Ir.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),S(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof Ar?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function Gr(){var v,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof m?r:m,r=Object.create(r.prototype);return S(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:v,a:y,f:y.bind(v,4),d:function(t,r){return i=t,a=0,c=v,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(h=a<2?v:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(h=i[t=a?t:"next"]){if(!(h=h.call(i,c)))throw TypeError("iterator result is not an object");if(!h.done)return h;c=h.value,a<2&&(a=0)}else 1===a&&(h=i.return)&&h.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=v}else if((h=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=v,a=1,c=t}finally{s=1}}return{value:h,done:l}}),!0),r;function y(t,r){for(a=t,c=r,h=0;!l&&s&&!e&&h<f.length;h++){var e,n=f[h],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=v):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function m(){}function o(){}function u(){}var h=Object.getPrototypeOf,t=[][r]?h(h([][r]())):(S(h={},r,function(){return this}),h),i=u.prototype=m.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,S(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return S(i,"constructor",o.prototype=u),S(u,"constructor",o),S(u,e,o.displayName="GeneratorFunction"),S(i),S(i,e,"Generator"),S(i,r,function(){return this}),S(i,"toString",function(){return"[object Generator]"}),(Gr=function(){return{w:n,m:a}})()}function S(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(S=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){S(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function Ar(t,r){this.v=t,this.k=r}function Fr(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function Rr(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){Fr(n,r,e,o,u,"next",t)}function u(t){Fr(n,r,e,o,u,"throw",t)}o(void 0)})}}var Dr=(()=>{var t=Rr(Er().mark(function t(){var r;return Er().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}})(),Cr=(()=>{var e=Rr(Er().mark(function t(r,e){var n,o,u,i,a,c;return Er().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Dr();case 2:return n=t.sent,t.next=5,It();case 5:return o=t.sent,t.next=8,g();case 8:return u=t.sent,i=r.query.search,t.next=12,St(i);case 12:i=t.sent,a=i.urunler,c=i.breadcrumbs,a=a.map(function(t){return t.resimler=JSON.parse(t.resimler),kr(kr({},t),{},{resim_on:t.resimler&&0<t.resimler.length?"/uploads"+t.resimler[0]:"/assets/urun/resim_yok.webp",resim_arka:t.resimler&&1<t.resimler.length?"/uploads"+t.resimler[1]:"/assets/urun/resim_yok.webp"})}),e.render("pages/website/kategori.hbs",{title:"Kategori",scriptname:"main",scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',urunler:a||[],altKategoriler:n,menus:xr(n),breadcrumbs:c,dizi1:[0,1,2,3,4,5,6,7,8,9],eticSiteler:o,wpno:u.whatsappno,musteri:r.user});case 18:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),Mr=(()=>{var e=Rr(Er().mark(function t(r,e){var n,o,u,i,a,c;return Er().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Dr();case 2:return n=t.sent,t.next=5,It();case 5:if(o=t.sent,"/kategori/"==r.path)return t.abrupt("return",e.redirect("/kategori/all"));t.next=8;break;case 8:return u=r.query.search,t.next=11,jt(r.path,u);case 11:u=t.sent,i=u.urunler,a=u.altKategoriler,c=u.breadcrumbs,i=i.map(function(t){return t.resimler=JSON.parse(t.resimler),kr(kr({},t),{},{resim_on:t.resimler&&0<t.resimler.length?"/uploads"+t.resimler[0]:"/assets/urun/resim_yok.webp",resim_arka:t.resimler&&1<t.resimler.length?"/uploads"+t.resimler[1]:"/assets/urun/resim_yok.webp"})}),e.render("pages/website/kategori.hbs",{title:"Kategori",scriptname:"main",scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',urunler:i||[],altKategoriler:a||[],menus:xr(n),breadcrumbs:c,dizi1:[0,1,2,3,4,5,6,7,8,9],eticSiteler:o,musteri:r.user});case 17:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})();function Lr(t){return(Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qr(r,t){var e,n=Object.keys(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(r),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,e)),n}function Hr(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Qr(Object(o),!0).forEach(function(t){var r,e;r=n,e=o[t=t],(t=(t=>(t=((t,r)=>{if("object"!=Lr(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);if("object"!=Lr(e=e.call(t,r||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Lr(t)?t:t+""))(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Qr(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function Wr(){var o=zr(),t=o.m(Wr),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,Yr(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(Wr=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new Br(t,r)},AsyncIterator:Ur,async:function(t,r,e,n,o){return(u(r)?Kr:qr)(i(t),r,e,n,o)},keys:Jr,values:Yr}})()}function Yr(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(Lr(t)+" is not iterable")}function Jr(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function qr(t,r,e,n,o){var u=Kr(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function Kr(t,r,e,n,o){return new Ur(zr().w(t,r,e,n),o||Promise)}function Ur(a,c){var o;this.next||(k(Ur.prototype),k(Ur.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),k(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof Br?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function zr(){var v,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof m?r:m,r=Object.create(r.prototype);return k(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:v,a:y,f:y.bind(v,4),d:function(t,r){return i=t,a=0,c=v,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(h=a<2?v:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(h=i[t=a?t:"next"]){if(!(h=h.call(i,c)))throw TypeError("iterator result is not an object");if(!h.done)return h;c=h.value,a<2&&(a=0)}else 1===a&&(h=i.return)&&h.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=v}else if((h=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=v,a=1,c=t}finally{s=1}}return{value:h,done:l}}),!0),r;function y(t,r){for(a=t,c=r,h=0;!l&&s&&!e&&h<f.length;h++){var e,n=f[h],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=v):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function m(){}function o(){}function u(){}var h=Object.getPrototypeOf,t=[][r]?h(h([][r]())):(k(h={},r,function(){return this}),h),i=u.prototype=m.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,k(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return k(i,"constructor",o.prototype=u),k(u,"constructor",o),k(u,e,o.displayName="GeneratorFunction"),k(i),k(i,e,"Generator"),k(i,r,function(){return this}),k(i,"toString",function(){return"[object Generator]"}),(zr=function(){return{w:n,m:a}})()}function k(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(k=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){k(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function Br(t,r){this.v=t,this.k=r}function $r(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function Xr(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){$r(n,r,e,o,u,"next",t)}function u(t){$r(n,r,e,o,u,"throw",t)}o(void 0)})}}var Zr=(()=>{var e=Xr(Wr().mark(function t(r,e){var n,o,u;return Wr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:return n=t.sent,t.next=5,It();case 5:return o=t.sent,t.next=8,g();case 8:u=t.sent,e.render("pages/website/sepet/main.hbs",{title:"Sepet",scriptname:"main",scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',menus:n,eticSiteler:o,wpno:u.whatsappno,musteri:r.user});case 10:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),Vr=(()=>{var e=Xr(Wr().mark(function t(r,e){var n,o,u,i;return Wr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:return n=t.sent,t.next=5,It();case 5:return o=t.sent,t.next=8,g();case 8:u=t.sent,i=Hr(Hr({},r.user),{},{adres:JSON.parse(r.user.adres)}),e.render("pages/website/sepet/odeme.hbs",{title:"Ödeme",scriptname:"main",scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',menus:n,eticSiteler:o,wpno:u.whatsappno,musteri:i});case 11:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),te=(()=>{var e=Xr(Wr().mark(function t(r,e){var n,o,u,i;return Wr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:return n=t.sent,t.next=5,It();case 5:return o=t.sent,t.next=8,g();case 8:u=t.sent,i=Hr(Hr({},r.user),{},{adres:JSON.parse(r.user.adres)}),e.render("pages/website/sepet/siparis-bilgi.hbs",{title:"Sipariş Bilgi",scriptname:"main",scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',menus:n,eticSiteler:o,wpno:u.whatsappno,musteri:i});case 11:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})();var e=function(t,r,e){return!t.isAuthenticated()||"musteri"===t.user.role?r.redirect("/signin"):void e()},re=function(t,r,e){if(t.isAuthenticated()&&"local"==t.user.role)return r.redirect("/ctrlpanel");e()},ee=function(t,r){t.session.destroy(function(t){return r.json({ok:!0})})},ne=function(t,r,e){if(!t.isAuthenticated())return r.redirect("/login");e()},oe=function(t,r,e){if(t.isAuthenticated()&&"musteri"==t.user.role)return r.redirect("/");e()},ue=function(t,r){t.session.destroy(function(t){return r.json({ok:!0})})};function ie(t){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var ae=["id"],ce=["id"],se=["id"];function fe(r,t){var e,n=Object.keys(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(r),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,e)),n}function le(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(o),!0).forEach(function(t){var r,e;r=n,e=o[t=t],(t=(t=>(t=((t,r)=>{if("object"!=ie(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);if("object"!=ie(e=e.call(t,r||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==ie(t)?t:t+""))(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):fe(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function pe(t,r){var e,n,o,u,i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(i)return o=!(n=!0),{s:function(){i=i.call(t)},n:function(){var t=i.next();return n=t.done,t},e:function(t){o=!0,e=t},f:function(){try{n||null==i.return||i.return()}finally{if(o)throw e}}};if(Array.isArray(t)||(i=((t,r)=>{var e;if(t)return"string"==typeof t?ye(t,r):"Map"===(e="Object"===(e={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?ye(t,r):void 0})(t))||r&&t&&"number"==typeof t.length)return i&&(t=i),u=0,{s:r=function(){},n:function(){return u>=t.length?{done:!0}:{done:!1,value:t[u++]}},e:function(t){throw t},f:r};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ye(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function ve(t,r){if(null==t)return{};var e,n=((t,r)=>{if(null==t)return{};var e,n={};for(e in t)if({}.hasOwnProperty.call(t,e)){if(-1!==r.indexOf(e))continue;n[e]=t[e]}return n})(t,r);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),u=0;u<o.length;u++)e=o[u],-1===r.indexOf(e)&&{}.propertyIsEnumerable.call(t,e)&&(n[e]=t[e]);return n}function y(){var o=ge(),t=o.m(y),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,be(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(y=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new Oe(t,r)},AsyncIterator:we,async:function(t,r,e,n,o){return(u(r)?de:he)(i(t),r,e,n,o)},keys:me,values:be}})()}function be(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(ie(t)+" is not iterable")}function me(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function he(t,r,e,n,o){var u=de(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function de(t,r,e,n,o){return new we(ge().w(t,r,e,n),o||Promise)}function we(a,c){var o;this.next||(E(we.prototype),E(we.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),E(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof Oe?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function ge(){var v,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof m?r:m,r=Object.create(r.prototype);return E(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:v,a:y,f:y.bind(v,4),d:function(t,r){return i=t,a=0,c=v,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(h=a<2?v:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(h=i[t=a?t:"next"]){if(!(h=h.call(i,c)))throw TypeError("iterator result is not an object");if(!h.done)return h;c=h.value,a<2&&(a=0)}else 1===a&&(h=i.return)&&h.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=v}else if((h=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=v,a=1,c=t}finally{s=1}}return{value:h,done:l}}),!0),r;function y(t,r){for(a=t,c=r,h=0;!l&&s&&!e&&h<f.length;h++){var e,n=f[h],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=v):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function m(){}function o(){}function u(){}var h=Object.getPrototypeOf,t=[][r]?h(h([][r]())):(E(h={},r,function(){return this}),h),i=u.prototype=m.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,E(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return E(i,"constructor",o.prototype=u),E(u,"constructor",o),E(u,e,o.displayName="GeneratorFunction"),E(i),E(i,e,"Generator"),E(i,r,function(){return this}),E(i,"toString",function(){return"[object Generator]"}),(ge=function(){return{w:n,m:a}})()}function E(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(E=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){E(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function Oe(t,r){this.v=t,this.k=r}function xe(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function o(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){xe(n,r,e,o,u,"next",t)}function u(t){xe(n,r,e,o,u,"throw",t)}o(void 0)})}}var u=r.Router({mergeParams:!0}),je=(()=>{var e=o(y().mark(function t(r,e){return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.render("pages/ctrlpanel/urun.hbs",{title:"Ürünler",scriptname:"ctrlpanel-main",styles:'<link rel="stylesheet" href="https://code.jquery.com/ui/1.14.1/themes/base/jquery-ui.css"> <link\n  href="https://cdn.jsdelivr.net/npm/quill@2/dist/quill.snow.css"\n  rel="stylesheet"\n/>\n<link\n  href="https://cdn.jsdelivr.net/npm/quill@2/dist/quill.bubble.css"\n  rel="stylesheet"\n/>',scripts:'  <script defer src="https://code.jquery.com/ui/1.14.1/jquery-ui.js"><\/script> \n    <script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script> \n    <script defer src="https://cdn.jsdelivr.net/npm/quill@2/dist/quill.js"><\/script>',user:r.user});case 1:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),Se=(()=>{var r=o(y().mark(function t(r){return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u.post("/ctrlpanel/kategori/add-item",e,(()=>{var e=o(y().mark(function t(r,e){var n;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,p.Query("INSERT INTO `kategori` SET ?",[n]);case 5:return t.sent,t.abrupt("return",e.json({msg:"Ok!"}));case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),u.post("/ctrlpanel/kategori/update-item",e,(()=>{var e=o(y().mark(function t(r,e){var n,o,u;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.id,(u=ve(n,ae)).parents=u.parents?JSON.stringify(u.parents):null,t.next=7,p.Query("UPDATE `kategori` SET ? where id = "+o,[u]);case 7:return t.sent,t.abrupt("return",e.json({msg:"Ok!"}));case 9:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),u.post("/ctrlpanel/kategori/get-all-items",(()=>{var e=o(y().mark(function t(r,e){var n;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,p.Query("SELECT * FROM `kategori`");case 5:return n=t.sent,t.abrupt("return",e.json(n));case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),u.post("/ctrlpanel/kategori/delete-items",e,(()=>{var e=o(y().mark(function t(r,e){var n,o,u,i;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.ids,t.next=6,p.Query("START TRANSACTION");case 6:u=0;case 7:if(u<o.length)return i=o[u],t.next=11,p.Query("DELETE FROM `kategori` WHERE id = "+i);t.next=14;break;case 11:u++,t.next=7;break;case 14:return t.next=16,p.Query("COMMIT");case 16:return t.abrupt("return",e.json({msg:"OK!"}));case 17:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),u.post("/ctrlpanel/urun/add-urun",e,(()=>{var e=o(y().mark(function t(r,e){var n;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,p.Query("INSERT INTO `urun` SET ?",[n]);case 5:return t.abrupt("return",e.json({msg:"OK!"}));case 6:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),u.post("/ctrlpanel/urun/update-urun",e,(()=>{var e=o(y().mark(function t(r,e){var n,o,u;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.id,u=ve(n,ce),t.next=6,p.Query("UPDATE `urun` SET ? WHERE id ="+o,[u]);case 6:return t.abrupt("return",e.json({msg:"OK!"}));case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),u.post("/ctrlpanel/urun/delete-urun-from-kategori",e,(()=>{var e=o(y().mark(function t(r,e){var n,o,u,i,a,c,s,f,l;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.ids,t.next=6,p.Query("START TRANSACTION");case 6:return t.next=8,p.Query("SELECT id,resimler FROM `urun` WHERE JSON_CONTAINS(parents,?,'$')",[[o]]);case 8:u=t.sent,i=0;case 10:if(!(i<u.length)){t.next=19;break}for(a=u[i].id,c=u[i].resimler?JSON.parse(u[i].resimler):[],s=0;s<c.length;s++)f="/uploads"+c[s],l=f.split("/").pop(),f=f.replace(l,""),l=process.cwd()+"/public"+f,(0,L.existsSync)(l)&&(0,L.rmdirSync)(l,{recursive:!0});return t.next=16,p.Query("DELETE FROM `urun` WHERE id = "+a);case 16:i++,t.next=10;break;case 19:return t.next=21,p.Query("COMMIT");case 21:return t.abrupt("return",e.json({msg:"OK!"}));case 22:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),u.post("/ctrlpanel/urun/delete-urun",e,(()=>{var e=o(y().mark(function t(r,e){var n,o;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.id,t.next=6,p.Query("DELETE FROM `urun` WHERE id ="+o);case 6:return t.abrupt("return",e.json({msg:"OK!"}));case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),u.post("/ctrlpanel/urun/get-urunler",(()=>{var e=o(y().mark(function t(r,e){var n,o;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=(o=n.kategori_ids).replace(/[\[\]]/g,""),t.next=7,p.Query("SELECT * FROM `urun` WHERE `parents` LIKE  '%"+o+"%'");case 7:return o=t.sent,t.abrupt("return",e.json(o));case 9:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),u.post("/ctrlpanel/urun/get-urun-resimler",(()=>{var e=o(y().mark(function t(r,e){var n,o;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.id,t.next=6,p.Query("SELECT resimler FROM `urun` WHERE id = ?",[o]);case 6:return o=t.sent,t.abrupt("return",e.json(o[0].resimler));case 8:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),u.post("/ctrlpanel/urun/get-urun",(()=>{var e=o(y().mark(function t(r,e){var n,o;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.id,t.next=6,p.Query("SELECT * FROM `urun` WHERE id = ?",[o]);case 6:return o=t.sent,t.abrupt("return",e.json(o[0]));case 8:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),u.get("/ctrlpanel/urunler",e,je),u.post("/urun/update-urun-goruntu",(()=>{var e=o(y().mark(function t(r,e){var n,o,u;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.id,u=ve(n,se),t.next=6,p.Query("UPDATE `urun` SET ? WHERE id = "+o,[u]);case 6:return t.abrupt("return",e.json({msg:"Ok!"}));case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),u.post("/urun/update-stok",e,(()=>{var e=o(y().mark(function t(r,e){var n,o,u,i;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.id,u=n.alinan,t.next=6,p.Query("SELECT alinan,stok_dusme_durum FROM `urun` WHERE id = "+o);case 6:if(i=t.sent,"düşürülmedi"==i[0].stok_dusme_durum)return u=parseInt(u)+i[0].alinan,t.next=13,p.Query("UPDATE `urun` SET `alinan` = ?,`stok_dusme_durum` = ? WHERE id = "+o,[u,"düşürüldü"]);t.next=13;break;case 13:return t.abrupt("return",e.json({msg:"Ok!"}));case 14:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),u.post("/ctrlpanel/urun/insert-multiple-urun",(()=>{var e=o(y().mark(function t(r,e){var n,o,u,i;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.arrayData,t.next=6,p.Query("START TRANSACTION");case 6:t.sent,u=pe(o),t.prev=8,u.s();case 10:if((i=u.n()).done){t.next=16;break}return i=i.value,t.next=14,p.Query("INSERT INTO `urun` set ?",[le({},i)]);case 14:t.next=10;break;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(8),u.e(t.t0);case 21:return t.prev=21,u.f(),t.finish(21);case 24:return t.next=26,p.Query("COMMIT");case 26:return t.sent,t.abrupt("return",e.json({status:!0,msg:"Ok!"}));case 28:case"end":return t.stop()}},t,null,[[8,18,21,24]])}));return function(t,r){return e.apply(this,arguments)}})()),t.abrupt("return",r.use("/",u));case 16:case"end":return t.stop()}},t)}));return function(t){return r.apply(this,arguments)}})();function ke(t){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Ee=["id"];function Pe(t,r){if(null==t)return{};var e,n=((t,r)=>{if(null==t)return{};var e,n={};for(e in t)if({}.hasOwnProperty.call(t,e)){if(-1!==r.indexOf(e))continue;n[e]=t[e]}return n})(t,r);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),u=0;u<o.length;u++)e=o[u],-1===r.indexOf(e)&&{}.propertyIsEnumerable.call(t,e)&&(n[e]=t[e]);return n}function Te(){var o=Fe(),t=o.m(Te),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,_e(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(Te=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new Re(t,r)},AsyncIterator:Ae,async:function(t,r,e,n,o){return(u(r)?Ge:Ie)(i(t),r,e,n,o)},keys:Ne,values:_e}})()}function _e(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(ke(t)+" is not iterable")}function Ne(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Ie(t,r,e,n,o){var u=Ge(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function Ge(t,r,e,n,o){return new Ae(Fe().w(t,r,e,n),o||Promise)}function Ae(a,c){var o;this.next||(P(Ae.prototype),P(Ae.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),P(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof Re?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function Fe(){var v,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof m?r:m,r=Object.create(r.prototype);return P(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:v,a:y,f:y.bind(v,4),d:function(t,r){return i=t,a=0,c=v,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(h=a<2?v:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(h=i[t=a?t:"next"]){if(!(h=h.call(i,c)))throw TypeError("iterator result is not an object");if(!h.done)return h;c=h.value,a<2&&(a=0)}else 1===a&&(h=i.return)&&h.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=v}else if((h=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=v,a=1,c=t}finally{s=1}}return{value:h,done:l}}),!0),r;function y(t,r){for(a=t,c=r,h=0;!l&&s&&!e&&h<f.length;h++){var e,n=f[h],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=v):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function m(){}function o(){}function u(){}var h=Object.getPrototypeOf,t=[][r]?h(h([][r]())):(P(h={},r,function(){return this}),h),i=u.prototype=m.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,P(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return P(i,"constructor",o.prototype=u),P(u,"constructor",o),P(u,e,o.displayName="GeneratorFunction"),P(i),P(i,e,"Generator"),P(i,r,function(){return this}),P(i,"toString",function(){return"[object Generator]"}),(Fe=function(){return{w:n,m:a}})()}function P(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(P=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){P(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function Re(t,r){this.v=t,this.k=r}function De(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function Ce(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){De(n,r,e,o,u,"next",t)}function u(t){De(n,r,e,o,u,"throw",t)}o(void 0)})}}var Me=r.Router({mergeParams:!0}),Le=(()=>{var e=Ce(Te().mark(function t(r,e){return Te().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.render("pages/ctrlpanel/slaytlar.hbs",{title:"Slaytlar",scriptname:"ctrlpanel-main",styles:'<link rel="stylesheet" href="https://code.jquery.com/ui/1.14.1/themes/base/jquery-ui.css">',scripts:'  <script defer src="https://code.jquery.com/ui/1.14.1/jquery-ui.js"><\/script> \n    <script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',user:r.user});case 1:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),Qe=function(t){return Me.post("/ctrlpanel/slaytlar/add-item",e,(()=>{var e=Ce(Te().mark(function t(r,e){var n;return Te().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,p.Query("INSERT INTO `slayt` SET ?",[n]);case 5:return t.sent,t.abrupt("return",e.json({msg:"Ok!"}));case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),Me.post("/ctrlpanel/slaytlar/delete-item",e,(()=>{var e=Ce(Te().mark(function t(r,e){var n,o;return Te().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.id,t.next=6,p.Query("DELETE FROM `slayt` WHERE id ="+o);case 6:return t.abrupt("return",e.json({msg:"OK!"}));case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),Me.post("/ctrlpanel/slaytlar/get-items",(()=>{var e=Ce(Te().mark(function t(r,e){var n,o;return Te().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.tur,t.next=6,p.Query("SELECT * FROM `slayt` WHERE tur = ? ORDER BY sira ASC ",[o]);case 6:return o=t.sent,t.abrupt("return",e.json(o));case 8:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),Me.post("/ctrlpanel/slaytlar/update-item",e,(()=>{var e=Ce(Te().mark(function t(r,e){var n,o,u;return Te().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.id,u=Pe(n,Ee),t.next=6,p.Query("UPDATE `slayt` SET ?  WHERE id = "+o,[u]);case 6:return t.abrupt("return",e.json({msg:"Ok!"}));case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),Me.get("/ctrlpanel/slaytlar",e,Le),t.use("/",Me)};function He(t){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var We=["siparis_id"];function Ye(t,r){if(null==t)return{};var e,n=((t,r)=>{if(null==t)return{};var e,n={};for(e in t)if({}.hasOwnProperty.call(t,e)){if(-1!==r.indexOf(e))continue;n[e]=t[e]}return n})(t,r);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),u=0;u<o.length;u++)e=o[u],-1===r.indexOf(e)&&{}.propertyIsEnumerable.call(t,e)&&(n[e]=t[e]);return n}function Je(){var o=$e(),t=o.m(Je),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,qe(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(Je=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new Xe(t,r)},AsyncIterator:Be,async:function(t,r,e,n,o){return(u(r)?ze:Ue)(i(t),r,e,n,o)},keys:Ke,values:qe}})()}function qe(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(He(t)+" is not iterable")}function Ke(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Ue(t,r,e,n,o){var u=ze(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function ze(t,r,e,n,o){return new Be($e().w(t,r,e,n),o||Promise)}function Be(a,c){var o;this.next||(T(Be.prototype),T(Be.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),T(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof Xe?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function $e(){var v,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof m?r:m,r=Object.create(r.prototype);return T(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:v,a:y,f:y.bind(v,4),d:function(t,r){return i=t,a=0,c=v,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(h=a<2?v:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(h=i[t=a?t:"next"]){if(!(h=h.call(i,c)))throw TypeError("iterator result is not an object");if(!h.done)return h;c=h.value,a<2&&(a=0)}else 1===a&&(h=i.return)&&h.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=v}else if((h=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=v,a=1,c=t}finally{s=1}}return{value:h,done:l}}),!0),r;function y(t,r){for(a=t,c=r,h=0;!l&&s&&!e&&h<f.length;h++){var e,n=f[h],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=v):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function m(){}function o(){}function u(){}var h=Object.getPrototypeOf,t=[][r]?h(h([][r]())):(T(h={},r,function(){return this}),h),i=u.prototype=m.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,T(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return T(i,"constructor",o.prototype=u),T(u,"constructor",o),T(u,e,o.displayName="GeneratorFunction"),T(i),T(i,e,"Generator"),T(i,r,function(){return this}),T(i,"toString",function(){return"[object Generator]"}),($e=function(){return{w:n,m:a}})()}function T(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(T=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){T(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function Xe(t,r){this.v=t,this.k=r}function Ze(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function Ve(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){Ze(n,r,e,o,u,"next",t)}function u(t){Ze(n,r,e,o,u,"throw",t)}o(void 0)})}}var tn=r.Router({mergeParams:!0}),rn=(()=>{var e=Ve(Je().mark(function t(r,e){return Je().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.render("pages/ctrlpanel/siparisler.hbs",{title:"Siparişler",scriptname:"ctrlpanel-main",styles:"",scripts:'  <script defer src="https://code.jquery.com/ui/1.14.1/jquery-ui.js"><\/script> \n    <script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',user:r.user});case 1:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),en=function(t){return tn.get("/ctrlpanel/siparisler",e,rn),tn.post("/ctrlpanel/siparisler/get-all",(()=>{var e=Ve(Je().mark(function t(r,e){var n;return Je().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.Query("SELECT * FROM `siparis`");case 2:return n=t.sent,t.abrupt("return",e.json(n));case 4:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),tn.post("/ctrlpanel/siparisler/update",e,(()=>{var e=Ve(Je().mark(function t(r,e){var n,o;return Je().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return");case 2:return o=r.body,n=o.siparis_id,o=Ye(o,We),t.next=5,p.Query("UPDATE `siparis` SET ? WHERE id = "+n,[o]);case 5:return t.sent,t.abrupt("return",e.json({msg:"OK!"}));case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),t.use("/",tn)};function nn(t){return(nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var on=["id"];function un(t,r){if(null==t)return{};var e,n=((t,r)=>{if(null==t)return{};var e,n={};for(e in t)if({}.hasOwnProperty.call(t,e)){if(-1!==r.indexOf(e))continue;n[e]=t[e]}return n})(t,r);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),u=0;u<o.length;u++)e=o[u],-1===r.indexOf(e)&&{}.propertyIsEnumerable.call(t,e)&&(n[e]=t[e]);return n}function an(){var o=yn(),t=o.m(an),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,cn(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(an=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new vn(t,r)},AsyncIterator:pn,async:function(t,r,e,n,o){return(u(r)?ln:fn)(i(t),r,e,n,o)},keys:sn,values:cn}})()}function cn(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(nn(t)+" is not iterable")}function sn(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function fn(t,r,e,n,o){var u=ln(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function ln(t,r,e,n,o){return new pn(yn().w(t,r,e,n),o||Promise)}function pn(a,c){var o;this.next||(_(pn.prototype),_(pn.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),_(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof vn?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function yn(){var v,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof m?r:m,r=Object.create(r.prototype);return _(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:v,a:y,f:y.bind(v,4),d:function(t,r){return i=t,a=0,c=v,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(h=a<2?v:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(h=i[t=a?t:"next"]){if(!(h=h.call(i,c)))throw TypeError("iterator result is not an object");if(!h.done)return h;c=h.value,a<2&&(a=0)}else 1===a&&(h=i.return)&&h.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=v}else if((h=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=v,a=1,c=t}finally{s=1}}return{value:h,done:l}}),!0),r;function y(t,r){for(a=t,c=r,h=0;!l&&s&&!e&&h<f.length;h++){var e,n=f[h],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=v):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function m(){}function o(){}function u(){}var h=Object.getPrototypeOf,t=[][r]?h(h([][r]())):(_(h={},r,function(){return this}),h),i=u.prototype=m.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,_(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return _(i,"constructor",o.prototype=u),_(u,"constructor",o),_(u,e,o.displayName="GeneratorFunction"),_(i),_(i,e,"Generator"),_(i,r,function(){return this}),_(i,"toString",function(){return"[object Generator]"}),(yn=function(){return{w:n,m:a}})()}function _(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(_=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){_(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function vn(t,r){this.v=t,this.k=r}function bn(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function mn(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){bn(n,r,e,o,u,"next",t)}function u(t){bn(n,r,e,o,u,"throw",t)}o(void 0)})}}var hn=r.Router({mergeParams:!0}),dn=function(t){return hn.get("/ctrlpanel/etic-siteler",e,function(t,r){return r.render("pages/ctrlpanel/eticaret.hbs",{title:"Eticaret Siteler",scriptname:"ctrlpanel-main",styles:"",scripts:'  <script defer src="https://code.jquery.com/ui/1.14.1/jquery-ui.js"><\/script> \n    <script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',user:t.user})}),hn.post("/get-esites",(()=>{var e=mn(an().mark(function t(r,e){var n;return an().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return",e.send("Hata!!"));case 2:return t.next=4,p.Query("SELECT * FROM `eticsites`");case 4:return n=t.sent,t.abrupt("return",e.json(n));case 6:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),hn.post("/ctrlpanel/add-esite",e,(()=>{var e=mn(an().mark(function t(r,e){return an().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return",e.send("Hata!!"));case 2:return t.next=4,p.Query("INSERT INTO `eticsites` SET ?",[r.body]);case 4:return t.abrupt("return",e.json({msg:"OK!"}));case 5:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),hn.post("/ctrlpanel/update-esite",e,(()=>{var e=mn(an().mark(function t(r,e){var n,o;return an().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return",e.send("Hata!!"));case 2:return o=r.body,n=o.id,o=un(o,on),t.next=5,p.Query("UPDATE `eticsites` SET ? WHERE id = "+n,[o]);case 5:return t.abrupt("return",e.json({msg:"OK!"}));case 6:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),hn.post("/ctrlpanel/delete-esite",e,(()=>{var e=mn(an().mark(function t(r,e){var n;return an().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return",e.send("Hata!!"));case 2:return n=r.body.id,t.next=5,p.Query("DELETE FROM `eticsites` WHERE id = "+n);case 5:return t.abrupt("return",e.json({msg:"OK!"}));case 6:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),t.use("/",hn)};function wn(t){return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gn(t,r){return(t=>{if(Array.isArray(t))return t})(t)||((t,r)=>{var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,u,i,a=[],c=!0,s=!1;try{if(u=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;c=!1}else for(;!(c=(n=u.call(e)).done)&&(a.push(n.value),a.length!==r);c=!0);}catch(t){s=!0,o=t}finally{try{if(!c&&null!=e.return&&(i=e.return(),Object(i)!==i))return}finally{if(s)throw o}}return a}})(t,r)||((t,r)=>{var e;if(t)return"string"==typeof t?On(t,r):"Map"===(e="Object"===(e={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?On(t,r):void 0})(t,r)||(()=>{throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function On(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function xn(){var o=Tn(),t=o.m(xn),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,jn(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(xn=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new _n(t,r)},AsyncIterator:Pn,async:function(t,r,e,n,o){return(u(r)?En:kn)(i(t),r,e,n,o)},keys:Sn,values:jn}})()}function jn(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(wn(t)+" is not iterable")}function Sn(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function kn(t,r,e,n,o){var u=En(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function En(t,r,e,n,o){return new Pn(Tn().w(t,r,e,n),o||Promise)}function Pn(a,c){var o;this.next||(N(Pn.prototype),N(Pn.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),N(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof _n?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function Tn(){var v,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof m?r:m,r=Object.create(r.prototype);return N(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:v,a:y,f:y.bind(v,4),d:function(t,r){return i=t,a=0,c=v,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(h=a<2?v:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(h=i[t=a?t:"next"]){if(!(h=h.call(i,c)))throw TypeError("iterator result is not an object");if(!h.done)return h;c=h.value,a<2&&(a=0)}else 1===a&&(h=i.return)&&h.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=v}else if((h=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=v,a=1,c=t}finally{s=1}}return{value:h,done:l}}),!0),r;function y(t,r){for(a=t,c=r,h=0;!l&&s&&!e&&h<f.length;h++){var e,n=f[h],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=v):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function m(){}function o(){}function u(){}var h=Object.getPrototypeOf,t=[][r]?h(h([][r]())):(N(h={},r,function(){return this}),h),i=u.prototype=m.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,N(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return N(i,"constructor",o.prototype=u),N(u,"constructor",o),N(u,e,o.displayName="GeneratorFunction"),N(i),N(i,e,"Generator"),N(i,r,function(){return this}),N(i,"toString",function(){return"[object Generator]"}),(Tn=function(){return{w:n,m:a}})()}function N(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(N=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){N(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function _n(t,r){this.v=t,this.k=r}function Nn(r,t){var e,n=Object.keys(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(r),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,e)),n}function In(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Nn(Object(o),!0).forEach(function(t){var r,e;r=n,e=o[t=t],(t=(t=>(t=((t,r)=>{if("object"!=wn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);if("object"!=wn(e=e.call(t,r||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==wn(t)?t:t+""))(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Nn(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function Gn(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function An(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){Gn(n,r,e,o,u,"next",t)}function u(t){Gn(n,r,e,o,u,"throw",t)}o(void 0)})}}function Fn(t,r){for(t=t.toString();t.length<r;)t="0"+t;return t}var Rn=(()=>{var e=An(xn().mark(function t(r,e){var n,o,u,i,a,c,s,f,l,p,y,v,b,m;return xn().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:return n=t.sent,t.next=5,It();case 5:return o=t.sent,t.next=8,g();case 8:if(u=t.sent,c=r.query,i=In(In({},r.user),{},{adres:JSON.parse(r.user.adres)}),a={title:"Siparişler",scriptname:"main",scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',menus:n,eticSiteler:o,wpno:u.whatsappno,musteri:i},c&&c.crp)return t.next=15,Nt([c.crp]);t.next=26;break;case 15:for(c=t.sent,s=gn(c,1),s=s[0],f="",l=JSON.parse(s.basketItems),p=0;p<l.length;p++)y=l[p],f+="".concat(y.adet," x ").concat(y.name,"\n\r");return v=JSON.parse(s.billingAddress).address,b=JSON.parse(s.shippingAddress).address,m=new Date(parseInt(s.systemTime)),m="".concat(Fn(m.getDate(),2),".").concat(Fn(m.getMonth()-1,2),".").concat(m.getFullYear()," ").concat(Fn(m.getHours(),2),":").concat(Fn(m.getMinutes())),t.abrupt("return",e.render("pages/website/siparis/main query.hbs",In(In({},a),{},{siparis:s,tarih:m,shippingAddress:b,billingAddress:v,urunlerStr:f,wpno:u.whatsappno,musteri:i})));case 26:return t.abrupt("return",e.render("pages/website/siparis/main.hbs",a));case 27:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})();function Dn(t){return(Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cn(){var o=Yn(),t=o.m(Cn),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,Mn(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(Cn=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new Jn(t,r)},AsyncIterator:Wn,async:function(t,r,e,n,o){return(u(r)?Hn:Qn)(i(t),r,e,n,o)},keys:Ln,values:Mn}})()}function Mn(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(Dn(t)+" is not iterable")}function Ln(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Qn(t,r,e,n,o){var u=Hn(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function Hn(t,r,e,n,o){return new Wn(Yn().w(t,r,e,n),o||Promise)}function Wn(a,c){var o;this.next||(I(Wn.prototype),I(Wn.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),I(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof Jn?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function Yn(){var v,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof m?r:m,r=Object.create(r.prototype);return I(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:v,a:y,f:y.bind(v,4),d:function(t,r){return i=t,a=0,c=v,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(h=a<2?v:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(h=i[t=a?t:"next"]){if(!(h=h.call(i,c)))throw TypeError("iterator result is not an object");if(!h.done)return h;c=h.value,a<2&&(a=0)}else 1===a&&(h=i.return)&&h.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=v}else if((h=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=v,a=1,c=t}finally{s=1}}return{value:h,done:l}}),!0),r;function y(t,r){for(a=t,c=r,h=0;!l&&s&&!e&&h<f.length;h++){var e,n=f[h],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=v):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function m(){}function o(){}function u(){}var h=Object.getPrototypeOf,t=[][r]?h(h([][r]())):(I(h={},r,function(){return this}),h),i=u.prototype=m.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,I(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return I(i,"constructor",o.prototype=u),I(u,"constructor",o),I(u,e,o.displayName="GeneratorFunction"),I(i),I(i,e,"Generator"),I(i,r,function(){return this}),I(i,"toString",function(){return"[object Generator]"}),(Yn=function(){return{w:n,m:a}})()}function I(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(I=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){I(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function Jn(t,r){this.v=t,this.k=r}function qn(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}var Kn=(()=>{a=Cn().mark(function t(r,e){var n,o,u;return Cn().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:return n=t.sent,t.next=5,It();case 5:return o=t.sent,t.next=8,g();case 8:u=t.sent,e.render("pages/website/favori/main.hbs",{title:"Favoriler",scriptname:"main",scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',menus:n,eticSiteler:o,wpno:u.whatsappno,musteri:r.user});case 10:case"end":return t.stop()}},t)});var a,e=function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){qn(n,r,e,o,u,"next",t)}function u(t){qn(n,r,e,o,u,"throw",t)}o(void 0)})};return function(t,r){return e.apply(this,arguments)}})();function Un(t){return(Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zn(r,t){var e,n=Object.keys(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(r),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,e)),n}function Bn(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?zn(Object(o),!0).forEach(function(t){var r,e;r=n,e=o[t=t],(t=(t=>(t=((t,r)=>{if("object"!=Un(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);if("object"!=Un(e=e.call(t,r||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Un(t)?t:t+""))(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):zn(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function f(){var o=ro(),t=o.m(f),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,$n(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(f=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new eo(t,r)},AsyncIterator:to,async:function(t,r,e,n,o){return(u(r)?Vn:Zn)(i(t),r,e,n,o)},keys:Xn,values:$n}})()}function $n(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(Un(t)+" is not iterable")}function Xn(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Zn(t,r,e,n,o){var u=Vn(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function Vn(t,r,e,n,o){return new to(ro().w(t,r,e,n),o||Promise)}function to(a,c){var o;this.next||(G(to.prototype),G(to.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),G(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof eo?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function ro(){var v,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof m?r:m,r=Object.create(r.prototype);return G(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:v,a:y,f:y.bind(v,4),d:function(t,r){return i=t,a=0,c=v,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(h=a<2?v:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(h=i[t=a?t:"next"]){if(!(h=h.call(i,c)))throw TypeError("iterator result is not an object");if(!h.done)return h;c=h.value,a<2&&(a=0)}else 1===a&&(h=i.return)&&h.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=v}else if((h=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=v,a=1,c=t}finally{s=1}}return{value:h,done:l}}),!0),r;function y(t,r){for(a=t,c=r,h=0;!l&&s&&!e&&h<f.length;h++){var e,n=f[h],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=v):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function m(){}function o(){}function u(){}var h=Object.getPrototypeOf,t=[][r]?h(h([][r]())):(G(h={},r,function(){return this}),h),i=u.prototype=m.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,G(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return G(i,"constructor",o.prototype=u),G(u,"constructor",o),G(u,e,o.displayName="GeneratorFunction"),G(i),G(i,e,"Generator"),G(i,r,function(){return this}),G(i,"toString",function(){return"[object Generator]"}),(ro=function(){return{w:n,m:a}})()}function G(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(G=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){G(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function eo(t,r){this.v=t,this.k=r}function no(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function oo(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){no(n,r,e,o,u,"next",t)}function u(t){no(n,r,e,o,u,"throw",t)}o(void 0)})}}var uo=r.Router({mergeParams:!0}),io=(()=>{var e=oo(f().mark(function t(r,e){return f().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.render("pages/ctrlpanel/rapor-urunler.hbs",{title:"Ürün Listesi",scriptname:"ctrlpanel-main",styles:"",scripts:'  <script defer src="https://code.jquery.com/ui/1.14.1/jquery-ui.js"><\/script> \n    <script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',user:r.user});case 1:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),ao=(()=>{var e=oo(f().mark(function t(r,e){var n;return f().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return",e.json([]));case 2:return t.prev=2,t.next=5,fo();case 5:return n=t.sent,t.abrupt("return",e.json(n));case 9:return t.prev=9,t.t0=t.catch(2),console.error(t.t0),t.abrupt("return",e.json(t.t0));case 13:case"end":return t.stop()}},t,null,[[2,9]])}));return function(t,r){return e.apply(this,arguments)}})(),co=(()=>{var e=oo(f().mark(function t(r,e){var n,o,u,i,a,c;return f().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return",e.json([]));case 2:for(n=(n=r.body.urunler).map(function(t){return Bn(Bn({},t),{},{kategoristr:t.kategoristr.replaceAll("<br>",",")})}),o=process.cwd()+"/public/uploads/raporlar/urun-raporlar/",(0,L.existsSync)(o)||(0,L.mkdirSync)(o,{recursive:!0}),u="\ufeffNo;ÜrünKodu;Ürün Adı;Kategorler;İndirim(%);Fiyat(₺);İndirimli Fiyat(₺);Kdv(%);Beğenilme;Görüntülenme;Stok;Kalan\n",i=0;i<n.length;i++)a=n[i],a="".concat(i+1,";").concat(a.kod,";").concat(a.name,';"').concat(a.kategoristr,'";').concat(a.indirim,";").concat(a.fiyat,";").concat(a.indirimli_fiyat,";").concat(a.kdv,";").concat(a.begenilme,";").concat(a.goruntulenme,";").concat(a.stok,";").concat(a.kalan,"\n"),u+=a;return c="rapor_"+(new Date).getTime()+".csv",(0,L.writeFileSync)(o+c,u,{encoding:"utf-8"}),t.abrupt("return",e.json({url:"/uploads/raporlar/urun-raporlar/"+c,filename:c}));case 11:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),so=(()=>{var r=oo(f().mark(function t(r){return f().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return uo.get("/ctrlpanel/rapor-urunler",e,io),uo.post("/ctrlpanel/rapor-urunler",e,ao),uo.post("/ctrlpanel/rapor-exportcsv",e,co),uo.post("/ctrlpanel/rapor-deletecsv",e,function(t,r){return t.body?(t=t.body.url,(0,L.unlinkSync)(process.cwd()+"/public"+t),r.json({status:!0,msg:"Ok!"})):r.json({status:!1,msg:"Failure"})}),t.abrupt("return",r.use("/",uo));case 5:case"end":return t.stop()}},t)}));return function(t){return r.apply(this,arguments)}})(),fo=(()=>{var t=oo(f().mark(function t(){var r,e,n,o;return f().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.Query("SELECT * from `urun`");case 2:if(!(r=t.sent)){t.next=9;break}for(r=(r=r.sort(function(t,r){return t.name||console.error(t),t.name&&r.name&&t.name<r.name?-1:1})).map(function(t){return Bn(Bn({},t),{},{kalan:t.stok-t.alinan,resimler:JSON.parse(t.resimler),parents:JSON.parse(t.parents)})}),e=[],n=0;n<r.length;n++)o=r[n],e.push(lo(o));return t.abrupt("return",Promise.all(e));case 9:return t.abrupt("return",[]);case 10:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}})(),lo=(()=>{var r=oo(f().mark(function t(r){var e,n,o,u,i,a,c;return f().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e=[],n="",o=0;o<r.parents.length;o++)u=r.parents[o],e.push(po(u));return t.next=5,Promise.all(e);case 5:for(i=t.sent,a=0;a<i.length;a++)(c=i[a])&&(n+=c+"<br>");return t.abrupt("return",Bn(Bn({},r),{},{kategoristr:n}));case 8:case"end":return t.stop()}},t)}));return function(t){return r.apply(this,arguments)}})(),po=(()=>{var r=oo(f().mark(function t(r){var e;return f().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.Query("SELECT * from `kategori` WHERE id = ?",[r]);case 2:if((e=t.sent)&&0<e.length)return t.abrupt("return",e[0].name);t.next=5;break;case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}},t)}));return function(t){return r.apply(this,arguments)}})();let yo=require("node:crypto");var vo="syldisr?*fe";function bo(t){return(bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var mo=["newpassw1","newpassw2"];function ho(t,r){if(null==t)return{};var e,n=((t,r)=>{if(null==t)return{};var e,n={};for(e in t)if({}.hasOwnProperty.call(t,e)){if(-1!==r.indexOf(e))continue;n[e]=t[e]}return n})(t,r);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),u=0;u<o.length;u++)e=o[u],-1===r.indexOf(e)&&{}.propertyIsEnumerable.call(t,e)&&(n[e]=t[e]);return n}function wo(r,t){var e,n=Object.keys(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(r),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,e)),n}function go(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?wo(Object(o),!0).forEach(function(t){var r,e;r=n,e=o[t=t],(t=(t=>(t=((t,r)=>{if("object"!=bo(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);if("object"!=bo(e=e.call(t,r||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==bo(t)?t:t+""))(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):wo(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function Oo(){var o=Po(),t=o.m(Oo),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,xo(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(Oo=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new To(t,r)},AsyncIterator:Eo,async:function(t,r,e,n,o){return(u(r)?ko:So)(i(t),r,e,n,o)},keys:jo,values:xo}})()}function xo(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(bo(t)+" is not iterable")}function jo(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function So(t,r,e,n,o){var u=ko(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function ko(t,r,e,n,o){return new Eo(Po().w(t,r,e,n),o||Promise)}function Eo(a,c){var o;this.next||(A(Eo.prototype),A(Eo.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),A(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof To?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function Po(){var v,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof m?r:m,r=Object.create(r.prototype);return A(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:v,a:y,f:y.bind(v,4),d:function(t,r){return i=t,a=0,c=v,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(h=a<2?v:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(h=i[t=a?t:"next"]){if(!(h=h.call(i,c)))throw TypeError("iterator result is not an object");if(!h.done)return h;c=h.value,a<2&&(a=0)}else 1===a&&(h=i.return)&&h.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=v}else if((h=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=v,a=1,c=t}finally{s=1}}return{value:h,done:l}}),!0),r;function y(t,r){for(a=t,c=r,h=0;!l&&s&&!e&&h<f.length;h++){var e,n=f[h],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=v):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function m(){}function o(){}function u(){}var h=Object.getPrototypeOf,t=[][r]?h(h([][r]())):(A(h={},r,function(){return this}),h),i=u.prototype=m.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,A(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return A(i,"constructor",o.prototype=u),A(u,"constructor",o),A(u,e,o.displayName="GeneratorFunction"),A(i),A(i,e,"Generator"),A(i,r,function(){return this}),A(i,"toString",function(){return"[object Generator]"}),(Po=function(){return{w:n,m:a}})()}function A(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(A=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){A(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function To(t,r){this.v=t,this.k=r}function _o(t){return(t=>{if(Array.isArray(t))return No(t)})(t)||(t=>{if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)})(t)||((t,r)=>{var e;if(t)return"string"==typeof t?No(t,r):"Map"===(e="Object"===(e={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?No(t,r):void 0})(t)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function No(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function Io(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function Go(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){Io(n,r,e,o,u,"next",t)}function u(t){Io(n,r,e,o,u,"throw",t)}o(void 0)})}}var Ao=(()=>{var e=Go(Oo().mark(function t(r,e){var n,o;return Oo().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:return n=t.sent,t.next=5,g();case 5:o=t.sent,e.render("pages/website/auth/uye-ol.hbs",{title:"Üye ol",scriptname:"main",scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',menus:_o(n),wpno:o.whatsappno});case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),Fo=(()=>{var e=Go(Oo().mark(function t(e,n){var o,u;return Oo().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.body){t.next=2;break}return t.abrupt("return",n.json({status:!1,msg:"Hata!"}));case 2:return o=e.body,u=(t=>{for(var r="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=e.length,o=0;o<t;o++)r+=e.charAt(Math.floor(Math.random()*n));return r})(6),r=u,(0,yo.scryptSync)(r,vo,64).toString("hex"),console.log(go(go({id:0},o),{},{onay_kod:u})),o=go(go({id:0},o),{},{onay_kod:u}),u=o.newpassw1,o=ho(o,mo),u=go({id:0,passw:u},o),t.next=10,p.Query("INSERT INTO `musteriler` SET ?",[go({},u)]);case 10:return t.sent,t.abrupt("return",n.json({status:!0,msg:"OK!"}));case 12:case"end":return t.stop()}var r},t)}));return function(t,r){return e.apply(this,arguments)}})();function Ro(t){return(Ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Do(){var o=Wo(),t=o.m(Do),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,Co(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(Do=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new Yo(t,r)},AsyncIterator:Ho,async:function(t,r,e,n,o){return(u(r)?Qo:Lo)(i(t),r,e,n,o)},keys:Mo,values:Co}})()}function Co(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(Ro(t)+" is not iterable")}function Mo(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Lo(t,r,e,n,o){var u=Qo(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function Qo(t,r,e,n,o){return new Ho(Wo().w(t,r,e,n),o||Promise)}function Ho(a,c){var o;this.next||(F(Ho.prototype),F(Ho.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),F(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof Yo?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function Wo(){var v,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof m?r:m,r=Object.create(r.prototype);return F(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:v,a:y,f:y.bind(v,4),d:function(t,r){return i=t,a=0,c=v,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(h=a<2?v:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(h=i[t=a?t:"next"]){if(!(h=h.call(i,c)))throw TypeError("iterator result is not an object");if(!h.done)return h;c=h.value,a<2&&(a=0)}else 1===a&&(h=i.return)&&h.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=v}else if((h=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=v,a=1,c=t}finally{s=1}}return{value:h,done:l}}),!0),r;function y(t,r){for(a=t,c=r,h=0;!l&&s&&!e&&h<f.length;h++){var e,n=f[h],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=v):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function m(){}function o(){}function u(){}var h=Object.getPrototypeOf,t=[][r]?h(h([][r]())):(F(h={},r,function(){return this}),h),i=u.prototype=m.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,F(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return F(i,"constructor",o.prototype=u),F(u,"constructor",o),F(u,e,o.displayName="GeneratorFunction"),F(i),F(i,e,"Generator"),F(i,r,function(){return this}),F(i,"toString",function(){return"[object Generator]"}),(Wo=function(){return{w:n,m:a}})()}function F(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(F=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){F(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function Yo(t,r){this.v=t,this.k=r}function Jo(t){return(t=>{if(Array.isArray(t))return qo(t)})(t)||(t=>{if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)})(t)||((t,r)=>{var e;if(t)return"string"==typeof t?qo(t,r):"Map"===(e="Object"===(e={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?qo(t,r):void 0})(t)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function qo(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function Ko(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}var Uo=(()=>{a=Do().mark(function t(n,o){var u,i,a;return Do().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(u=new URL("".concat(n.protocol,"://").concat(n.get("host")).concat(n.originalUrl)),console.log(u),a=u.searchParams.get("urn"),u=u.searchParams.get("cde"),a&&u)return r=u,e="soyluistifleemakin",(0,yo.scryptSync)(r,vo,64).toString("hex"),t.abrupt("return",o.redirect("/"));t.next=7;break;case 7:return t.next=9,h();case 9:return i=t.sent,t.next=12,g();case 12:return a=t.sent,t.abrupt("return",o.render("pages/website/auth/onay-kod.hbs",{title:"Üye ol",scriptname:"main",scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',menus:Jo(i),wpno:a.whatsappno}));case 14:case"end":return t.stop()}var r,e},t)});var a,e=function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){Ko(n,r,e,o,u,"next",t)}function u(t){Ko(n,r,e,o,u,"throw",t)}o(void 0)})};return function(t,r){return e.apply(this,arguments)}})();function zo(t){return(zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Bo=["newpassw1","newpassw2"];function $o(r,t){var e,n=Object.keys(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(r),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,e)),n}function Xo(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?$o(Object(o),!0).forEach(function(t){var r,e;r=n,e=o[t=t],(t=(t=>(t=((t,r)=>{if("object"!=zo(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);if("object"!=zo(e=e.call(t,r||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==zo(t)?t:t+""))(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):$o(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function Zo(t,r){if(null==t)return{};var e,n=((t,r)=>{if(null==t)return{};var e,n={};for(e in t)if({}.hasOwnProperty.call(t,e)){if(-1!==r.indexOf(e))continue;n[e]=t[e]}return n})(t,r);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),u=0;u<o.length;u++)e=o[u],-1===r.indexOf(e)&&{}.propertyIsEnumerable.call(t,e)&&(n[e]=t[e]);return n}function Vo(){var o=uu(),t=o.m(Vo),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,tu(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(Vo=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new iu(t,r)},AsyncIterator:ou,async:function(t,r,e,n,o){return(u(r)?nu:eu)(i(t),r,e,n,o)},keys:ru,values:tu}})()}function tu(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(zo(t)+" is not iterable")}function ru(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function eu(t,r,e,n,o){var u=nu(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function nu(t,r,e,n,o){return new ou(uu().w(t,r,e,n),o||Promise)}function ou(a,c){var o;this.next||(R(ou.prototype),R(ou.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),R(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof iu?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function uu(){var v,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof m?r:m,r=Object.create(r.prototype);return R(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:v,a:y,f:y.bind(v,4),d:function(t,r){return i=t,a=0,c=v,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(h=a<2?v:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(h=i[t=a?t:"next"]){if(!(h=h.call(i,c)))throw TypeError("iterator result is not an object");if(!h.done)return h;c=h.value,a<2&&(a=0)}else 1===a&&(h=i.return)&&h.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=v}else if((h=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=v,a=1,c=t}finally{s=1}}return{value:h,done:l}}),!0),r;function y(t,r){for(a=t,c=r,h=0;!l&&s&&!e&&h<f.length;h++){var e,n=f[h],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=v):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function m(){}function o(){}function u(){}var h=Object.getPrototypeOf,t=[][r]?h(h([][r]())):(R(h={},r,function(){return this}),h),i=u.prototype=m.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,R(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return R(i,"constructor",o.prototype=u),R(u,"constructor",o),R(u,e,o.displayName="GeneratorFunction"),R(i),R(i,e,"Generator"),R(i,r,function(){return this}),R(i,"toString",function(){return"[object Generator]"}),(uu=function(){return{w:n,m:a}})()}function R(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(R=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){R(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function iu(t,r){this.v=t,this.k=r}function au(t){return(t=>{if(Array.isArray(t))return cu(t)})(t)||(t=>{if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)})(t)||((t,r)=>{var e;if(t)return"string"==typeof t?cu(t,r):"Map"===(e="Object"===(e={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?cu(t,r):void 0})(t)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function cu(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function su(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function fu(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){su(n,r,e,o,u,"next",t)}function u(t){su(n,r,e,o,u,"throw",t)}o(void 0)})}}var lu=(()=>{var e=fu(Vo().mark(function t(r,e){var n,o;return Vo().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:return n=t.sent,t.next=5,g();case 5:return o=t.sent,t.abrupt("return",e.render("pages/website/auth/user-bilgi.hbs",{title:"Müşteri Genel Bilgiler",scriptname:"main",scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',menus:au(n),wpno:o.whatsappno,musteri:r.user}));case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),pu=(()=>{var e=fu(Vo().mark(function t(r,e){var n;return Vo().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return",e.json({status:!1,msg:"Gerekli bilgiler eksik"}));case 2:return t.prev=2,n=r.body.adres,console.log(n,r.user),t.next=7,p.Query("UPDATE `musteriler` SET ? WHERE id = ?",[{adres:JSON.stringify(n)},r.user.id]);case 7:return t.sent,t.abrupt("return",e.json({status:!0,msg:"Ok!"}));case 11:return t.prev=11,t.t0=t.catch(2),console.log(t.t0),t.abrupt("return",e.json({status:!1,msg:"Hata!"}));case 15:case"end":return t.stop()}},t,null,[[2,11]])}));return function(t,r){return e.apply(this,arguments)}})(),yu=(()=>{var e=fu(Vo().mark(function t(r,e){var n,o;return Vo().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return",e.json({status:!1,msg:"Gerekli bilgiler eksik"}));case 2:return t.prev=2,o=r.body,n=o.newpassw1,o=Zo(o,Bo),o=Xo(Xo({},o),{},{passw:n}),t.next=7,p.Query("UPDATE `musteriler` SET ? WHERE id =?",[Xo({},o),r.user.id]);case 7:return t.sent,t.abrupt("return",e.json({status:!0,msg:"Ok!"}));case 11:return t.prev=11,t.t0=t.catch(2),t.abrupt("return",e.json({status:!1,msg:"Hata!"}));case 14:case"end":return t.stop()}},t,null,[[2,11]])}));return function(t,r){return e.apply(this,arguments)}})(),vu=(()=>{var e=fu(Vo().mark(function t(r,e){var n,o,u;return Vo().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:return n=t.sent,t.next=5,g();case 5:return o=t.sent,u=Xo(Xo({},r.user),{},{adres:JSON.parse(r.user.adres)}),t.abrupt("return",e.render("pages/website/auth/user-adresbilgi.hbs",{title:"Müşteri Adres Bilgileri",scriptname:"main",scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',menus:au(n),wpno:o.whatsappno,musteri:u}));case 8:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})();function bu(t,r){var r=1<arguments.length&&void 0!==r?r:"*",e=(t=(t="string"!=typeof t?t.toString():t).replace(/[^0-9]+/g,"")).length;return t.substring(0,3)+r.repeat(e-6)+t.substring(e-3,e)}function mu(t,r){for(t=t.toString();t.length<r;)t="0"+t;return t}var hu=(()=>{var e=fu(Vo().mark(function t(r,e){var n,o,u,i;return Vo().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:return n=t.sent,t.next=5,g();case 5:return o=t.sent,t.next=8,p.Query("SELECT * FROM `siparis` WHERE userid = ?",[r.user.id]);case 8:return u=(u=(u=t.sent).sort(function(t,r){return t.systemTime<r.systemTime?1:-1})).map(function(t){var r,e=JSON.parse(t.paymentCard),n=(e.cardNumber=bu(e.cardNumber,"*"),JSON.parse(t.buyer)),o=(n.identityNumber=bu(n.identityNumber,"*"),JSON.parse(t.itemTransactions));return Xo(Xo({},t),{},{basketItems:JSON.parse(t.basketItems),paymentCard:e,shippingAddress:JSON.parse(t.shippingAddress),billingAddress:JSON.parse(t.billingAddress),itemTransactions:o,buyer:n,systemTimeStr:(e=t.systemTime,o=mu((e=new Date(parseInt(e))).getDate(),2),n=mu(e.getMonth()+1,2),t=e.getFullYear(),r=e.getHours(),e=e.getMinutes(),"".concat(o,".").concat(n,".").concat(t," ").concat(r,":").concat(e))})}),i=u.map(function(t){return t.basketItems}),t.abrupt("return",e.render("pages/website/auth/user-siparis.hbs",{title:"Siparişlerim",scriptname:"main",scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',menus:au(n),wpno:o.whatsappno,musteri:r.user,siparisler:u,basketItems:i}));case 13:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})();function du(t){return(du="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var wu=["id"];function gu(t,r){if(null==t)return{};var e,n=((t,r)=>{if(null==t)return{};var e,n={};for(e in t)if({}.hasOwnProperty.call(t,e)){if(-1!==r.indexOf(e))continue;n[e]=t[e]}return n})(t,r);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),u=0;u<o.length;u++)e=o[u],-1===r.indexOf(e)&&{}.propertyIsEnumerable.call(t,e)&&(n[e]=t[e]);return n}function a(){var o=Eu(),t=o.m(a),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,Ou(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(a=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new Pu(t,r)},AsyncIterator:ku,async:function(t,r,e,n,o){return(u(r)?Su:ju)(i(t),r,e,n,o)},keys:xu,values:Ou}})()}function Ou(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(du(t)+" is not iterable")}function xu(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function ju(t,r,e,n,o){var u=Su(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function Su(t,r,e,n,o){return new ku(Eu().w(t,r,e,n),o||Promise)}function ku(a,c){var o;this.next||(D(ku.prototype),D(ku.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),D(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof Pu?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function Eu(){var v,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof m?r:m,r=Object.create(r.prototype);return D(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:v,a:y,f:y.bind(v,4),d:function(t,r){return i=t,a=0,c=v,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(h=a<2?v:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(h=i[t=a?t:"next"]){if(!(h=h.call(i,c)))throw TypeError("iterator result is not an object");if(!h.done)return h;c=h.value,a<2&&(a=0)}else 1===a&&(h=i.return)&&h.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=v}else if((h=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=v,a=1,c=t}finally{s=1}}return{value:h,done:l}}),!0),r;function y(t,r){for(a=t,c=r,h=0;!l&&s&&!e&&h<f.length;h++){var e,n=f[h],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=v):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function m(){}function o(){}function u(){}var h=Object.getPrototypeOf,t=[][r]?h(h([][r]())):(D(h={},r,function(){return this}),h),i=u.prototype=m.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,D(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return D(i,"constructor",o.prototype=u),D(u,"constructor",o),D(u,e,o.displayName="GeneratorFunction"),D(i),D(i,e,"Generator"),D(i,r,function(){return this}),D(i,"toString",function(){return"[object Generator]"}),(Eu=function(){return{w:n,m:a}})()}function D(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(D=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){D(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function Pu(t,r){this.v=t,this.k=r}function Tu(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function _u(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){Tu(n,r,e,o,u,"next",t)}function u(t){Tu(n,r,e,o,u,"throw",t)}o(void 0)})}}function Nu(t){i.post("/urun/get-urunlerforgorlen",(()=>{var e=_u(a().mark(function t(r,e){var n,o;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.ids,t.next=6,p.Query("SELECT * FROM `urun` WHERE id IN  ?",[[o]]);case 6:return o=t.sent,t.abrupt("return",e.json(o));case 8:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),i.post("/urun/update-urun",(()=>{var e=_u(a().mark(function t(r,e){var n,o,u;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.id,u=gu(n,wu),t.next=6,p.Query("UPDATE `urun` SET ? WHERE id ="+o,[u]);case 6:return t.abrupt("return",e.json({msg:"OK!"}));case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),i.post("/urun/get-yorumlar",(()=>{var e=_u(a().mark(function t(r,e){var n,o;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.id,t.next=6,p.Query("SELECT yorumlar FROM `urun` WHERE id ="+o);case 6:return o=t.sent,t.abrupt("return",e.json(o[0].yorumlar||JSON.stringify([])));case 8:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),i.get("/urun/:urunurl",gr),i.get("/urun",function(t,r){return r.redirect("/urun/")}),t.use("/",i)}function Iu(t){i.post("/get-menu",(()=>{var e=_u(a().mark(function t(r,e){var n,o,u,i;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.id,u=n.parent_length,i=u-1,t.next=7,p.Query("SELECT * FROM `kategori` WHERE JSON_CONTAINS(JSON_EXTRACT(parents,'$[?]'),?,'$') AND JSON_LENGTH(parents, '$') = ?",[i,o,u]);case 7:return i=t.sent,t.abrupt("return",e.json(i));case 9:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),t.use("/",i)}function Gu(t){i.post("/siparis/add",(()=>{var e=_u(a().mark(function t(r,e){return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Pt(r.body);case 4:return t.abrupt("return",e.json({msg:"OK!"}));case 5:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),i.post("/siparis/delete",(()=>{var e=_u(a().mark(function t(r,e){var n;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return");case 2:return n=r.body.id,t.next=5,Et(n);case 5:return t.abrupt("return",e.json({msg:"OK!"}));case 6:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),i.post("/siparis/update",(()=>{var e=_u(a().mark(function t(r,e){return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Tt(r.body);case 4:return t.abrupt("return",e.json({msg:"OK!"}));case 5:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),i.post("/siparis/get",(()=>{var e=_u(a().mark(function t(r,e){var n;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,_t(r.body);case 4:return n=t.sent,t.abrupt("return",e.json(n));case 6:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),i.post("/siparis/getbysipid",(()=>{var e=_u(a().mark(function t(r,e){var n;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return");case 2:return n=r.body.ids,t.next=5,Nt(n);case 5:return n=t.sent,t.abrupt("return",e.json(n));case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),i.get("/siparis*",ne,Rn),i.get("/siparis",function(t,r){return r.redirect("/siparis/")}),t.use("/",i)}function Au(t){i.get("/sepet*",Zr),i.get("/siparis-bilgi*",ne,te),i.get("/odeme*",ne,Vr),i.post("/sepet/get-urunler",(()=>{var e=_u(a().mark(function t(r,e){var n,o;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.ids,t.next=6,p.Query("SELECT * FROM `urun`  WHERE id IN ?",[[o]]);case 6:return o=t.sent,t.abrupt("return",e.json(o));case 8:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),i.get("/sepet",function(t,r){return r.redirect("/sepet/")}),t.use("/",i)}function Fu(t){i.get("/favori*",Kn),i.post("/favori/get-urunler",(()=>{var e=_u(a().mark(function t(r,e){var n,o;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.ids,t.next=6,p.Query("SELECT * FROM `urun`  WHERE id IN ?",[[o]]);case 6:return o=t.sent,t.abrupt("return",e.json(o));case 8:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),i.get("/sepet",function(t,r){return r.redirect("/sepet/")}),t.use("/",i)}var i=r.Router({mergeParams:!0});let Ru=require("nodemailer");function Du(t){return(Du="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cu(){var o=Yu(),t=o.m(Cu),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,Mu(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(Cu=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new qu(t,r)},AsyncIterator:Wu,async:function(t,r,e,n,o){return(u(r)?Hu:Qu)(i(t),r,e,n,o)},keys:Lu,values:Mu}})()}function Mu(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(Du(t)+" is not iterable")}function Lu(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Qu(t,r,e,n,o){var u=Hu(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function Hu(t,r,e,n,o){return new Wu(Yu().w(t,r,e,n),o||Promise)}function Wu(a,c){var o;this.next||(Ju(Wu.prototype),Ju(Wu.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),Ju(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof qu?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function Yu(){var v,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof m?r:m,r=Object.create(r.prototype);return Ju(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:v,a:y,f:y.bind(v,4),d:function(t,r){return i=t,a=0,c=v,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(h=a<2?v:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(h=i[t=a?t:"next"]){if(!(h=h.call(i,c)))throw TypeError("iterator result is not an object");if(!h.done)return h;c=h.value,a<2&&(a=0)}else 1===a&&(h=i.return)&&h.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=v}else if((h=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=v,a=1,c=t}finally{s=1}}return{value:h,done:l}}),!0),r;function y(t,r){for(a=t,c=r,h=0;!l&&s&&!e&&h<f.length;h++){var e,n=f[h],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=v):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function m(){}function o(){}function u(){}var h=Object.getPrototypeOf,t=[][r]?h(h([][r]())):(Ju(h={},r,function(){return this}),h),i=u.prototype=m.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,Ju(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return Ju(i,"constructor",o.prototype=u),Ju(u,"constructor",o),Ju(u,e,o.displayName="GeneratorFunction"),Ju(i),Ju(i,e,"Generator"),Ju(i,r,function(){return this}),Ju(i,"toString",function(){return"[object Generator]"}),(Yu=function(){return{w:n,m:a}})()}function Ju(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(Ju=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){Ju(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function qu(t,r){this.v=t,this.k=r}function Ku(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function Uu(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){Ku(n,r,e,o,u,"next",t)}function u(t){Ku(n,r,e,o,u,"throw",t)}o(void 0)})}}function zu(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bu(n.key),n)}}function Bu(t){t=((t,r)=>{if("object"!=Du(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);if("object"!=Du(e=e.call(t,r||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string");return"symbol"==Du(t)?t:t+""}r.Router({mergeParams:!0});var $u=(()=>{function n(){var t,r,e;if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");t=this,e=void 0,(r=Bu(r="trans"))in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,this.trans=(0,Ru.createTransport)({service:"Gmail",host:"smtp.gmail.com",port:465,secure:!0,auth:{user:"soyluistif@gmail.com",pass:"xlyr fbro duba byen"}})}return t=n,(r=[{key:"sendMail",value:(o=Uu(Cu().mark(function t(r){var e,n;return Cu().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.to,n=r.text,e={from:'"Soyluistif Makinaları" <soyluistif@gmail.com>',to:e,subject:r.subject,html:r.html,text:n},t.next=4,this.trans.sendMail(e);case 4:return n=t.sent,t.abrupt("return",n);case 6:case"end":return t.stop()}},t,this)})),function(t){return o.apply(this,arguments)})}])&&zu(t.prototype,r),e&&zu(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,e,o})();require("crypto");function Xu(t){return(Xu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zu(t,r){return(t=>{if(Array.isArray(t))return t})(t)||((t,r)=>{var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,u,i,a=[],c=!0,s=!1;try{if(u=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;c=!1}else for(;!(c=(n=u.call(e)).done)&&(a.push(n.value),a.length!==r);c=!0);}catch(t){s=!0,o=t}finally{try{if(!c&&null!=e.return&&(i=e.return(),Object(i)!==i))return}finally{if(s)throw o}}return a}})(t,r)||((t,r)=>{var e;if(t)return"string"==typeof t?Vu(t,r):"Map"===(e="Object"===(e={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Vu(t,r):void 0})(t,r)||(()=>{throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function Vu(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function ti(r,t){var e,n=Object.keys(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(r),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,e)),n}function l(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ti(Object(o),!0).forEach(function(t){var r,e;r=n,e=o[t=t],(t=(t=>(t=((t,r)=>{if("object"!=Xu(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);if("object"!=Xu(e=e.call(t,r||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Xu(t)?t:t+""))(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):ti(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function v(){var o=ii(),t=o.m(v),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,ri(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(v=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new ci(t,r)},AsyncIterator:ui,async:function(t,r,e,n,o){return(u(r)?oi:ni)(i(t),r,e,n,o)},keys:ei,values:ri}})()}function ri(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(Xu(t)+" is not iterable")}function ei(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function ni(t,r,e,n,o){var u=oi(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function oi(t,r,e,n,o){return new ui(ii().w(t,r,e,n),o||Promise)}function ui(a,c){var o;this.next||(ai(ui.prototype),ai(ui.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),ai(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof ci?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function ii(){var v,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof m?r:m,r=Object.create(r.prototype);return ai(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:v,a:y,f:y.bind(v,4),d:function(t,r){return i=t,a=0,c=v,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(h=a<2?v:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(h=i[t=a?t:"next"]){if(!(h=h.call(i,c)))throw TypeError("iterator result is not an object");if(!h.done)return h;c=h.value,a<2&&(a=0)}else 1===a&&(h=i.return)&&h.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=v}else if((h=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=v,a=1,c=t}finally{s=1}}return{value:h,done:l}}),!0),r;function y(t,r){for(a=t,c=r,h=0;!l&&s&&!e&&h<f.length;h++){var e,n=f[h],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=v):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function m(){}function o(){}function u(){}var h=Object.getPrototypeOf,t=[][r]?h(h([][r]())):(ai(h={},r,function(){return this}),h),i=u.prototype=m.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,ai(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return ai(i,"constructor",o.prototype=u),ai(u,"constructor",o),ai(u,e,o.displayName="GeneratorFunction"),ai(i),ai(i,e,"Generator"),ai(i,r,function(){return this}),ai(i,"toString",function(){return"[object Generator]"}),(ii=function(){return{w:n,m:a}})()}function ai(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(ai=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){ai(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function ci(t,r){this.v=t,this.k=r}function si(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function fi(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){si(n,r,e,o,u,"next",t)}function u(t){si(n,r,e,o,u,"throw",t)}o(void 0)})}}function li(t){pi.post("/iyz/bin-check",(()=>{var e=fi(v().mark(function t(r,e){var n,o,u;return v().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o={locale:yi.LOCALE.TR,conversationId:"123456789",binNumber:n.binNumber},t.next=6,new Promise(function(e,n){vi.binNumber.retrieve(o,function(t,r){t&&n(t),e(r)})});case 6:return u=t.sent,t.abrupt("return",e.json(u));case 8:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),pi.get("/iyz/3ds-verify",(()=>{var e=fi(v().mark(function t(r,e){var n,o;return v().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.query.ulre){t.next=3;break}return t.abrupt("return",e.send("not Found"));case 3:return t.next=5,p.Query("SELECT threeDSHtmlContent FROM `siparis` WHERE `paymentId` = "+n);case 5:return o=t.sent,o=Buffer.from(o[0].threeDSHtmlContent,"base64"),e.setHeader("Content-type","text/html"),t.abrupt("return",e.send(o.toString("utf8")));case 9:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),pi.post("/iyz/3ds-init",(()=>{var e=fi(v().mark(function t(r,i){var e,n,a;return v().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=r.user,n=r.body){t.next=4;break}return t.abrupt("return");case 4:a=l(l({},{userid:e.id,locale:yi.LOCALE.TR,conversationId:"123456789",price:"1",paidPrice:"1.2",currency:yi.CURRENCY.TRY,installment:"1",basketId:"B67832",paymentChannel:yi.PAYMENT_CHANNEL.WEB,paymentGroup:yi.PAYMENT_GROUP.PRODUCT,callbackUrl:qa+"/iyz/3ds-pay",paymentCard:{cardHolderName:n.cardHolderName,cardNumber:n.cardNumber,expireMonth:n.expireMonth,expireYear:n.expireYear,cvc:n.cvc,registerCard:"0"},buyer:{id:"BY789",name:"John",surname:"Doe",gsmNumber:"+905350000000",email:"email@email.com",identityNumber:"74300864791",lastLoginDate:"2015-10-05 12:43:35",registrationDate:"2013-04-21 15:12:09",registrationAddress:"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1",ip:"85.34.78.112",city:"Istanbul",country:"Turkey",zipCode:"34732"},shippingAddress:{contactName:"Jane Doe",city:"Istanbul",country:"Turkey",address:"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1",zipCode:"34742"},billingAddress:{contactName:"Jane Doe",city:"Istanbul",country:"Turkey",address:"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1",zipCode:"34742"},basketItems:[{id:"BI101",name:"Binocular",category1:"Collectibles",category2:"Accessories",itemType:yi.BASKET_ITEM_TYPE.PHYSICAL,price:"0.3"},{id:"BI102",name:"Game code",category1:"Game",category2:"Online Game Items",itemType:yi.BASKET_ITEM_TYPE.VIRTUAL,price:"0.5"},{id:"BI103",name:"Usb",category1:"Electronics",category2:"Usb / Cable",itemType:yi.BASKET_ITEM_TYPE.PHYSICAL,price:"0.2"}]}),n),vi.threedsInitialize.create(a,(()=>{var e=fi(v().mark(function t(r,e){var n,o,u;return v().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r)return t.abrupt("return",i.json({status:!1,msg:r}));t.next=2;break;case 2:if("success"===e.status)return n=e.paymentId,o=e.threeDSHtmlContent,u=e.systemTime,t.next=6,Pt(l(l({},a),{},{paymentId:n,systemTime:u,threeDSHtmlContent:o}));t.next=9;break;case 6:return t.abrupt("return",i.json({status:!0,html:n}));case 9:if("failure"==e.status)return t.abrupt("return",i.json({status:!1,msg:e.errorMessage}));t.next=11;break;case 11:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})());case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),pi.get("/iyz/3ds-pay",(()=>{var e=fi(v().mark(function t(r,e){return v().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.redirect("/"));case 1:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),pi.post("/iyz/3ds-pay",(()=>{var e=fi(v().mark(function t(i,a){var r,e,n,o,u,c,s;return v().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=i.body){t.next=3;break}return t.abrupt("return");case 3:return r.status,e=r.paymentId,n=r.conversationId,o=r.conversationData,u=r.mdStatus,t.next=6,h();case 6:if(s=t.sent,c={title:"Ödeme Sonuç",scriptname:"main",scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',menus:s,odemeStatus:""},1==u)return s={conversationId:n,locale:yi.LOCALE.TR,paymentId:e,conversationData:o},t.abrupt("return",vi.threedsPayment.create(s,(()=>{var e=fi(v().mark(function t(r,e){var n,o,u;return v().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r)return t.abrupt("return",a.render("pages/website/sepet/odeme-result.hbs",c));t.next=2;break;case 2:if(n=e.paymentId,o=e.itemTransactions,"success"===e.status)return t.next=6,Nt([n]);t.next=18;break;case 6:return u=t.sent,u=Zu(u,1),u=u[0],u=JSON.parse(u.buyer),u=u.email,t.next=12,bi(u,n);case 12:return t.next=14,p.Query("UPDATE `siparis` SET ? WHERE paymentId = "+n,[{itemTransactions:JSON.stringify(o)}]);case 14:return u=l(l({},i.user),{},{adres:JSON.parse(i.user.adres)}),t.abrupt("return",a.render("pages/website/sepet/odeme-result.hbs",l(l({},c),{},{odemestatus:"Success",odememesaj:"Ödeme Başarılı",paymentId:n,musteri:u})));case 18:if("failure"!=e.status)t.next=23;else{if(n)return t.next=22,SiparisDelete(n);t.next=22}break;case 22:return t.abrupt("return",a.render("pages/website/sepet/odeme-result.hbs",l(l({},c),{},{odemestatus:"Error",odememesaj:e.errorMessage})));case 23:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()));t.next=13;break;case 13:if(-1!=u)t.next=20;else{if(e)return t.next=17,SiparisDelete(e);t.next=17}break;case 17:return t.abrupt("return",a.render("pages/website/sepet/odeme-result.hbs",l(l({},c),{},{odemestatus:"Error",odememesaj:"3-D Secure imzası geçersiz veya doğrulama."})));case 20:if(0!=u)t.next=27;else{if(e)return t.next=24,SiparisDelete(e);t.next=24}break;case 24:return t.abrupt("return",a.render("pages/website/sepet/odeme-result.hbs",l(l({},c),{},{odemestatus:"Error",odememesaj:"3-D Secure imzası geçersiz veya doğrulama."})));case 27:if(2!=u)t.next=34;else{if(e)return t.next=31,SiparisDelete(e);t.next=31}break;case 31:return t.abrupt("return",a.render("pages/website/sepet/odeme-result.hbs",l(l({},c),{},{odemestatus:"Error",odememesaj:"Kart sahibi veya bankası sisteme kayıtlı değil."})));case 34:if(3!=u)t.next=41;else{if(e)return t.next=38,SiparisDelete(e);t.next=38}break;case 38:return t.abrupt("return",a.render("pages/website/sepet/odeme-result.hbs",l(l({},c),{},{odemestatus:"Error",odememesaj:"Kartın bankası sisteme kayıtlı değil."})));case 41:if(4!=u)t.next=48;else{if(e)return t.next=45,SiparisDelete(e);t.next=45}break;case 45:return t.abrupt("return",a.render("pages/website/sepet/odeme-result.hbs",l(l({},c),{},{odemestatus:"Error",odememesaj:"Doğrulama denemesi, kart sahibi sisteme daha sonra kayıt olmayı seçmiş"})));case 48:if(5!=u)t.next=55;else{if(e)return t.next=52,SiparisDelete(e);t.next=52}break;case 52:return t.abrupt("return",a.render("pages/website/sepet/odeme-result.hbs",l(l({},c),{},{odemestatus:"Error",odememesaj:"Doğrulama yapılamıyor."})));case 55:if(6!=u)t.next=62;else{if(e)return t.next=59,SiparisDelete(e);t.next=59}break;case 59:return t.abrupt("return",a.render("pages/website/sepet/odeme-result.hbs",l(l({},c),{},{odemestatus:"Error",odememesaj:"3-D Secure hatası."})));case 62:if(7!=u)t.next=69;else{if(e)return t.next=66,SiparisDelete(e);t.next=66}break;case 66:return t.abrupt("return",a.render("pages/website/sepet/odeme-result.hbs",l(l({},c),{},{odemestatus:"Error",odememesaj:"Sistem hatası."})));case 69:if(7!=u)t.next=74;else{if(e)return t.next=73,SiparisDelete(e);t.next=73}break;case 73:return t.abrupt("return",a.render("pages/website/sepet/odeme-result.hbs",l(l({},c),{},{odemestatus:"Error",odememesaj:"Bilinmeyen kart no."})));case 74:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),pi.post("/iyz/iade",(()=>{var e=fi(v().mark(function t(r,e){var n,o,u;return v().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return");case 2:n={locale:yi.LOCALE.TR,conversationId:"123456789",paymentTransactionId:"",price:"",ip:"85.34.78.112",currency:yi.CURRENCY.TRY},o=r.body,o.paymentId,u=o.price,n.paymentTransactionId=o.paymentTransactionId,n.price=u,vi.refund.create(n,function(t,r){return t?e.json({status:!1,msg:t}):e.json({status:!0,msg:"Ok!",result:r})});case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),pi.post("/iyz/iptal",(()=>{var e=fi(v().mark(function t(r,e){var n,o;return v().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=2;break}return t.abrupt("return");case 2:n={locale:yi.LOCALE.TR,paymentId:"",ip:"85.34.78.112"},o=r.body.paymentId,n.paymentId=o,vi.cancel.create(n,function(t,r){return t?e.json({status:!1,msg:t}):e.json({status:!0,msg:"Ok!",result:r})});case 6:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),t.use("/",pi)}var pi=r.Router({mergeParams:!0}),yi=require("iyzipay"),vi=new yi({apiKey:process.env.IYZICO_API_KEY,secretKey:process.env.IYZICO_SECRET_KEY,uri:process.env.IYZICO_BASE_URL}),bi=(()=>{var e=fi(v().mark(function t(r,e){var n;return v().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=new $u,t.next=3,n.sendMail({to:r,subject:"Soyluistif Alışveriş",text:"",html:'\n      <div style="padding:40px 10px;text-align:center;">\n         <div>Sn.<strong>Soyluistif Makinaları</strong></div>\n          <div><strong>Ödemeniz Gerçekleştirildi</strong></div>\n          <div style="padding:5px 10px; background-color:rgba(0,0,0,0.2); font-weight:700">'.concat(e,'</div>\n            <a href="').concat(qa,'/siparis" target="_blank" style="text-decoration:underline;color:blue">Siparişi Görüntüle</a>\n          <div>Lütfen yukarıdaki linkten siparişinize ulaşabilirsiniz!</div>\n      </div>\n    ')});case 3:t.sent;case 4:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})();function mi(t){return(mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hi(){var o=ji(),t=o.m(hi),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,di(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(hi=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new ki(t,r)},AsyncIterator:xi,async:function(t,r,e,n,o){return(u(r)?Oi:gi)(i(t),r,e,n,o)},keys:wi,values:di}})()}function di(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(mi(t)+" is not iterable")}function wi(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function gi(t,r,e,n,o){var u=Oi(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function Oi(t,r,e,n,o){return new xi(ji().w(t,r,e,n),o||Promise)}function xi(a,c){var o;this.next||(Si(xi.prototype),Si(xi.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),Si(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof ki?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function ji(){var v,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof m?r:m,r=Object.create(r.prototype);return Si(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:v,a:y,f:y.bind(v,4),d:function(t,r){return i=t,a=0,c=v,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(h=a<2?v:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(h=i[t=a?t:"next"]){if(!(h=h.call(i,c)))throw TypeError("iterator result is not an object");if(!h.done)return h;c=h.value,a<2&&(a=0)}else 1===a&&(h=i.return)&&h.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=v}else if((h=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=v,a=1,c=t}finally{s=1}}return{value:h,done:l}}),!0),r;function y(t,r){for(a=t,c=r,h=0;!l&&s&&!e&&h<f.length;h++){var e,n=f[h],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=v):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function m(){}function o(){}function u(){}var h=Object.getPrototypeOf,t=[][r]?h(h([][r]())):(Si(h={},r,function(){return this}),h),i=u.prototype=m.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,Si(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return Si(i,"constructor",o.prototype=u),Si(u,"constructor",o),Si(u,e,o.displayName="GeneratorFunction"),Si(i),Si(i,e,"Generator"),Si(i,r,function(){return this}),Si(i,"toString",function(){return"[object Generator]"}),(ji=function(){return{w:n,m:a}})()}function Si(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(Si=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){Si(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function ki(t,r){this.v=t,this.k=r}function Ei(r,t){var e,n=Object.keys(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(r),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,e)),n}function Pi(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Ei(Object(o),!0).forEach(function(t){var r,e;r=n,e=o[t=t],(t=(t=>(t=((t,r)=>{if("object"!=mi(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);if("object"!=mi(e=e.call(t,r||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==mi(t)?t:t+""))(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Ei(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function Ti(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function _i(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){Ti(n,r,e,o,u,"next",t)}function u(t){Ti(n,r,e,o,u,"throw",t)}o(void 0)})}}var Ni=r.Router({mergeParams:!0}),Ii=(()=>{var e=_i(hi().mark(function t(r,e){var n,o,u;return hi().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return",e.json({msg:"Data not found"}));case 3:return u=n.il_id,o=n.ilce_id,t.next=6,p.Query("SELECT * FROM `mahalleler` where il_id = ? AND ilce_id = ?",[u,o]);case 6:return u=t.sent,t.abrupt("return",e.json(Pi({},u)));case 8:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),Gi=(()=>{var e=_i(hi().mark(function t(r,e){var n,o;return hi().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return",e.json({msg:"Data not found"}));case 3:return o=n.il_id,t.next=6,p.Query("SELECT * FROM `ilceler` where il_id = ?",[o]);case 6:return o=t.sent,t.abrupt("return",e.json(Pi({},o)));case 8:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),Ai=(()=>{var e=_i(hi().mark(function t(r,e){var n;return hi().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.body){t.next=3;break}return t.abrupt("return",e.json({msg:"Data not found"}));case 3:return t.next=5,p.Query("SELECT * FROM `iller`");case 5:return n=t.sent,t.abrupt("return",e.json(Pi({},n)));case 7:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),Fi=(()=>{var e=_i(hi().mark(function t(r,e){var n,o;return hi().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return",e.json({msg:"Data not found"}));case 3:return o=n.il_id,t.next=6,p.Query("SELECT * FROM `iller` WHERE id = ?",[o]);case 6:return o=t.sent,t.abrupt("return",e.json(Pi({},o)));case 8:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),Ri=(()=>{var e=_i(hi().mark(function t(r,e){var n,o;return hi().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return",e.json({msg:"Data not found"}));case 3:return o=n.ilce_id,t.next=6,p.Query("SELECT * FROM `ilceler` WHERE id = ?",[o]);case 6:return o=t.sent,t.abrupt("return",e.json(Pi({},o)));case 8:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),Di=(()=>{var e=_i(hi().mark(function t(r,e){var n,o;return hi().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return",e.json({msg:"Data not found"}));case 3:return o=n.mahalle_id,t.next=6,p.Query("SELECT * FROM `mahalleler` WHERE id = ?",[o]);case 6:return o=t.sent,t.abrupt("return",e.json(Pi({},o)));case 8:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})(),Ci=r.Router({mergeParams:!0}),Mi=require("passport-local");let Li=require("passport");require("bcryptjs");function Qi(t){return(Qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hi(){var o=Ui(),t=o.m(Hi),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,Wi(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(Hi=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new Bi(t,r)},AsyncIterator:Ki,async:function(t,r,e,n,o){return(u(r)?qi:Ji)(i(t),r,e,n,o)},keys:Yi,values:Wi}})()}function Wi(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(Qi(t)+" is not iterable")}function Yi(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Ji(t,r,e,n,o){var u=qi(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function qi(t,r,e,n,o){return new Ki(Ui().w(t,r,e,n),o||Promise)}function Ki(a,c){var o;this.next||(zi(Ki.prototype),zi(Ki.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),zi(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof Bi?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function Ui(){var v,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof m?r:m,r=Object.create(r.prototype);return zi(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:v,a:y,f:y.bind(v,4),d:function(t,r){return i=t,a=0,c=v,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(h=a<2?v:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(h=i[t=a?t:"next"]){if(!(h=h.call(i,c)))throw TypeError("iterator result is not an object");if(!h.done)return h;c=h.value,a<2&&(a=0)}else 1===a&&(h=i.return)&&h.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=v}else if((h=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=v,a=1,c=t}finally{s=1}}return{value:h,done:l}}),!0),r;function y(t,r){for(a=t,c=r,h=0;!l&&s&&!e&&h<f.length;h++){var e,n=f[h],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=v):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function m(){}function o(){}function u(){}var h=Object.getPrototypeOf,t=[][r]?h(h([][r]())):(zi(h={},r,function(){return this}),h),i=u.prototype=m.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,zi(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return zi(i,"constructor",o.prototype=u),zi(u,"constructor",o),zi(u,e,o.displayName="GeneratorFunction"),zi(i),zi(i,e,"Generator"),zi(i,r,function(){return this}),zi(i,"toString",function(){return"[object Generator]"}),(Ui=function(){return{w:n,m:a}})()}function zi(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(zi=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){zi(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function Bi(t,r){this.v=t,this.k=r}function $i(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function Xi(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){$i(n,r,e,o,u,"next",t)}function u(t){$i(n,r,e,o,u,"throw",t)}o(void 0)})}}function Zi(o,u){return new Promise((()=>{var e=Xi(Hi().mark(function t(r,e){var n;return Hi().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:try{"sifre"in u?n=o===u.sifre:"passw"in u&&(n=o===u.passw),r(!!n||"The password that you've entered is incorrect")}catch(t){e(t)}case 1:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})())}var Vi=(()=>{var r=Xi(Hi().mark(function t(r){var e;return Hi().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.Query("SELECT * FROM `users` WHERE `email` = ? ",r);case 3:return e=t.sent,t.abrupt("return",e[0]);case 7:return t.prev=7,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",!1);case 11:case"end":return t.stop()}},t,null,[[0,7]])}));return function(t){return r.apply(this,arguments)}})(),ta=(()=>{var r=Xi(Hi().mark(function t(r){var e;return Hi().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.Query("SELECT * FROM `users` WHERE `id` = ? ",r);case 3:return e=t.sent,t.abrupt("return",e[0]);case 7:return t.prev=7,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",!1);case 11:case"end":return t.stop()}},t,null,[[0,7]])}));return function(t){return r.apply(this,arguments)}})(),ra=(()=>{var r=Xi(Hi().mark(function t(r){var e;return Hi().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.Query("SELECT * FROM `musteriler` WHERE `email` = ? ",r);case 3:return e=t.sent,t.abrupt("return",e[0]);case 7:return t.prev=7,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",!1);case 11:case"end":return t.stop()}},t,null,[[0,7]])}));return function(t){return r.apply(this,arguments)}})(),ea=(()=>{var r=Xi(Hi().mark(function t(r){var e;return Hi().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.Query("SELECT * FROM `musteriler` WHERE `id` = ? ",r);case 3:return e=t.sent,t.abrupt("return",e[0]);case 7:return t.prev=7,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",!1);case 11:case"end":return t.stop()}},t,null,[[0,7]])}));return function(t){return r.apply(this,arguments)}})();function na(t){return(na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oa(){var o=sa(),t=o.m(oa),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,ua(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(oa=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new la(t,r)},AsyncIterator:ca,async:function(t,r,e,n,o){return(u(r)?aa:function(t,r,e,n,o){var u=aa(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})})(i(t),r,e,n,o)},keys:ia,values:ua}})()}function ua(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(na(t)+" is not iterable")}function ia(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function aa(t,r,e,n,o){return new ca(sa().w(t,r,e,n),o||Promise)}function ca(a,c){var o;this.next||(fa(ca.prototype),fa(ca.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),fa(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof la?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function sa(){var v,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof m?r:m,r=Object.create(r.prototype);return fa(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:v,a:y,f:y.bind(v,4),d:function(t,r){return i=t,a=0,c=v,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(h=a<2?v:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(h=i[t=a?t:"next"]){if(!(h=h.call(i,c)))throw TypeError("iterator result is not an object");if(!h.done)return h;c=h.value,a<2&&(a=0)}else 1===a&&(h=i.return)&&h.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=v}else if((h=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=v,a=1,c=t}finally{s=1}}return{value:h,done:l}}),!0),r;function y(t,r){for(a=t,c=r,h=0;!l&&s&&!e&&h<f.length;h++){var e,n=f[h],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=v):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function m(){}function o(){}function u(){}var h=Object.getPrototypeOf,t=[][r]?h(h([][r]())):(fa(h={},r,function(){return this}),h),i=u.prototype=m.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,fa(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return fa(i,"constructor",o.prototype=u),fa(u,"constructor",o),fa(u,e,o.displayName="GeneratorFunction"),fa(i),fa(i,e,"Generator"),fa(i,r,function(){return this}),fa(i,"toString",function(){return"[object Generator]"}),(sa=function(){return{w:n,m:a}})()}function fa(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(fa=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){fa(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function la(t,r){this.v=t,this.k=r}function pa(r,t){var e,n=Object.keys(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(r),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,e)),n}function ya(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?pa(Object(o),!0).forEach(function(t){var r,e;r=n,e=o[t=t],(t=(t=>(t=((t,r)=>{if("object"!=na(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);if("object"!=na(e=e.call(t,r||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==na(t)?t:t+""))(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):pa(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function va(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function ba(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){va(n,r,e,o,u,"next",t)}function u(t){va(n,r,e,o,u,"throw",t)}o(void 0)})}}var Mi=Mi.Strategy,ma=function(n,o,u){Li.authenticate("local",function(t,r,e){switch(n.accepts("html","json")){case"html":if(t)return u(t);if(!r)return o.redirect("/signin");n.logIn(r,function(t){return t?u(t):o.redirect("/ctrlpanel")});break;case"json":if(t)return u(t);if(!r)return console.log("Kullunıcı bulunamadı"),o.status(401).json({ok:!1,msg:"Kullunıcı bulunamadı"});if(e)return console.log(e,r),o.status(401).json({ok:!1,msg:"Email veya şifre hatalı"});n.logIn(r,function(t){return t?(console.log(r,"Hatalı bir durum var"),o.status(401).json({ok:!1,msg:"Hatalı bir durum var"})):o.json({ok:!0})});break;default:o.status(406).json()}})(n,o,u)},ha=function(n,o,u){Li.authenticate("musteri",function(t,r,e){switch(n.accepts("html","json")){case"html":if(t)return u(t);if(!r)return o.redirect("/login");n.logIn(r,function(t){return t?u(t):o.redirect("/")});break;case"json":if(t)return u(t);if(!r)return console.log("Kullunıcı bulunamadı11"),o.status(401).json({ok:!1,msg:"Kullunıcı bulunamadı"});if(e)return console.log(e,r),o.status(401).json({ok:!1,msg:"Email veya şifre hatalı"});n.logIn(r,function(t){return t?(console.log(r,"Hatalı bir durum var"),o.status(401).json({ok:!1,msg:"Hatalı bir durum var"})):o.json({ok:!0})});break;default:o.status(406).json()}})(n,o,u)};function da(t){return(da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wa(){var o=ka(),t=o.m(wa),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,ga(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(wa=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new Pa(t,r)},AsyncIterator:Sa,async:function(t,r,e,n,o){return(u(r)?ja:xa)(i(t),r,e,n,o)},keys:Oa,values:ga}})()}function ga(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(da(t)+" is not iterable")}function Oa(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function xa(t,r,e,n,o){var u=ja(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function ja(t,r,e,n,o){return new Sa(ka().w(t,r,e,n),o||Promise)}function Sa(a,c){var o;this.next||(Ea(Sa.prototype),Ea(Sa.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),Ea(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof Pa?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function ka(){var v,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof m?r:m,r=Object.create(r.prototype);return Ea(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:v,a:y,f:y.bind(v,4),d:function(t,r){return i=t,a=0,c=v,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(h=a<2?v:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(h=i[t=a?t:"next"]){if(!(h=h.call(i,c)))throw TypeError("iterator result is not an object");if(!h.done)return h;c=h.value,a<2&&(a=0)}else 1===a&&(h=i.return)&&h.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=v}else if((h=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=v,a=1,c=t}finally{s=1}}return{value:h,done:l}}),!0),r;function y(t,r){for(a=t,c=r,h=0;!l&&s&&!e&&h<f.length;h++){var e,n=f[h],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=v):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function m(){}function o(){}function u(){}var h=Object.getPrototypeOf,t=[][r]?h(h([][r]())):(Ea(h={},r,function(){return this}),h),i=u.prototype=m.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,Ea(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return Ea(i,"constructor",o.prototype=u),Ea(u,"constructor",o),Ea(u,e,o.displayName="GeneratorFunction"),Ea(i),Ea(i,e,"Generator"),Ea(i,r,function(){return this}),Ea(i,"toString",function(){return"[object Generator]"}),(ka=function(){return{w:n,m:a}})()}function Ea(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(Ea=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){Ea(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function Pa(t,r){this.v=t,this.k=r}function Ta(t){return(t=>{if(Array.isArray(t))return _a(t)})(t)||(t=>{if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)})(t)||((t,r)=>{var e;if(t)return"string"==typeof t?_a(t,r):"Map"===(e="Object"===(e={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_a(t,r):void 0})(t)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function _a(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function Na(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}Li.serializeUser(function(t,r){r(null,t)}),Li.deserializeUser(function(t,r){"local"==t.role?ta(t.id).then(function(t){return r(null,ya(ya({},t),{},{role:"local"}))}).catch(function(t){return r(t,null)}):"musteri"==t.role&&ea(t.id).then(function(t){return r(null,ya(ya({},t),{},{role:"musteri"}))}).catch(function(t){return r(t,null)})});function Ia(t){Ga.get("/signin",re,function(t,r){return r.render("pages/signin.hbs",{title:"Signin",scriptname:"signin"})}),Ga.post("/signin",function(t,r,e){if(!t.body)return r.send("User Not found");e()},ma),Ga.post("/signout",ee),Ga.get("/login",oe,(()=>{a=wa().mark(function t(r,e){var n,o;return wa().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:return n=t.sent,t.next=5,g();case 5:return o=t.sent,t.abrupt("return",e.render("pages/website/auth/login.hbs",{title:"Login",scriptname:"main",scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',menus:Ta(n),wpno:o.whatsappno}));case 7:case"end":return t.stop()}},t)});var a,e=function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){Na(n,r,e,o,u,"next",t)}function u(t){Na(n,r,e,o,u,"throw",t)}o(void 0)})};return function(t,r){return e.apply(this,arguments)}})()),Ga.post("/login",function(t,r,e){if(!t.body)return r.send("User Not found");e()},ha),Ga.post("/logout",ue),t.use("/",Ga)}var Ga=r.Router({mergeParams:!0});function Aa(t){return(Aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fa(){var o=La(),t=o.m(Fa),r=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function u(t){t="function"==typeof t&&t.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function i(t){var o,u;return function(n){o||(o={stop:function(){return u(n.a,2)},catch:function(){return n.v},abrupt:function(t,r){return u(n.a,e[t],r)},delegateYield:function(t,r,e){return o.resultName=r,u(n.d,Ra(t),e)},finish:function(t){return u(n.f,t)}},u=function(t,r,e){n.p=o.prev,n.n=o.next;try{return t(r,e)}finally{o.next=n.n}}),o.resultName&&(o[o.resultName]=n.v,o.resultName=void 0),o.sent=n.v,o.next=n.n;try{return t.call(this,o)}finally{n.p=o.prev,n.n=o.next}}}return(Fa=function(){return{wrap:function(t,r,e,n){return o.w(i(t),r,e,n&&n.reverse())},isGeneratorFunction:u,mark:o.m,awrap:function(t,r){return new Ha(t,r)},AsyncIterator:Ma,async:function(t,r,e,n,o){return(u(r)?Ca:function(t,r,e,n,o){var u=Ca(t,r,e,n,o);return u.next().then(function(t){return t.done?t.value:u.next()})})(i(t),r,e,n,o)},keys:Da,values:Ra}})()}function Ra(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(Aa(t)+" is not iterable")}function Da(t){var r,e=Object(t),n=[];for(r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Ca(t,r,e,n,o){return new Ma(La().w(t,r,e,n),o||Promise)}function Ma(a,c){var o;this.next||(Qa(Ma.prototype),Qa(Ma.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),Qa(this,"_invoke",function(e,t,n){function r(){return new c(function(t,r){!function r(t,e,n,o){try{var u=a[t](e),i=u.value;return i instanceof Ha?c.resolve(i.v).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(i).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,o)})}catch(t){o(t)}}(e,n,t,r)})}return o=o?o.then(r,r):r()},!0)}function La(){var v,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function n(t,r,e,n){var o,u,i,a,c,s,f,l,p,r=r&&r.prototype instanceof m?r:m,r=Object.create(r.prototype);return Qa(r,"_invoke",(o=t,u=e,f=n||[],l=!1,p={p:s=0,n:0,v:v,a:y,f:y.bind(v,4),d:function(t,r){return i=t,a=0,c=v,p.n=r,b}},function(t,r,e){if(1<s)throw TypeError("Generator is already running");for(l&&1===r&&y(r,e),a=r,c=e;(h=a<2?v:c)||!l;){i||(a?a<3?(1<a&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(h=i[t=a?t:"next"]){if(!(h=h.call(i,c)))throw TypeError("iterator result is not an object");if(!h.done)return h;c=h.value,a<2&&(a=0)}else 1===a&&(h=i.return)&&h.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);i=v}else if((h=(l=p.n<0)?c:o.call(u,p))!==b)break}catch(t){i=v,a=1,c=t}finally{s=1}}return{value:h,done:l}}),!0),r;function y(t,r){for(a=t,c=r,h=0;!l&&s&&!e&&h<f.length;h++){var e,n=f[h],o=p.p,u=n[2];3<t?(e=u===r)&&(c=n[(a=n[4])?5:a=3],n[4]=n[5]=v):n[0]<=o&&((e=t<2&&o<n[1])?(a=0,p.v=r,p.n=n[1]):o<u&&(e=t<3||n[0]>r||u<r)&&(n[4]=t,n[5]=r,p.n=u,a=0))}if(e||1<t)return b;throw l=!0,r}}var b={};function m(){}function o(){}function u(){}var h=Object.getPrototypeOf,t=[][r]?h(h([][r]())):(Qa(h={},r,function(){return this}),h),i=u.prototype=m.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,Qa(t,e,"GeneratorFunction")),t.prototype=Object.create(i),t}return Qa(i,"constructor",o.prototype=u),Qa(u,"constructor",o),Qa(u,e,o.displayName="GeneratorFunction"),Qa(i),Qa(i,e,"Generator"),Qa(i,r,function(){return this}),Qa(i,"toString",function(){return"[object Generator]"}),(La=function(){return{w:n,m:a}})()}function Qa(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(Qa=function(t,r,e,n){r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:((n=function(r,e){Qa(t,r,function(t){return this._invoke(r,e,t)})})("next",0),n("throw",1),n("return",2))})(t,r,e,n)}function Ha(t,r){this.v=t,this.k=r}function Wa(t,r,e,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function Ya(a){return function(){var t=this,i=arguments;return new Promise(function(r,e){var n=a.apply(t,i);function o(t){Wa(n,r,e,o,u,"next",t)}function u(t){Wa(n,r,e,o,u,"throw",t)}o(void 0)})}}var Ja=r.Router({mergeParams:!0}),qa=(Ka=new Mi({usernameField:"email",passwordField:"sifre",passReqToCallback:!0},(()=>{var o=ba(oa().mark(function t(r,e,n,o){var u,i;return oa().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Vi(e);case 3:if(u=t.sent){t.next=8;break}return t.abrupt("return",o(null,!1));case 8:return t.next=10,Zi(n,u);case 10:if(!0===(i=t.sent))return t.abrupt("return",o(null,ya(ya({},u),{},{role:"local"}),null));t.next=15;break;case 15:if("The password that you've entered is incorrect"===i)return t.abrupt("return",o(null,ya(ya({},u),{},{role:"local"}),i));t.next=19;break;case 19:return t.abrupt("return",o(null,!1,null));case 20:t.next=25;break;case 22:return t.prev=22,t.t0=t.catch(0),t.abrupt("return",o(null,!1,{message:t.t0}));case 25:case"end":return t.stop()}},t,null,[[0,22]])}));return function(t,r,e,n){return o.apply(this,arguments)}})()),Mi=new Mi({usernameField:"email",passwordField:"passw",passReqToCallback:!0},(()=>{var o=ba(oa().mark(function t(r,e,n,o){var u,i;return oa().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ra(e);case 3:if(u=t.sent){t.next=8;break}return t.abrupt("return",o(null,!1));case 8:return t.next=10,Zi(n,u);case 10:if(!0===(i=t.sent))return t.abrupt("return",o(null,ya(ya({},u),{},{role:"musteri"}),null));t.next=15;break;case 15:if("The password that you've entered is incorrect"===i)return t.abrupt("return",o(null,ya(ya({},u),{},{role:"musteri"}),i));t.next=19;break;case 19:return t.abrupt("return",o(null,!1,null));case 20:t.next=25;break;case 22:return t.prev=22,t.t0=t.catch(0),t.abrupt("return",o(null,!1,{message:t.t0}));case 25:case"end":return t.stop()}},t,null,[[0,22]])}));return function(t,r,e,n){return o.apply(this,arguments)}})()),Li.use("musteri",Mi),Li.use("local",Ka),"https://crazy-noyce.89-250-72-218.plesk.page"),Mi=require("body-parser"),Ka=require("method-override"),Ua=require("cookie-parser"),za=require("express-session"),c=require("compression"),b=require("cors"),t=((0,t.config)({path:["const.env"]}),r()),Ba=(t.use(b({origin:!0})),process.env.PORT||3e3);t.use(c()),t.use(Ua("secret")),t.use(za({secret:"secret",resave:!0,saveUninitialized:!1,cookie:{maxAge:864e5}})),t.engine(".hbs",(0,m.engine)({defaultLayout:"main",extname:".hbs",layoutsDir:"views/layouts",partialsDir:["views/partials"],helpers:{calc:function(t){return t+7},list:function(t,r,e){return"<h3>"+e.fn({test:t,test1:r,label:"custom Helper List"})},IsEq:function(t,r,e){return t===r?e.fn(this):e.inverse(this)},BiggerThan:function(t,r){return 0<t.length?r.fn(this):r.inverse(this)},LessThan:function(t,r){return t.length<=0?r.fn(this):r.inverse(this)},Inc:function(t,r){return parseInt(t)+1},Json:function(t,r){return JSON.stringify(t)},DigitFract:function(t,r){return t.toFixed(r)}}})),t.set("view engine",".hbs"),t.set("views","".concat(process.cwd(),"/views")),t.use(r.static("public")),t.use(Mi.urlencoded({limit:"100mb",extended:!0,parameterLimit:1e6})),t.use(Mi.json({limit:"100mb"})),t.use(Mi.text({limit:"100mb"})),t.use(Ka("_method")),t.use(Li.initialize()),t.use(Li.session()),li(b=t),c=b,Ci.post("/template/get-txt",function(t,r){return t.body?(t=t.body.filepath,r.setHeader("Content-Type","text/plain"),t=(0,C.readFileSync)("".concat(process.cwd(),"/public/templates/").concat(t),"utf-8"),r.send(t)):r.json({msg:"Error!"})}),c.use("/",Ci),c=b,Ni.post("/get-il",Fi),Ni.post("/get-iller",Ai),Ni.post("/get-ilce",Ri),Ni.post("/get-ilceler",Gi),Ni.post("/get-mahalle",Di),Ni.post("/get-mahalleler",Ii),c.use("/",Ni),c=b,Q.post("/stat/fileupload",M.single("file"),function(t,r){r.status(200).json({msg:"Ok!"})}),Q.post("/stat/filedelete",function(t,r){return t.body?(t=t.body.filepath,t=process.cwd()+"/public"+t,(0,L.existsSync)(t)&&(0,L.unlinkSync)(t),r.json({msg:"Kaldırıldı"})):r.json({msg:"Data Not found"})}),Q.post("/stat/folderdelete",function(t,r){return t.body?(t=t.body.folderpath,t=process.cwd()+"/public"+t,(0,L.existsSync)(t)&&(0,L.rmdirSync)(t,{recursive:!0}),r.json({msg:"Kaldırıldı"})):r.json({msg:"Data Not found"})}),c.use("/",Q),c=b,i.get("/",H),c.use("/",i),c=b,i.get("/hakkimizda",ur),i.get("/iletisim",ur),i.get("/kullanici-sozlesmesi",ur),i.get("/mesafeli-satis-sozlesmesi",ur),i.get("/siparis-takip",ur),i.get("/havale-bildirimleri",ur),c.use("/",i),Nu(b),c=b,i.get("/kategori/all*",Cr),i.get("/kategori*",Mr),c.use("/",i),Iu(b),Au(b),Gu(b),Fu(b),Ia(b),c=b,i.get("/uye-ol",Ao),i.post("/uye-ol",Fo),i.get("/onay-kodu",Uo),i.get("/cust/info",ne,lu),i.get("/cust/adress",ne,vu),i.get("/cust/order",ne,hu),i.post("/cust/update-info",yu),i.post("/cust/update-useradres",pu),i.get("/cust*",function(t,r){return r.redirect("/cust/info")}),c.use("/",i),Ja.post("/templates/get-temp",(()=>{var e=Ya(Fa().mark(function t(r,e){var n,o;return Fa().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.body){t.next=3;break}return t.abrupt("return");case 3:return o=n.folderpath,o=process.cwd()+"/public/templates/"+o,o=(0,C.readFileSync)(o,"utf-8"),e.set("Content-Type","text/plain"),t.abrupt("return",e.send(o));case 8:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),Se(c=b),Qe(c),en(c),dn(c),so(c),c.use("/",i),Ja.get("/ctrlpanel",e,(()=>{var e=Ya(Fa().mark(function t(r,e){return Fa().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.render("pages/ctrlpanel/dashboard.hbs",{title:"Anasayfa",scriptname:"ctrlpanel-main",scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',user:r.user}));case 1:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),Ja.get("/ctrlpanel**",function(t,r){return r.redirect("/ctrlpanel/")}),Ja.get("**",(()=>{var e=Ya(Fa().mark(function t(r,e){var n;return Fa().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:n=t.sent,e.status(404).render("pages/404.hbs",{title:"404 Not Found",scriptname:"main",scripts:'<script defer src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"><\/script>',menus:n});case 4:case"end":return t.stop()}},t)}));return function(t,r){return e.apply(this,arguments)}})()),b.use("/",Ja),t.all("**",function(t,r){r.render("pages/404.hbs",{title:"Kontrol Panel",scriptname:"main"})}),t.listen(Ba,function(){console.log("Server is starting at ".concat(Ba))})})();